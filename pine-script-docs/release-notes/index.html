<html lang="zh-CN" data-theme="light" class="translated-ltr"><head><script data-astro-exec="">
			const url = window.location.href;
			const expectedUrl = url.replace(
				/^https:\/\/(?!beta)(\w+\.)?tradingview\.com/,
				'https://www.tradingview.com',
			);
			if (url !== expectedUrl) {
				window.location.replace(expectedUrl);
			}
		</script><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="icon" href="/pine-script-docs/static/favicon.ico"><link rel="icon" type="image/svg+xml" href="/pine-script-docs/favicon.svg"><title>发行说明</title><meta name="og:title" content="Release notes"><meta name="twitter:title" content="Release notes"><meta name="description" content="Everything you need to know about Pine Script™."><meta name="og:description" content="Everything you need to know about Pine Script™."><meta name="twitter:description" content="Everything you need to know about Pine Script™."><meta name="keywords" content="tradingview, pine, script, indicators, strategies"><meta name="og:image" content="/pine-script-docs/meta-image.png"><meta name="twitter:image" content="/pine-script-docs/meta-image.png"><meta name="og:image:width" content="1200"><meta name="og:image:height" content="630"><meta name="og:url" content="https://www.tradingview.com/pine-script-docs/release-notes/"><meta name="twitter:url" content="https://www.tradingview.com/pine-script-docs/release-notes/"><meta name="og:type" content="website"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:site" content="@TradingView"><link rel="canonical" href="https://www.tradingview.com/pine-script-docs/release-notes/"><link rel="sitemap" href="/pine-script-docs/sitemap-index.xml"><meta name="astro-view-transitions-enabled" content="true"><meta name="astro-view-transitions-fallback" content="none"><link rel="stylesheet" href="/pine-script-docs/_astro/index.jN9AZoBe.css">
<link rel="stylesheet" href="/pine-script-docs/_astro/index.C8b720yZ.css"><script type="module" src="/pine-script-docs/_astro/hoisted.D4iEV6y6.js" data-astro-exec=""></script><style type="text/css" media="screen">.monaco-editor-tv-pine-light { 
.mtk1 { color: #131722; }
.mtk2 { color: #ffffff; }
.mtk3 { color: #808080; }
.mtk4 { color: #ff0000; }
.mtk5 { color: #0451a5; }
.mtk6 { color: #0000ff; }
.mtk7 { color: #098658; }
.mtk8 { color: #008000; }
.mtk9 { color: #9598a1; }
.mtk10 { color: #dd0000; }
.mtk11 { color: #cc2929; }
.mtk12 { color: #f57f17; }
.mtk13 { color: #000000; }
.mtk14 { color: #383838; }
.mtk15 { color: #0c3299; }
.mtk16 { color: #2962ff; }
.mtk17 { color: #8e24aa; }
.mtk18 { color: #22ab94; }
.mtk19 { color: #cd3131; }
.mtk20 { color: #863b00; }
.mtk21 { color: #af00db; }
.mtk22 { color: #800000; }
.mtk23 { color: #e00000; }
.mtk24 { color: #3030c0; }
.mtk25 { color: #666666; }
.mtk26 { color: #778899; }
.mtk27 { color: #c700c7; }
.mtk28 { color: #a31515; }
.mtk29 { color: #388e3c; }
.mtk30 { color: #4f76ac; }
.mtk31 { color: #008080; }
.mtk32 { color: #001188; }
.mtk33 { color: #2a2e39; }
.mtk34 { color: #4864aa; }
.mtki { font-style: italic; }
.mtkb { font-weight: bold; }
.mtku { text-decoration: underline; text-underline-position: under; }
.mtks { text-decoration: line-through; }
.mtks.mtku { text-decoration: underline line-through; text-underline-position: under; } }</style><link type="text/css" rel="stylesheet" charset="UTF-8" href="https://www.gstatic.com/_/translate_http/_/ss/k=translate_http.tr.26tY-h6gH9w.L.W.O/am=GAY/d=0/rs=AN8SPfrev-A3NvrBP0gNq8zXCqKY7IcBLA/m=el_main_css"></head> <body> <div id="search-content-blur" hidden=""></div> <script data-astro-exec="">
	/* eslint-disable @typescript-eslint/typedef */
	window.ThemeProvider = (() => {
		function getCurrent() {
			return (
				// eslint-disable-next-line no-restricted-syntax
				typeof localStorage !== 'undefined' &&
				localStorage.getItem('tv-docs-theme')
			);
		}
		const storedTheme = getCurrent();
		const theme =
			storedTheme ||
			(window.matchMedia('(prefers-color-scheme: light)').matches ?
				'light'
			:	'dark');
		document.documentElement.dataset.theme =
			theme === 'light' ? 'light' : 'dark';
		document.documentElement.classList.toggle(
			'theme-dark',
			theme === 'dark',
		); // add support for ui-lib themes
		document.documentElement.classList.toggle(
			'sl-theme-dark',
			theme === 'dark',
		); // add support for shoelace themes

		return {
			updatePickers(themeArg = storedTheme || 'auto') {
				let currentTheme = themeArg;
				if (currentTheme === 'unknown') {
					currentTheme = getCurrent() || 'auto';
				}
				document
					.querySelectorAll('docs-theme-select')
					.forEach((picker) => {
						const select = picker.querySelector('select');
						if (select) select.value = currentTheme;
						/** @type {HTMLTemplateElement | null} */
						const tmpl = document.querySelector(`#theme-icons`);
						const newIcon =
							tmpl &&
							tmpl.content.querySelector('.' + currentTheme);
						if (newIcon) {
							const oldIcon =
								picker.querySelector('svg.label-icon');
							if (oldIcon) {
								oldIcon.replaceChildren(
									...newIcon.cloneNode(true).childNodes,
								);
							}
						}
					});
			},
		};
	})();
	/* eslint-enable @typescript-eslint/typedef */
</script><template id="theme-icons"><svg width="16px" height="16px" viewBox="0 0 28 28" class="light" data-icon="theme/sun-28">  <symbol id="ai:local:theme/sun-28"><g fill="currentColor"><path d="M14 3h1.5v5H14V3Zm0 18h1.5v5H14v-5Zm12-5.5V14h-5v1.5h5ZM8 14v1.5H3V14h5Zm15.3-7-1-1-3.6 3.6 1.1 1 3.5-3.5ZM9.5 18.7l1.1 1.1-3.5 3.5-1-1 3.4-3.6ZM22 23.3l1-1-3.6-3.6-1 1.1 3.5 3.5ZM10.3 9.6l-1.1 1-3.5-3.5 1-1 3.6 3.5Z"></path><path fill-rule="evenodd" d="M19 14.5a4.5 4.5 0 1 1-9 0 4.5 4.5 0 0 1 9 0Zm-1.5 0a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z" clip-rule="evenodd"></path></g></symbol><use xlink:href="#ai:local:theme/sun-28"></use>  </svg><svg width="16px" height="16px" viewBox="0 0 28 28" class="dark" data-icon="theme/moon-28">  <symbol id="ai:local:theme/moon-28"><path fill="currentColor" fill-rule="evenodd" d="M21 7.02A9.23 9.23 0 0 0 15.2 5 9.1 9.1 0 0 0 6 14c0 4.97 4.12 9 9.2 9a9.33 9.33 0 0 0 5.8-2.02A7 7 0 0 1 14.36 14 7 7 0 0 1 21 7.02Zm-3.95-.3a7.91 7.91 0 0 0-1.85-.22A7.6 7.6 0 0 0 7.5 14a7.6 7.6 0 0 0 7.7 7.5 8 8 0 0 0 1.85-.22A8.46 8.46 0 0 1 12.86 14c0-3.1 1.69-5.8 4.19-7.28Z" clip-rule="evenodd"></path></symbol><use xlink:href="#ai:local:theme/moon-28"></use>  </svg><svg width="16px" height="16px" viewBox="0 0 28 28" class="auto" data-icon="theme/system-28">  <symbol id="ai:local:theme/system-28"><path fill="currentColor" d="M8 4h1v2H8V4Zm0 9v2h1v-2H8Zm6-3V9h-2v1h2ZM3 9v1h2V9H3Zm5.5 3a2.5 2.5 0 1 0 0-5 2.5 2.5 0 0 0 0 5Zm4.2-6-.7-.7-1.4 1.4.7.7L12.7 6ZM5 13.7l-.7-.7 1.4-1.4.7.7L5 13.7Zm7.7-.7-.7.7-1.4-1.4.7-.7 1.4 1.4ZM4.3 6l.7-.7 1.4 1.4-.7.7L4.3 6Zm3 17 14-14 .8.7L8 23.7l-.7-.7Zm17.2-.1a3.5 3.5 0 0 1-3.4-5.9H21a4 4 0 1 0 3.5 5.9Z"></path></symbol><use xlink:href="#ai:local:theme/system-28"></use>  </svg></template> <div class="backdrop" data-mobile-menu-backdrop="" data-astro-cid-h2irkosh=""></div> <div class="menu-container" data-astro-cid-h2irkosh=""> <div class="header" data-astro-cid-h2irkosh=""> <div class="header-group" data-astro-cid-h2irkosh="">    <docs-theme-select class="" data-astro-cid-3wpspbi7=""> <label style="--sl-select-width: 48px; --sl-label-icon-size: 28px;" data-astro-cid-lmznfliq=""> <span class="sr-only" data-astro-cid-lmznfliq=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">主题</font></font></span> <svg width="28" height="28" viewBox="0 0 28 28" class="icon label-icon" data-button="" data-round="" data-astro-cid-lmznfliq="" data-icon="theme/system-28">  <symbol id="ai:local:theme/sun-28"><g fill="currentColor"><path d="M14 3h1.5v5H14V3Zm0 18h1.5v5H14v-5Zm12-5.5V14h-5v1.5h5ZM8 14v1.5H3V14h5Zm15.3-7-1-1-3.6 3.6 1.1 1 3.5-3.5ZM9.5 18.7l1.1 1.1-3.5 3.5-1-1 3.4-3.6ZM22 23.3l1-1-3.6-3.6-1 1.1 3.5 3.5ZM10.3 9.6l-1.1 1-3.5-3.5 1-1 3.6 3.5Z"></path><path fill-rule="evenodd" d="M19 14.5a4.5 4.5 0 1 1-9 0 4.5 4.5 0 0 1 9 0Zm-1.5 0a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z" clip-rule="evenodd"></path></g></symbol><use xlink:href="#ai:local:theme/sun-28"></use>  </svg> <select value="auto" data-button="" data-astro-cid-lmznfliq=""> <option value="dark" data-astro-cid-lmznfliq=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;&nbsp;黑暗的&nbsp;&nbsp;</font></font></option><option value="light" data-astro-cid-lmznfliq=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;&nbsp;明亮&nbsp;&nbsp;</font></font></option><option value="auto" selected="true" data-astro-cid-lmznfliq=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;&nbsp;自动&nbsp;&nbsp;</font></font></option> </select>  </label>  </docs-theme-select>   <script data-astro-exec="">
	ThemeProvider.updatePickers('unknown');
</script>  </div> <div class="header-group" data-astro-cid-h2irkosh="">  <div class="not-content" style="stroke-width:2px" data-astro-cid-pkzv2hgs=""> <button id="mobile-menu-back-button" title="关闭菜单" data-astro-cid-pkzv2hgs="" class="not-content stvb-base stvb-pointer stvb-gray stvb-medium stvb-primary stvb-icon">  <svg width="28" height="28" viewBox="0 0 28 28" data-astro-cid-h2irkosh="" data-icon="theme/arrow-back">  <symbol id="ai:local:theme/arrow-back"><g fill="none"><g clip-path="url(#a)"><path stroke="var(--arrow-fill-color, #131722)" d="m17 20-6-6 6-6"></path></g><defs><clipPath id="a"><path fill="#fff" d="M28 28H0V0h28z"></path></clipPath></defs></g></symbol><use xlink:href="#ai:local:theme/arrow-back"></use>  </svg>  </button> </div>  </div> </div> <aside id="nav" class="keep-visible" style="--navbar-right-border-width: 0px" data-astro-cid-sa57sq6l=""> <div class="sidebar-viewport" data-astro-cid-sa57sq6l=""> <div class="sidebar" data-mobile="" data-astro-cid-sa57sq6l=""> <ul class="toc" aria-label="文档侧边栏" data-astro-cid-sa57sq6l=""> <li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/welcome" data-astro-cid-omxx3dey=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">欢迎使用 Pine Script™ v5</font></font></a></li><li class="item" data-astro-cid-omxx3dey=""><details data-astro-cid-omxx3dey=""><summary data-astro-cid-omxx3dey=""><div class="summary-link" data-astro-cid-omxx3dey=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">初识Pine Script™</font></font></div><div class="caret" data-astro-cid-omxx3dey=""><svg width="18" height="18" viewBox="0 0 24 24" class="icon" data-astro-cid-omxx3dey="" data-icon="theme/right-caret">  <use xlink:href="#ai:local:theme/right-caret"></use>  </svg></div></summary><ul class="children" data-astro-cid-omxx3dey=""><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/primer/first-steps" data-astro-cid-omxx3dey=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第一步</font></font></a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/primer/first-indicator" data-astro-cid-omxx3dey=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第一个指标</font></font></a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/primer/next-steps" data-astro-cid-omxx3dey=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">下一步</font></font></a></li></ul></details></li><li class="item" data-astro-cid-omxx3dey=""><details data-astro-cid-omxx3dey=""><summary data-astro-cid-omxx3dey=""><div class="summary-link" data-astro-cid-omxx3dey=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">语言</font></font></div><div class="caret" data-astro-cid-omxx3dey=""><svg width="18" height="18" viewBox="0 0 24 24" class="icon" data-astro-cid-omxx3dey="" data-icon="theme/right-caret">  <use xlink:href="#ai:local:theme/right-caret"></use>  </svg></div></summary><ul class="children" data-astro-cid-omxx3dey=""><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/language/execution-model" data-astro-cid-omxx3dey=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">执行模型</font></font></a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/language/time-series" data-astro-cid-omxx3dey=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">时间序列</font></font></a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/language/script-structure" data-astro-cid-omxx3dey=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">脚本结构</font></font></a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/language/identifiers" data-astro-cid-omxx3dey=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">身份标识</font></font></a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/language/operators" data-astro-cid-omxx3dey=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">运算符</font></font></a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/language/variable-declarations" data-astro-cid-omxx3dey=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">变量声明</font></font></a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/language/conditional-structures" data-astro-cid-omxx3dey=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">条件结构</font></font></a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/language/loops" data-astro-cid-omxx3dey=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">循环</font></font></a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/language/type-system" data-astro-cid-omxx3dey=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">类型系统</font></font></a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/language/built-ins" data-astro-cid-omxx3dey=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">内置</font></font></a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/language/user-defined-functions" data-astro-cid-omxx3dey=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">用户定义函数</font></font></a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/language/objects" data-astro-cid-omxx3dey=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">对象</font></font></a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/language/enums" data-astro-cid-omxx3dey=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">枚举</font></font></a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/language/methods" data-astro-cid-omxx3dey=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">方法</font></font></a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/language/arrays" data-astro-cid-omxx3dey=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">数组</font></font></a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/language/matrices" data-astro-cid-omxx3dey=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">矩阵</font></font></a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/language/maps" data-astro-cid-omxx3dey=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">地图</font></font></a></li></ul></details></li><li class="item" data-astro-cid-omxx3dey=""><details data-astro-cid-omxx3dey=""><summary data-astro-cid-omxx3dey=""><div class="summary-link" data-astro-cid-omxx3dey=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">概念</font></font></div><div class="caret" data-astro-cid-omxx3dey=""><svg width="18" height="18" viewBox="0 0 24 24" class="icon" data-astro-cid-omxx3dey="" data-icon="theme/right-caret">  <use xlink:href="#ai:local:theme/right-caret"></use>  </svg></div></summary><ul class="children" data-astro-cid-omxx3dey=""><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/concepts/alerts" data-astro-cid-omxx3dey=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">警报</font></font></a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/concepts/backgrounds" data-astro-cid-omxx3dey=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">背景</font></font></a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/concepts/bar-coloring" data-astro-cid-omxx3dey=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">条形图色彩</font></font></a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/concepts/bar-plotting" data-astro-cid-omxx3dey=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">条形图</font></font></a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/concepts/bar-states" data-astro-cid-omxx3dey=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">条形图状态</font></font></a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/concepts/chart-information" data-astro-cid-omxx3dey=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图表信息</font></font></a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/concepts/colors" data-astro-cid-omxx3dey=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">颜色</font></font></a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/concepts/fills" data-astro-cid-omxx3dey=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">填充</font></font></a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/concepts/inputs" data-astro-cid-omxx3dey=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">输入</font></font></a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/concepts/levels" data-astro-cid-omxx3dey=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">级别</font></font></a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/concepts/libraries" data-astro-cid-omxx3dey=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">库</font></font></a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/concepts/lines-and-boxes" data-astro-cid-omxx3dey=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">线条和盒子</font></font></a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/concepts/non-standard-charts-data" data-astro-cid-omxx3dey=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">非标准图表数据</font></font></a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/concepts/other-timeframes-and-data" data-astro-cid-omxx3dey=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">其他时间范围和数据</font></font></a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/concepts/plots" data-astro-cid-omxx3dey=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图</font></font></a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/concepts/repainting" data-astro-cid-omxx3dey=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">重新粉刷</font></font></a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/concepts/sessions" data-astro-cid-omxx3dey=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">会议</font></font></a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/concepts/strategies" data-astro-cid-omxx3dey=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">策略</font></font></a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/concepts/tables" data-astro-cid-omxx3dey=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表格</font></font></a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/concepts/text-and-shapes" data-astro-cid-omxx3dey=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">文本和形状</font></font></a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/concepts/time" data-astro-cid-omxx3dey=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">时间</font></font></a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/concepts/timeframes" data-astro-cid-omxx3dey=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">时间范围</font></font></a></li></ul></details></li><li class="item" data-astro-cid-omxx3dey=""><details data-astro-cid-omxx3dey=""><summary data-astro-cid-omxx3dey=""><div class="summary-link" data-astro-cid-omxx3dey=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">编写脚本</font></font></div><div class="caret" data-astro-cid-omxx3dey=""><svg width="18" height="18" viewBox="0 0 24 24" class="icon" data-astro-cid-omxx3dey="" data-icon="theme/right-caret">  <use xlink:href="#ai:local:theme/right-caret"></use>  </svg></div></summary><ul class="children" data-astro-cid-omxx3dey=""><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/writing/style-guide" data-astro-cid-omxx3dey=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">风格指南</font></font></a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/writing/debugging" data-astro-cid-omxx3dey=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">调试</font></font></a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/writing/profiling-and-optimization" data-astro-cid-omxx3dey=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">分析和优化</font></font></a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/writing/publishing" data-astro-cid-omxx3dey=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">发布脚本</font></font></a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/writing/limitations" data-astro-cid-omxx3dey=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">限制</font></font></a></li></ul></details></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/faq" data-astro-cid-omxx3dey=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">常问问题</font></font></a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/error-messages" data-astro-cid-omxx3dey=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">错误消息</font></font></a></li><li class="item" data-current="" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/release-notes" data-astro-cid-omxx3dey=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">发行说明</font></font></a></li><li class="item" data-astro-cid-omxx3dey=""><details data-astro-cid-omxx3dey=""><summary data-astro-cid-omxx3dey=""><div class="summary-link" data-astro-cid-omxx3dey=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">迁移指南</font></font></div><div class="caret" data-astro-cid-omxx3dey=""><svg width="18" height="18" viewBox="0 0 24 24" class="icon" data-astro-cid-omxx3dey="" data-icon="theme/right-caret">  <use xlink:href="#ai:local:theme/right-caret"></use>  </svg></div></summary><ul class="children" data-astro-cid-omxx3dey=""><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/migration-guides/to-pine-version-5" data-astro-cid-omxx3dey=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">转至 Pine Script™ 版本 5</font></font></a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/migration-guides/to-pine-version-4" data-astro-cid-omxx3dey=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">转至 Pine Script™ 版本 4</font></font></a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/migration-guides/to-pine-version-3" data-astro-cid-omxx3dey=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">转至 Pine Script™ 版本 3</font></font></a></li></ul></details></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/where-can-i-get-more-information" data-astro-cid-omxx3dey=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在哪里可以获得更多信息？</font></font></a></li> </ul> <div class="toc-bottom" data-astro-cid-sa57sq6l=""></div> </div> </div> </aside>  </div>   <header class="header" data-astro-cid-d74r2unp=""> <nav role="navigation" aria-label="主导航" data-astro-cid-d74r2unp=""> <mobile-menu-button id="mobile-menu-button-wc" data-astro-cid-oojooh3d=""> <!-- Annoyingly I need to wrap this. TODO: improve this --> <div id="mobile-menu-button-header" data-astro-cid-oojooh3d=""> <div class="not-content" style="" data-astro-cid-pkzv2hgs=""> <button title="打开导航菜单" data-astro-cid-pkzv2hgs="" class="not-content stvb-base stvb-pointer stvb-gray stvb-medium stvb-secondary stvb-icon stvb-icon-force-color stvb-force-no-border">  <svg width="28" height="28" viewBox="0 0 24 24" data-astro-cid-oojooh3d="" data-icon="theme/bars">  <symbol id="ai:local:theme/bars"><path fill="currentColor" d="M3 8h18a1 1 0 1 0 0-2H3a1 1 0 0 0 0 2Zm18 8H3a1 1 0 0 0 0 2h18a1 1 0 0 0 0-2Zm0-5H3a1 1 0 0 0 0 2h18a1 1 0 0 0 0-2Z"></path></symbol><use xlink:href="#ai:local:theme/bars"></use>  </svg>  </button> </div>  </div> </mobile-menu-button>   <div data-hide-when-search="" data-astro-cid-d74r2unp=""> <div class="header-logo" data-astro-cid-tycb33lk=""> <a href="/pine-script-docs/" aria-label="主页按钮" data-astro-cid-tycb33lk=""> <div class="documentation-logo logo" data-astro-cid-tycb33lk=""><svg width="188" height="44" viewBox="0 0 188 44" fill="none" xmlns="http://www.w3.org/2000/svg">
<path fill-rule="evenodd" clip-rule="evenodd" d="M26.9989 28.0001L18.4281 20.7531L11.3382 23.2611C10.402 23.5923 9.60771 22.5041 10.2085 21.7134L21.0877 7.39502C21.4749 6.88536 22.2346 6.86567 22.6478 7.35459L34.7627 21.6923C35.1531 22.1543 35.0472 22.8544 34.5376 23.1802L26.9989 28.0001ZM32.4978 22.1105L27.1641 25.5207L19.7195 19.2258C19.1767 18.7669 18.4312 18.6305 17.7611 18.8676L13.8245 20.2602L21.9253 9.59841L32.4978 22.1105Z" fill="currentColor"></path>
<path d="M33.432 28.0842L38.3592 34.7471C38.7427 35.2657 38.3724 36 37.7274 36H6.27248C5.62746 36 5.25722 35.2657 5.64074 34.7471L10.8523 27.6996C10.9484 27.5697 11.0822 27.4725 11.2356 27.4214L17.6878 25.2707C17.9285 25.1904 18.1932 25.2314 18.3984 25.3806L26.2854 31.1166C26.5445 31.3051 26.8922 31.3173 27.1639 31.1475L32.3838 27.885C32.7316 27.6677 33.1881 27.7544 33.432 28.0842Z" fill="currentColor"></path>
<path d="M59.56 13.96C63.016 13.96 65.536 16.456 65.536 19.696C65.536 22.936 63.016 25.432 59.56 25.432H57.376V31H53.896V13.96H59.56ZM59.512 22.168C61.096 22.168 62.152 21.088 62.152 19.696C62.152 18.304 61.096 17.224 59.512 17.224H57.376V22.168H59.512ZM70.8636 14.944C70.8636 16.096 69.9276 17.032 68.7516 17.032C67.6236 17.032 66.6636 16.096 66.6636 14.944C66.6636 13.792 67.6236 12.856 68.7516 12.856C69.9276 12.856 70.8636 13.792 70.8636 14.944ZM67.1196 31V19H70.4076V31H67.1196ZM73.0849 31V19H76.3729V20.368C76.9969 19.408 78.2449 18.736 79.8049 18.736C82.7089 18.736 84.4369 20.848 84.4369 23.968V31H81.1489V24.52C81.1489 22.792 80.4049 21.736 79.0369 21.736C77.5249 21.736 76.3729 22.84 76.3729 25.144V31H73.0849ZM86.2041 25C86.2041 21.448 88.8681 18.736 92.5161 18.736C95.6601 18.736 98.4201 20.752 98.4201 24.64C98.4201 24.928 98.4201 25.264 98.3721 25.768H89.3961C89.5881 27.376 91.0041 28.264 92.5881 28.264C94.0761 28.264 95.1561 27.568 95.6841 26.752L98.1321 28.576C97.0281 30.184 95.0841 31.264 92.5641 31.264C88.9881 31.264 86.2041 28.792 86.2041 25ZM92.4201 21.448C91.1961 21.448 89.8281 22.072 89.5161 23.536H95.1321C94.8441 22.12 93.6441 21.448 92.4201 21.448ZM104.412 28.24L107.076 26.008C107.916 27.28 109.38 28.024 110.772 28.024C112.14 28.024 113.052 27.352 113.052 26.368C113.052 25.408 112.356 24.736 110.676 24.16L109.236 23.656C106.5 22.696 105.036 21.112 105.036 18.784C105.036 15.568 107.484 13.672 110.796 13.672C112.884 13.672 114.708 14.392 116.172 16.024L113.868 18.4C113.052 17.416 111.996 16.936 110.82 16.936C109.644 16.936 108.54 17.44 108.54 18.448C108.54 19.48 109.38 19.936 111.18 20.584L112.548 21.088C115.044 22 116.604 23.584 116.604 26.152C116.58 29.2 114.156 31.288 110.628 31.288C107.916 31.288 105.636 30.112 104.412 28.24ZM129.859 27.808C128.827 29.872 126.667 31.264 124.171 31.264C120.619 31.264 117.811 28.624 117.811 25C117.811 21.376 120.619 18.736 124.171 18.736C126.667 18.736 128.827 20.128 129.859 22.192L127.003 23.728C126.523 22.624 125.491 21.808 124.171 21.808C122.443 21.808 121.123 23.152 121.123 25C121.123 26.848 122.443 28.192 124.171 28.192C125.491 28.192 126.523 27.376 127.003 26.272L129.859 27.808ZM131.482 31V19H134.77V20.92C135.178 19.744 136.402 18.856 137.746 18.856C138.082 18.856 138.442 18.88 138.85 19V22.336C138.346 22.168 137.89 22.072 137.362 22.072C135.802 22.072 134.77 23.296 134.77 25.264V31H131.482ZM144.215 14.944C144.215 16.096 143.279 17.032 142.103 17.032C140.975 17.032 140.015 16.096 140.015 14.944C140.015 13.792 140.975 12.856 142.103 12.856C143.279 12.856 144.215 13.792 144.215 14.944ZM140.471 31V19H143.759V31H140.471ZM146.436 36.016V19H149.724V20.344C150.276 19.576 151.548 18.736 153.204 18.736C156.396 18.736 158.844 21.592 158.844 25C158.844 28.408 156.396 31.264 153.204 31.264C151.548 31.264 150.276 30.424 149.724 29.656V36.016H146.436ZM155.508 25C155.508 23.128 154.284 21.736 152.484 21.736C150.684 21.736 149.46 23.128 149.46 25C149.46 26.872 150.684 28.264 152.484 28.264C154.284 28.264 155.508 26.872 155.508 25ZM168.407 30.88C167.879 31.048 167.231 31.144 166.319 31.144C163.775 31.144 161.735 29.728 161.735 26.8V21.88H159.311V19H161.735V15.664H165.023V19H168.407V21.88H165.023V26.152C165.023 27.616 165.647 28.192 167.063 28.192C167.591 28.192 168.023 28.12 168.407 27.976V30.88ZM177.626 22.648V13.96H179.978L181.874 16.888L183.746 13.96H186.122V22.648H183.698V18.184L181.874 20.968L180.026 18.136V22.648H177.626ZM171.386 22.648V16.456H169.058V13.96H176.258V16.456H173.93V22.648H171.386Z" fill="currentColor"></path>
</svg>
</div> </a> </div>  </div> <div class="flex" data-astro-cid-d74r2unp=""></div> <div class="flex" data-astro-cid-d74r2unp=""> <div class="search-container" data-astro-cid-fg37foga=""> <div class="search-wrapper" data-astro-cid-fg37foga=""> <input class="search-input" type="text" placeholder="搜索文档" name="s" value="" data-astro-cid-fg37foga="" data-has-input-listener="true"> <svg width="28" height="28" viewBox="0 0 28 28" class="search-button" data-astro-cid-fg37foga="" data-icon="theme/search">  <symbol id="ai:local:theme/search"><path fill="currentColor" fill-rule="evenodd" d="M18.5 12.5a6 6 0 1 1-12 0 6 6 0 0 1 12 0Zm-1.25 5.8a7.5 7.5 0 1 1 1.06-1.06l4.22 4.23.53.53L22 23.06l-.53-.53-4.22-4.22Z" clip-rule="evenodd"></path></symbol><use xlink:href="#ai:local:theme/search"></use>  </svg> <button class="search-clear" type="button" title="重置" data-search-clear="" data-astro-cid-fg37foga=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">清除</font></font></button> <span class="divider" data-astro-cid-fg37foga=""></span> <button class="search-close" type="button" title="关闭" data-search-close="" data-astro-cid-fg37foga=""> <svg width="18" height="18" viewBox="0 0 18 18" data-astro-cid-fg37foga="" data-icon="theme/cross-18">  <use xlink:href="#ai:local:theme/cross-18"></use>  </svg> </button> </div> <div id="search-results-wrapper" data-astro-cid-fg37foga=""> <aside id="search-results" hidden="" data-astro-cid-fg37foga="" data-has-button-listener="true"> <!-- Don't use h1 because when built it will be used as the first heading on the page --> <div class="heading" data-astro-cid-fg37foga=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">搜索结果</font></font></div> <div id="search-results-contents" data-astro-cid-fg37foga=""></div> </aside> </div> </div>   </div> <ul class="links" data-astro-cid-d74r2unp="">  </ul> <div class="flex" data-astro-cid-d74r2unp=""></div> <div data-hide-when-search="" data-astro-cid-d74r2unp="">    </div> <button id="search-button" data-astro-cid-6zeqadij="" data-has-listener="true" style="display:none"> <svg width="28" height="28" viewBox="0 0 28 28" data-astro-cid-6zeqadij="" data-icon="theme/search">  <use xlink:href="#ai:local:theme/search"></use>  </svg> </button>  <script data-base-url="/pine-script-docs" data-astro-exec="">
	async function loadPageFind() {
		const base = document.currentScript.getAttribute('data-base-url');
		const pageFindBundleUrl = `${base}/pagefind/`;
		const pagefind = await import(`${pageFindBundleUrl}pagefind.js`);
		await pagefind.options({
			bundlePath: pageFindBundleUrl,
		});
		window.pagefind = pagefind;
	}
	loadPageFind().catch();
</script>  <docs-theme-select class="hide-with-breakpoint-568" data-astro-cid-3wpspbi7=""> <label style="--sl-select-width: 48px; --sl-label-icon-size: 28px;" data-astro-cid-lmznfliq=""> <span class="sr-only" data-astro-cid-lmznfliq=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">主题</font></font></span> <svg width="28" height="28" viewBox="0 0 28 28" class="icon label-icon" data-button="" data-round="" data-astro-cid-lmznfliq="" data-icon="theme/system-28">  <symbol id="ai:local:theme/sun-28"><g fill="currentColor"><path d="M14 3h1.5v5H14V3Zm0 18h1.5v5H14v-5Zm12-5.5V14h-5v1.5h5ZM8 14v1.5H3V14h5Zm15.3-7-1-1-3.6 3.6 1.1 1 3.5-3.5ZM9.5 18.7l1.1 1.1-3.5 3.5-1-1 3.4-3.6ZM22 23.3l1-1-3.6-3.6-1 1.1 3.5 3.5ZM10.3 9.6l-1.1 1-3.5-3.5 1-1 3.6 3.5Z"></path><path fill-rule="evenodd" d="M19 14.5a4.5 4.5 0 1 1-9 0 4.5 4.5 0 0 1 9 0Zm-1.5 0a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z" clip-rule="evenodd"></path></g></symbol><use xlink:href="#ai:local:theme/sun-28"></use>  </svg> <select value="auto" data-button="" data-astro-cid-lmznfliq=""> <option value="dark" data-astro-cid-lmznfliq=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;&nbsp;黑暗的&nbsp;&nbsp;</font></font></option><option value="light" data-astro-cid-lmznfliq=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;&nbsp;明亮&nbsp;&nbsp;</font></font></option><option value="auto" selected="true" data-astro-cid-lmznfliq=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;&nbsp;自动&nbsp;&nbsp;</font></font></option> </select>  </label>  </docs-theme-select>   <script data-astro-exec="">
	ThemeProvider.updatePickers('unknown');
</script>  </nav> </header>        <div id="image-lightbox" class="not-content" hidden="" data-astro-cid-kws7taxh=""> <div class="button-wrapper" data-astro-cid-kws7taxh=""> <div class="not-content" style="" data-astro-cid-pkzv2hgs=""> <button id="lightbox-close-button" title="关闭图片预览" data-astro-cid-pkzv2hgs="" class="not-content stvb-base stvb-pointer stvb-black stvb-medium stvb-secondary stvb-icon stvb-force-no-border">  <svg width="24" height="24" viewBox="0 0 18 18" data-astro-cid-kws7taxh="" data-icon="theme/cross-18">  <symbol id="ai:local:theme/cross-18"><g fill="none"><g clip-path="url(#a)"><path fill="currentColor" fill-rule="evenodd" d="M5.53 4.47 4.47 5.53 7.94 9l-3.47 3.47 1.06 1.06L9 10.06l3.47 3.47 1.06-1.06L10.06 9l3.47-3.47-1.06-1.06L9 7.94 5.53 4.47Z" clip-rule="evenodd"></path></g><defs><clipPath id="a"><path fill="#fff" d="M0 0h18v18H0z"></path></clipPath></defs></g></symbol><use xlink:href="#ai:local:theme/cross-18"></use>  </svg>  </button> </div>  </div> <img id="lightbox-image" src="" data-astro-cid-kws7taxh=""> </div>   <div id="page-container" data-astro-cid-xgirumru=""> <aside id="nav" class="" style="" data-astro-cid-sa57sq6l=""> <div class="sidebar-viewport" data-astro-cid-sa57sq6l=""> <div class="sidebar" data-astro-cid-sa57sq6l=""> <ul class="toc" aria-label="文档侧边栏" data-astro-cid-sa57sq6l=""> <li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/welcome" data-astro-cid-omxx3dey=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">欢迎使用 Pine Script™ v5</font></font></a></li><li class="item" data-astro-cid-omxx3dey=""><details data-astro-cid-omxx3dey=""><summary data-astro-cid-omxx3dey=""><div class="summary-link" data-astro-cid-omxx3dey=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">初识Pine Script™</font></font></div><div class="caret" data-astro-cid-omxx3dey=""><svg width="18" height="18" viewBox="0 0 24 24" class="icon" data-astro-cid-omxx3dey="" data-icon="theme/right-caret">  <symbol id="ai:local:theme/right-caret"><path fill="currentColor" d="m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z"></path></symbol><use xlink:href="#ai:local:theme/right-caret"></use>  </svg></div></summary><ul class="children" data-astro-cid-omxx3dey=""><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/primer/first-steps" data-astro-cid-omxx3dey=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第一步</font></font></a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/primer/first-indicator" data-astro-cid-omxx3dey=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第一个指标</font></font></a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/primer/next-steps" data-astro-cid-omxx3dey=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">下一步</font></font></a></li></ul></details></li><li class="item" data-astro-cid-omxx3dey=""><details data-astro-cid-omxx3dey=""><summary data-astro-cid-omxx3dey=""><div class="summary-link" data-astro-cid-omxx3dey=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">语言</font></font></div><div class="caret" data-astro-cid-omxx3dey=""><svg width="18" height="18" viewBox="0 0 24 24" class="icon" data-astro-cid-omxx3dey="" data-icon="theme/right-caret">  <use xlink:href="#ai:local:theme/right-caret"></use>  </svg></div></summary><ul class="children" data-astro-cid-omxx3dey=""><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/language/execution-model" data-astro-cid-omxx3dey=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">执行模型</font></font></a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/language/time-series" data-astro-cid-omxx3dey=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">时间序列</font></font></a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/language/script-structure" data-astro-cid-omxx3dey=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">脚本结构</font></font></a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/language/identifiers" data-astro-cid-omxx3dey=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">身份标识</font></font></a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/language/operators" data-astro-cid-omxx3dey=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">运算符</font></font></a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/language/variable-declarations" data-astro-cid-omxx3dey=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">变量声明</font></font></a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/language/conditional-structures" data-astro-cid-omxx3dey=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">条件结构</font></font></a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/language/loops" data-astro-cid-omxx3dey=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">循环</font></font></a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/language/type-system" data-astro-cid-omxx3dey=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">类型系统</font></font></a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/language/built-ins" data-astro-cid-omxx3dey=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">内置</font></font></a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/language/user-defined-functions" data-astro-cid-omxx3dey=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">用户定义函数</font></font></a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/language/objects" data-astro-cid-omxx3dey=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">对象</font></font></a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/language/enums" data-astro-cid-omxx3dey=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">枚举</font></font></a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/language/methods" data-astro-cid-omxx3dey=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">方法</font></font></a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/language/arrays" data-astro-cid-omxx3dey=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">数组</font></font></a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/language/matrices" data-astro-cid-omxx3dey=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">矩阵</font></font></a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/language/maps" data-astro-cid-omxx3dey=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">地图</font></font></a></li></ul></details></li><li class="item" data-astro-cid-omxx3dey=""><details data-astro-cid-omxx3dey=""><summary data-astro-cid-omxx3dey=""><div class="summary-link" data-astro-cid-omxx3dey=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">概念</font></font></div><div class="caret" data-astro-cid-omxx3dey=""><svg width="18" height="18" viewBox="0 0 24 24" class="icon" data-astro-cid-omxx3dey="" data-icon="theme/right-caret">  <use xlink:href="#ai:local:theme/right-caret"></use>  </svg></div></summary><ul class="children" data-astro-cid-omxx3dey=""><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/concepts/alerts" data-astro-cid-omxx3dey=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">警报</font></font></a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/concepts/backgrounds" data-astro-cid-omxx3dey=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">背景</font></font></a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/concepts/bar-coloring" data-astro-cid-omxx3dey=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">条形图色彩</font></font></a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/concepts/bar-plotting" data-astro-cid-omxx3dey=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">条形图</font></font></a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/concepts/bar-states" data-astro-cid-omxx3dey=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">条形图状态</font></font></a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/concepts/chart-information" data-astro-cid-omxx3dey=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图表信息</font></font></a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/concepts/colors" data-astro-cid-omxx3dey=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">颜色</font></font></a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/concepts/fills" data-astro-cid-omxx3dey=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">填充</font></font></a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/concepts/inputs" data-astro-cid-omxx3dey=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">输入</font></font></a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/concepts/levels" data-astro-cid-omxx3dey=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">级别</font></font></a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/concepts/libraries" data-astro-cid-omxx3dey=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">库</font></font></a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/concepts/lines-and-boxes" data-astro-cid-omxx3dey=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">线条和盒子</font></font></a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/concepts/non-standard-charts-data" data-astro-cid-omxx3dey=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">非标准图表数据</font></font></a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/concepts/other-timeframes-and-data" data-astro-cid-omxx3dey=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">其他时间范围和数据</font></font></a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/concepts/plots" data-astro-cid-omxx3dey=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图</font></font></a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/concepts/repainting" data-astro-cid-omxx3dey=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">重新粉刷</font></font></a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/concepts/sessions" data-astro-cid-omxx3dey=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">会议</font></font></a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/concepts/strategies" data-astro-cid-omxx3dey=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">策略</font></font></a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/concepts/tables" data-astro-cid-omxx3dey=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表格</font></font></a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/concepts/text-and-shapes" data-astro-cid-omxx3dey=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">文本和形状</font></font></a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/concepts/time" data-astro-cid-omxx3dey=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">时间</font></font></a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/concepts/timeframes" data-astro-cid-omxx3dey=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">时间范围</font></font></a></li></ul></details></li><li class="item" data-astro-cid-omxx3dey=""><details data-astro-cid-omxx3dey=""><summary data-astro-cid-omxx3dey=""><div class="summary-link" data-astro-cid-omxx3dey=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">编写脚本</font></font></div><div class="caret" data-astro-cid-omxx3dey=""><svg width="18" height="18" viewBox="0 0 24 24" class="icon" data-astro-cid-omxx3dey="" data-icon="theme/right-caret">  <use xlink:href="#ai:local:theme/right-caret"></use>  </svg></div></summary><ul class="children" data-astro-cid-omxx3dey=""><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/writing/style-guide" data-astro-cid-omxx3dey=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">风格指南</font></font></a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/writing/debugging" data-astro-cid-omxx3dey=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">调试</font></font></a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/writing/profiling-and-optimization" data-astro-cid-omxx3dey=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">分析和优化</font></font></a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/writing/publishing" data-astro-cid-omxx3dey=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">发布脚本</font></font></a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/writing/limitations" data-astro-cid-omxx3dey=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">限制</font></font></a></li></ul></details></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/faq" data-astro-cid-omxx3dey=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">常问问题</font></font></a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/error-messages" data-astro-cid-omxx3dey=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">错误消息</font></font></a></li><li class="item" data-current="" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/release-notes" data-astro-cid-omxx3dey=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">发行说明</font></font></a></li><li class="item" data-astro-cid-omxx3dey=""><details data-astro-cid-omxx3dey=""><summary data-astro-cid-omxx3dey=""><div class="summary-link" data-astro-cid-omxx3dey=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">迁移指南</font></font></div><div class="caret" data-astro-cid-omxx3dey=""><svg width="18" height="18" viewBox="0 0 24 24" class="icon" data-astro-cid-omxx3dey="" data-icon="theme/right-caret">  <use xlink:href="#ai:local:theme/right-caret"></use>  </svg></div></summary><ul class="children" data-astro-cid-omxx3dey=""><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/migration-guides/to-pine-version-5" data-astro-cid-omxx3dey=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">转至 Pine Script™ 版本 5</font></font></a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/migration-guides/to-pine-version-4" data-astro-cid-omxx3dey=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">转至 Pine Script™ 版本 4</font></font></a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/migration-guides/to-pine-version-3" data-astro-cid-omxx3dey=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">转至 Pine Script™ 版本 3</font></font></a></li></ul></details></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/where-can-i-get-more-information" data-astro-cid-omxx3dey=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在哪里可以获得更多信息？</font></font></a></li> </ul> <div class="toc-bottom" data-astro-cid-sa57sq6l=""></div> </div> </div> </aside>  <main class="main-pane" data-page-type="md" data-astro-cid-xgirumru=""> <a id="top" data-astro-cid-xgirumru=""></a> <main class="content" data-toc-shown="" data-astro-cid-ju3wuhkz="">  <div class="content-width" data-astro-cid-xgirumru=""> <div class="breadcrumbs" data-pagefind-ignore="" data-astro-cid-wlavna2o=""> <a href="/pine-script-docs" aria-label="返回文档主页。" data-astro-cid-wlavna2o=""> <span data-astro-cid-wlavna2o=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">用户手册</font></font></span>  </a>  <span class="divider" data-astro-cid-wlavna2o=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/</font></font></span> <span class="current-item" data-astro-cid-wlavna2o=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">发行说明</font></font></span> </div>     </div> <div id="slot-container" data-astro-cid-xgirumru="">  <h1 id="release-notes" class="md-heading"><a href="#release-notes"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">发行</font></font><span class="fancy-wrap"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">说明</font></font><span class="icon icon-link" aria-hidden="true"><svg width="28" height="28" viewBox="0 0 28 28"><g fill="currentColor" clip-path="url(#a)"><path d="M14.908 5.558a5.326 5.326 0 1 1 7.533 7.533l-3.236 3.236-1.061-1.061 3.236-3.236a3.826 3.826 0 1 0-5.411-5.411l-3.236 3.236-1.06-1.06 3.235-3.237ZM5.56 14.907a5.326 5.326 0 0 0 7.532 7.533l3.236-3.236-1.061-1.061-3.236 3.236a3.826 3.826 0 1 1-5.411-5.411l3.236-3.236-1.061-1.06-3.236 3.235Z"></path><path d="m16.346 10.592-5.753 5.753 1.061 1.06 5.753-5.752-1.06-1.06Z"></path></g><defs><clipPath id="a"><path fill="#fff" d="M0 0h28v28H0z"></path></clipPath></defs></svg></span></span></a></h1>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">本页包含发行说明，描述了 Pine Script™ 体验的显著变化。</font></font></p>
<h2 id="2024" class="md-heading"><a href="#2024"> <span class="fancy-wrap"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2024</font></font><span class="icon icon-link" aria-hidden="true"><svg width="28" height="28" viewBox="0 0 28 28"><g fill="currentColor" clip-path="url(#a)"><path d="M14.908 5.558a5.326 5.326 0 1 1 7.533 7.533l-3.236 3.236-1.061-1.061 3.236-3.236a3.826 3.826 0 1 0-5.411-5.411l-3.236 3.236-1.06-1.06 3.235-3.237ZM5.56 14.907a5.326 5.326 0 0 0 7.532 7.533l3.236-3.236-1.061-1.061-3.236 3.236a3.826 3.826 0 1 1-5.411-5.411l3.236-3.236-1.061-1.06-3.236 3.235Z"></path><path d="m16.346 10.592-5.753 5.753 1.061 1.06 5.753-5.752-1.06-1.06Z"></path></g><defs><clipPath id="a"><path fill="#fff" d="M0 0h28v28H0z"></path></clipPath></defs></svg></span></span></a></h2>
<h3 id="june-2024" class="md-heading"><a href="#june-2024"><font style="vertical-align: inherit;"><span class="fancy-wrap"><font style="vertical-align: inherit;">2024 年</font></span><font style="vertical-align: inherit;">6 月</font></font><span class="fancy-wrap"><font style="vertical-align: inherit;"></font><span class="icon icon-link" aria-hidden="true"><svg width="28" height="28" viewBox="0 0 28 28"><g fill="currentColor" clip-path="url(#a)"><path d="M14.908 5.558a5.326 5.326 0 1 1 7.533 7.533l-3.236 3.236-1.061-1.061 3.236-3.236a3.826 3.826 0 1 0-5.411-5.411l-3.236 3.236-1.06-1.06 3.235-3.237ZM5.56 14.907a5.326 5.326 0 0 0 7.532 7.533l3.236-3.236-1.061-1.061-3.236 3.236a3.826 3.826 0 1 1-5.411-5.411l3.236-3.236-1.061-1.06-3.236 3.235Z"></path><path d="m16.346 10.592-5.753 5.753 1.061 1.06 5.753-5.752-1.06-1.06Z"></path></g><defs><clipPath id="a"><path fill="#fff" d="M0 0h28v28H0z"></path></clipPath></defs></svg></span></span></a></h3>
<p><font style="vertical-align: inherit;"></font><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_box.new"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">我们为box.new()</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、</font></font><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_label.new"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">label.new()</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、</font></font><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_line.new"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">line.new()</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、</font></font><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_polyline.new"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">polyline.new()</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_table.new"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">table.new()</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">函数添加了新参数</font><font style="vertical-align: inherit;">：</font></font></p>
<ul>
<li><code dir="auto">force_overlay</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- 如果为 true，则绘图将显示在主图表窗格上，即使脚本占用单独的窗格也是如此。可选。默认值为 false。</font></font></li>
</ul>
<h4 id="pine-script-enums" class="md-heading"><a href="#pine-script-enums"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pine Script™</font></font><span class="fancy-wrap"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">枚举</font></font><span class="icon icon-link" aria-hidden="true"><svg width="28" height="28" viewBox="0 0 28 28"><g fill="currentColor" clip-path="url(#a)"><path d="M14.908 5.558a5.326 5.326 0 1 1 7.533 7.533l-3.236 3.236-1.061-1.061 3.236-3.236a3.826 3.826 0 1 0-5.411-5.411l-3.236 3.236-1.06-1.06 3.235-3.237ZM5.56 14.907a5.326 5.326 0 0 0 7.532 7.533l3.236-3.236-1.061-1.061-3.236 3.236a3.826 3.826 0 1 1-5.411-5.411l3.236-3.236-1.061-1.06-3.236 3.235Z"></path><path d="m16.346 10.592-5.753 5.753 1.061 1.06 5.753-5.752-1.06-1.06Z"></path></g><defs><clipPath id="a"><path fill="#fff" d="M0 0h28v28H0z"></path></clipPath></defs></svg></span></span></a></h4>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">枚举，也称为</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">枚举</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">枚举类型</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或</font></font><a href="/pine-script-docs/language/type-system#enum-types"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">枚举类型</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，是一种独特的数据类型，其所有可能的值均由程序员声明。它们可以帮助程序员更严格地控​​制变量、条件表达式和</font></font><a href="/pine-script-docs/language/type-system#collections"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">集合允许的值，并且它们可以使用新的</font></font></a><font style="vertical-align: inherit;"></font><a href="/pine-script-docs/concepts/inputs#enum-input"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">input.enum()</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">函数方便地创建下拉输入</font><font style="vertical-align: inherit;">。请参阅我们的用户手册的</font></font><a href="/pine-script-docs/language/enums"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">枚举</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">页面，了解有关这些新类型及其使用方法的更多信息。</font></font></p>
<h3 id="may-2024" class="md-heading"><a href="#may-2024"><font style="vertical-align: inherit;"><span class="fancy-wrap"><font style="vertical-align: inherit;">2024 年</font></span><font style="vertical-align: inherit;">5 月</font></font><span class="fancy-wrap"><font style="vertical-align: inherit;"></font><span class="icon icon-link" aria-hidden="true"><svg width="28" height="28" viewBox="0 0 28 28"><g fill="currentColor" clip-path="url(#a)"><path d="M14.908 5.558a5.326 5.326 0 1 1 7.533 7.533l-3.236 3.236-1.061-1.061 3.236-3.236a3.826 3.826 0 1 0-5.411-5.411l-3.236 3.236-1.06-1.06 3.235-3.237ZM5.56 14.907a5.326 5.326 0 0 0 7.532 7.533l3.236-3.236-1.061-1.061-3.236 3.236a3.826 3.826 0 1 1-5.411-5.411l3.236-3.236-1.061-1.06-3.236 3.235Z"></path><path d="m16.346 10.592-5.753 5.753 1.061 1.06 5.753-5.752-1.06-1.06Z"></path></g><defs><clipPath id="a"><path fill="#fff" d="M0 0h28v28H0z"></path></clipPath></defs></svg></span></span></a></h3>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">我们</font></font><code dir="auto">calc_bars_count</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在</font></font><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_indicator"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">indicator()</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、</font></font><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_strategy"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">strategy()</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、</font></font><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_request.security"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">request.security()</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、
 </font></font><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_request.security_lower_tf"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">request.security_lower_tf()</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_request.seed"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">request.seed()</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">函数中添加了一个可选参数，允许用户限制脚本或数据请求可执行的近期历史条形图数量。当脚本的</font></font><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_indicator"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">indicator()</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或</font></font><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_strategy"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">strategies()</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">声明语句包含</font></font><code dir="auto">calc_bars_count</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">参数时，其“设置/输入”选项卡将在“计算”部分包含“计算条形图”输入。所有这些函数中的默认值均为 0，表示脚本或请求在所有可用数据上执行。</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">命名空间</font></font><code dir="auto">strategy.*</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">具有几个新的内置变量：</font></font></p>
<ul>
<li><a href="https://www.tradingview.com/pine-script-reference/v5/#var_strategy.avg_trade"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">strategies.avg_trade</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - 返回每笔交易的平均盈利或亏损金额。计算方法为所有盈利和亏损的总和除以已平仓交易的数量。</font></font></li>
<li><a href="https://www.tradingview.com/pine-script-reference/v5/#var_strategy.avg_trade_percent"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">strategies.avg_trade_percent</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - 返回每笔交易的平均盈利或亏损百分比。计算方法为所有盈利和亏损百分比之和除以已平仓交易的数量。</font></font></li>
<li><a href="https://www.tradingview.com/pine-script-reference/v5/#var_strategy.avg_winning_trade"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">strategies.avg_winning_trade</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - 返回每笔获胜交易的平均盈利金额。计算方法为利润总额除以获胜交易次数。</font></font></li>
<li><a href="https://www.tradingview.com/pine-script-reference/v5/#var_strategy.avg_winning_trade_percent"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">strategies.avg_winning_trade_percent</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - 返回每笔获胜交易的平均百分比收益。计算方法为利润百分比总和除以获胜交易数量。</font></font></li>
<li><a href="https://www.tradingview.com/pine-script-reference/v5/#var_strategy.avg_losing_trade"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">strategies.avg_losing_trade</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - 返回每笔亏损交易的平均亏损金额。计算方法为亏损总额除以亏损交易次数。</font></font></li>
<li><a href="https://www.tradingview.com/pine-script-reference/v5/#var_strategy.avg_losing_trade_percent"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">strategies.avg_losing_trade_percent</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - 返回每笔亏损交易的平均亏损百分比。计算方法为亏损百分比总和除以亏损交易数量。</font></font></li>
</ul>
<h4 id="pine-profiler" class="md-heading"><a href="#pine-profiler"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">松木</font></font><span class="fancy-wrap"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">剖面仪</font></font><span class="icon icon-link" aria-hidden="true"><svg width="28" height="28" viewBox="0 0 28 28"><g fill="currentColor" clip-path="url(#a)"><path d="M14.908 5.558a5.326 5.326 0 1 1 7.533 7.533l-3.236 3.236-1.061-1.061 3.236-3.236a3.826 3.826 0 1 0-5.411-5.411l-3.236 3.236-1.06-1.06 3.235-3.237ZM5.56 14.907a5.326 5.326 0 0 0 7.532 7.533l3.236-3.236-1.061-1.061-3.236 3.236a3.826 3.826 0 1 1-5.411-5.411l3.236-3.236-1.061-1.06-3.236 3.235Z"></path><path d="m16.346 10.592-5.753 5.753 1.061 1.06 5.753-5.752-1.06-1.06Z"></path></g><defs><clipPath id="a"><path fill="#fff" d="M0 0h28v28H0z"></path></clipPath></defs></svg></span></span></a></h4>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">我们新推出的
</font></font><a href="/pine-script-docs/writing/profiling-and-optimization#pine-profiler"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pine Profiler</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是一款功能强大的实用程序，它可以分析脚本中所有重要代码的执行情况，并在</font><font style="vertical-align: inherit;">Pine Editor
</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">内的代码行旁边显示有用的性能信息。Profiler</font></font></em><font style="vertical-align: inherit;"></font><a href="/pine-script-docs/writing/profiling-and-optimization#pine-profiler"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">的</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">信息可以深入了解脚本的运行时间、重要代码区域中的运行时间分布以及每个代码区域的执行次数。有了这些见解，程序员可以有效地找出性能</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">瓶颈</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，并确保在需要缩短执行时间时</font><font style="vertical-align: inherit;">专注于
</font></font><a href="/pine-script-docs/writing/profiling-and-optimization#optimization"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">优化真正重要的代码。</font></font></a><font style="vertical-align: inherit;"></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">请参阅新的
</font></font><a href="/pine-script-docs/writing/profiling-and-optimization"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">分析和优化</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">页面，了解有关分析器的更多信息、它的工作原理以及如何使用它来分析脚本的性能并确定优化机会。</font></font></p>
<h4 id="pine-editor-improvements" class="md-heading"><a href="#pine-editor-improvements"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pine 编辑器</font></font><span class="fancy-wrap"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">改进</font></font><span class="icon icon-link" aria-hidden="true"><svg width="28" height="28" viewBox="0 0 28 28"><g fill="currentColor" clip-path="url(#a)"><path d="M14.908 5.558a5.326 5.326 0 1 1 7.533 7.533l-3.236 3.236-1.061-1.061 3.236-3.236a3.826 3.826 0 1 0-5.411-5.411l-3.236 3.236-1.06-1.06 3.235-3.237ZM5.56 14.907a5.326 5.326 0 0 0 7.532 7.533l3.236-3.236-1.061-1.061-3.236 3.236a3.826 3.826 0 1 1-5.411-5.411l3.236-3.236-1.061-1.06-3.236 3.235Z"></path><path d="m16.346 10.592-5.753 5.753 1.061 1.06 5.753-5.752-1.06-1.06Z"></path></g><defs><clipPath id="a"><path fill="#fff" d="M0 0h28v28H0z"></path></clipPath></defs></svg></span></span></a></h4>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">从带有图表的选项卡打开分离的 Pine 编辑器时，它现在直接链接到该选项卡，如右下角的“已链接”状态和绿色图标所示。链接后，“添加到图表”、“在图表上更新”和“应用于整个布局”按钮会影响主选项卡上的图表。</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">分离的 Pine 编辑器现在包含 Pine 控制台。</font></font></p>
<h3 id="april-2024" class="md-heading"><a href="#april-2024"><font style="vertical-align: inherit;"><span class="fancy-wrap"><font style="vertical-align: inherit;">2024 年</font></span><font style="vertical-align: inherit;">4 月</font></font><span class="fancy-wrap"><font style="vertical-align: inherit;"></font><span class="icon icon-link" aria-hidden="true"><svg width="28" height="28" viewBox="0 0 28 28"><g fill="currentColor" clip-path="url(#a)"><path d="M14.908 5.558a5.326 5.326 0 1 1 7.533 7.533l-3.236 3.236-1.061-1.061 3.236-3.236a3.826 3.826 0 1 0-5.411-5.411l-3.236 3.236-1.06-1.06 3.235-3.237ZM5.56 14.907a5.326 5.326 0 0 0 7.532 7.533l3.236-3.236-1.061-1.061-3.236 3.236a3.826 3.826 0 1 1-5.411-5.411l3.236-3.236-1.061-1.06-3.236 3.235Z"></path><path d="m16.346 10.592-5.753 5.753 1.061 1.06 5.753-5.752-1.06-1.06Z"></path></g><defs><clipPath id="a"><path fill="#fff" d="M0 0h28v28H0z"></path></clipPath></defs></svg></span></span></a></h3>
<p><font style="vertical-align: inherit;"></font><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_plot"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">我们为plot()</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、
 </font></font><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_plotchar"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">plotchar()</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、
 </font></font><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_plotcandle"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">plotcandle()</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、
 </font></font><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_plotbar"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">plotbar()</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、
 </font></font><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_plotarrow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">plotarrow()</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、
 </font></font><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_plotshape"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">plotshape()</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
</font></font><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_bgcolor"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">bgcolor()</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
函数</font><font style="vertical-align: inherit;">添加了新参数
：</font></font></p>
<ul>
<li><code dir="auto">force_overlay</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- 如果为真，即使脚本占据单独的窗格，输出也会显示在主图表窗格上。</font></font></li>
</ul>
<h3 id="march-2024" class="md-heading"><a href="#march-2024"><font style="vertical-align: inherit;"><span class="fancy-wrap"><font style="vertical-align: inherit;">2024 年</font></span><font style="vertical-align: inherit;">3 月</font></font><span class="fancy-wrap"><font style="vertical-align: inherit;"></font><span class="icon icon-link" aria-hidden="true"><svg width="28" height="28" viewBox="0 0 28 28"><g fill="currentColor" clip-path="url(#a)"><path d="M14.908 5.558a5.326 5.326 0 1 1 7.533 7.533l-3.236 3.236-1.061-1.061 3.236-3.236a3.826 3.826 0 1 0-5.411-5.411l-3.236 3.236-1.06-1.06 3.235-3.237ZM5.56 14.907a5.326 5.326 0 0 0 7.532 7.533l3.236-3.236-1.061-1.061-3.236 3.236a3.826 3.826 0 1 1-5.411-5.411l3.236-3.236-1.061-1.06-3.236 3.235Z"></path><path d="m16.346 10.592-5.753 5.753 1.061 1.06 5.753-5.752-1.06-1.06Z"></path></g><defs><clipPath id="a"><path fill="#fff" d="M0 0h28v28H0z"></path></clipPath></defs></svg></span></span></a></h3>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">命名空间</font></font><code dir="auto">syminfo.*</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">具有一个新的内置变量：</font></font></p>
<ul>
<li><a href="https://www.tradingview.com/pine-script-reference/v5/#var_syminfo.expiration_date"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">syminfo.expiration_date</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - 对于非连续期货符号，返回代表当前合约最后一天开始的 UNIX 时间戳。</font></font></li>
</ul>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">time
 </font></font><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_time"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">()</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
和
</font></font><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_time_close"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">time_close()</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
函数有一个新参数：</font></font></p>
<ul>
<li><code dir="auto">bars_back</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- 如果指定，该函数将计算相对于其时间范围内当前条形图的 N 条形图的时间戳。如果参数为负值，它还可以计算最多 500 条形图之后的未来条形图的预期时间。可选。默认值为 0。</font></font></li>
</ul>
<h3 id="february-2024" class="md-heading"><a href="#february-2024"><font style="vertical-align: inherit;"><span class="fancy-wrap"><font style="vertical-align: inherit;">2024 年</font></span><font style="vertical-align: inherit;">2 月</font></font><span class="fancy-wrap"><font style="vertical-align: inherit;"></font><span class="icon icon-link" aria-hidden="true"><svg width="28" height="28" viewBox="0 0 28 28"><g fill="currentColor" clip-path="url(#a)"><path d="M14.908 5.558a5.326 5.326 0 1 1 7.533 7.533l-3.236 3.236-1.061-1.061 3.236-3.236a3.826 3.826 0 1 0-5.411-5.411l-3.236 3.236-1.06-1.06 3.235-3.237ZM5.56 14.907a5.326 5.326 0 0 0 7.532 7.533l3.236-3.236-1.061-1.061-3.236 3.236a3.826 3.826 0 1 1-5.411-5.411l3.236-3.236-1.061-1.06-3.236 3.235Z"></path><path d="m16.346 10.592-5.753 5.753 1.061 1.06 5.753-5.752-1.06-1.06Z"></path></g><defs><clipPath id="a"><path fill="#fff" d="M0 0h28v28H0z"></path></clipPath></defs></svg></span></span></a></h3>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">我们添加了两个用于处理字符串的新函数：</font></font></p>
<ul>
<li><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_str.repeat"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">str.repeat()</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - 构造一个新字符串，其中包含重复指定次数的源字符串，并在每个重复实例之间插入分隔符。</font></font></li>
<li><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_str.trim"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">str.trim()</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - 构造一个新字符串，其中从源字符串左侧和右侧删除所有连续的空格和其他控制字符。</font></font></li>
</ul>
<p><font style="vertical-align: inherit;"></font><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_request.financial"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">request.financial()</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">函数
</font><font style="vertical-align: inherit;">
现在接受“D”作为</font></font><code dir="auto">period</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">参数，允许脚本请求可用的每日财务数据。</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例如：</font></font></p>
<div class="pine-colorizer not-content colorized" data-id="6rg"><div class="pine-colorizer__header"><a class="pine-colorizer__title" href="https://tradingview.com/pine-script-docs/en/v5/Introduction.html" target="_blank" rel="noopener"><span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pine Script™</font></font></span></a><button class="pine-colorizer__copy-btn"><div class="pine-colorizer__tooltip"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">已复制</font></font></div></button></div><code class="monaco-editor-tv-pine-light"><span><span class="mtk9">//</span><span class="mtk9 mtkb">@version=</span><span class="mtk9">5</span></span><br><span><span class="mtk16">indicator</span><span class="mtk13">(</span><span class="mtk29">"Daily&nbsp;financial&nbsp;data&nbsp;demo"</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;The&nbsp;daily&nbsp;Premium/Discount&nbsp;to&nbsp;Net&nbsp;Asset&nbsp;Value&nbsp;for</span><span class="mtk9">&nbsp;"AMEX:SPY"</span></span><br><span><span class="mtk18 mtkb">float</span><span class="mtk1">&nbsp;</span><span class="mtk33">f1</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">request.financial</span><span class="mtk13">(</span><span class="mtk29">"AMEX:SPY"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"NAV"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"D"</span><span class="mtk13">)</span></span><br><span><span class="mtk16">plot</span><span class="mtk13">(</span><span class="mtk33">f1</span><span class="mtk13">)</span></span><br></code></div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">命名空间</font></font><code dir="auto">strategy.*</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">具有一个新变量，用于监控策略模拟中的可用资本：</font></font></p>
<ul>
<li><a href="https://www.tradingview.com/pine-script-reference/v5/#var_strategy.opentrades.capital_held"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">strategies.opentrades.capital_held</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - 返回当前未平仓交易持有的资本金额。</font></font></li>
</ul>
<h3 id="january-2024" class="md-heading"><a href="#january-2024"><font style="vertical-align: inherit;"><span class="fancy-wrap"><font style="vertical-align: inherit;">2024 年</font></span><font style="vertical-align: inherit;">1 月</font></font><span class="fancy-wrap"><font style="vertical-align: inherit;"></font><span class="icon icon-link" aria-hidden="true"><svg width="28" height="28" viewBox="0 0 28 28"><g fill="currentColor" clip-path="url(#a)"><path d="M14.908 5.558a5.326 5.326 0 1 1 7.533 7.533l-3.236 3.236-1.061-1.061 3.236-3.236a3.826 3.826 0 1 0-5.411-5.411l-3.236 3.236-1.06-1.06 3.235-3.237ZM5.56 14.907a5.326 5.326 0 0 0 7.532 7.533l3.236-3.236-1.061-1.061-3.236 3.236a3.826 3.826 0 1 1-5.411-5.411l3.236-3.236-1.061-1.06-3.236 3.235Z"></path><path d="m16.346 10.592-5.753 5.753 1.061 1.06 5.753-5.752-1.06-1.06Z"></path></g><defs><clipPath id="a"><path fill="#fff" d="M0 0h28v28H0z"></path></clipPath></defs></svg></span></span></a></h3>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">命名空间</font></font><code dir="auto">syminfo.*</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">具有新的内置变量：</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Syminfo：</font></font></p>
<ul>
<li><a href="https://www.tradingview.com/pine-script-reference/v5/#var_syminfo.employees"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">syminfo.employees</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - 公司拥有的员工人数。</font></font></li>
<li><a href="https://www.tradingview.com/pine-script-reference/v5/#var_syminfo.shareholders"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">syminfo.shareholders</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - 公司拥有的股东数量。</font></font></li>
<li><a href="https://www.tradingview.com/pine-script-reference/v5/#var_syminfo.shares_outstanding_float"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">syminfo.shares_outstanding_float</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - 一家公司现有的流通股总数，不包括任何限制性股票。</font></font></li>
<li><a href="https://www.tradingview.com/pine-script-reference/v5/#var_syminfo.shares_outstanding_total"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">syminfo.shares_outstanding_total</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - 一家公司现有的流通股总数，包括内部人士、大股东和员工持有的限制性股份。</font></font></li>
</ul>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">目标价：</font></font></p>
<ul>
<li><a href="https://www.tradingview.com/pine-script-reference/v5/#var_syminfo.target_price_average"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">syminfo.target_price_average</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - 分析师预测的该符号的过去一年价格目标的平均值。</font></font></li>
<li><a href="https://www.tradingview.com/pine-script-reference/v5/#var_syminfo.target_price_date"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">syminfo.target_price_date</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - 当前符号的最后一个价格目标预测的开始日期。</font></font></li>
<li><a href="https://www.tradingview.com/pine-script-reference/v5/#var_syminfo.target_price_estimates"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">syminfo.target_price_estimates</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - 当前符号的最新价格目标预测总数。</font></font></li>
<li><a href="https://www.tradingview.com/pine-script-reference/v5/#var_syminfo.target_price_high"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">syminfo.target_price_high</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - 分析师预测的该符号的最近最高年度目标价格。</font></font></li>
<li><a href="https://www.tradingview.com/pine-script-reference/v5/#var_syminfo.target_price_low"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">syminfo.target_price_low</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - 分析师预测的该符号的最新最低年度目标价格。</font></font></li>
<li><a href="https://www.tradingview.com/pine-script-reference/v5/#var_syminfo.target_price_median"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">syminfo.target_price_median</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - 分析师预测的该符号的过去一年价格目标的中值。</font></font></li>
</ul>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">建议：</font></font></p>
<ul>
<li><a href="https://www.tradingview.com/pine-script-reference/v5/#var_syminfo.recommendations_buy"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">syminfo.recommendations_buy</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - 给予当前符号“买入”评级的分析师数量。</font></font></li>
<li><a href="https://www.tradingview.com/pine-script-reference/v5/#var_syminfo.recommendations_buy_strong"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">syminfo.recommendations_buy_strong</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - 给予当前符号“强力买入”评级的分析师数量。</font></font></li>
<li><a href="https://www.tradingview.com/pine-script-reference/v5/#var_syminfo.recommendations_date"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">syminfo.recommendations_date</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - 当前符号的最后一组建议的开始日期。</font></font></li>
<li><a href="https://www.tradingview.com/pine-script-reference/v5/#var_syminfo.recommendations_hold"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">syminfo.recommendations_hold</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - 给予当前符号“持有”评级的分析师数量。</font></font></li>
<li><a href="https://www.tradingview.com/pine-script-reference/v5/#var_syminfo.recommendations_total"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">syminfo.recommendations_total</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - 当前符号的总建议数。</font></font></li>
<li><a href="https://www.tradingview.com/pine-script-reference/v5/#var_syminfo.recommendations_sell"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ssyminfo.recommendations_sell</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - 给予当前代码“卖出”评级的分析师数量。</font></font></li>
<li><a href="https://www.tradingview.com/pine-script-reference/v5/#var_syminfo.recommendations_sell_strong"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">syminfo.recommendations_sell_strong</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - 给予当前符号“强力卖出”评级的分析师数量。</font></font></li>
</ul>
<h2 id="2023" class="md-heading"><a href="#2023"> <span class="fancy-wrap"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2023</font></font><span class="icon icon-link" aria-hidden="true"><svg width="28" height="28" viewBox="0 0 28 28"><g fill="currentColor" clip-path="url(#a)"><path d="M14.908 5.558a5.326 5.326 0 1 1 7.533 7.533l-3.236 3.236-1.061-1.061 3.236-3.236a3.826 3.826 0 1 0-5.411-5.411l-3.236 3.236-1.06-1.06 3.235-3.237ZM5.56 14.907a5.326 5.326 0 0 0 7.532 7.533l3.236-3.236-1.061-1.061-3.236 3.236a3.826 3.826 0 1 1-5.411-5.411l3.236-3.236-1.061-1.06-3.236 3.235Z"></path><path d="m16.346 10.592-5.753 5.753 1.061 1.06 5.753-5.752-1.06-1.06Z"></path></g><defs><clipPath id="a"><path fill="#fff" d="M0 0h28v28H0z"></path></clipPath></defs></svg></span></span></a></h2>
<h3 id="december-2023" class="md-heading"><a href="#december-2023"><font style="vertical-align: inherit;"><span class="fancy-wrap"><font style="vertical-align: inherit;">2023 年</font></span><font style="vertical-align: inherit;">12 月</font></font><span class="fancy-wrap"><font style="vertical-align: inherit;"></font><span class="icon icon-link" aria-hidden="true"><svg width="28" height="28" viewBox="0 0 28 28"><g fill="currentColor" clip-path="url(#a)"><path d="M14.908 5.558a5.326 5.326 0 1 1 7.533 7.533l-3.236 3.236-1.061-1.061 3.236-3.236a3.826 3.826 0 1 0-5.411-5.411l-3.236 3.236-1.06-1.06 3.235-3.237ZM5.56 14.907a5.326 5.326 0 0 0 7.532 7.533l3.236-3.236-1.061-1.061-3.236 3.236a3.826 3.826 0 1 1-5.411-5.411l3.236-3.236-1.061-1.06-3.236 3.235Z"></path><path d="m16.346 10.592-5.753 5.753 1.061 1.06 5.753-5.752-1.06-1.06Z"></path></g><defs><clipPath id="a"><path fill="#fff" d="M0 0h28v28H0z"></path></clipPath></defs></svg></span></span></a></h3>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">我们在所有函数中添加了</font></font><code dir="auto">format</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><code dir="auto">precision</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">参数</font></font><code dir="auto">plot*()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
，允许指标和策略选择性地将格式和小数精度设置应用于图表窗格 y 轴、脚本状态行和数据窗口中的绘制结果。传递给这些参数的参数取代了
</font></font><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_indicator"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">indicator()</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
和
</font></font><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_strategy"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">strategies()</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
函数中的值。两者都是可选的。这些参数的默认值与脚本声明语句中指定的值相同。</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例如：</font></font></p>
<div class="pine-colorizer not-content colorized" data-id="o2"><div class="pine-colorizer__header"><a class="pine-colorizer__title" href="https://tradingview.com/pine-script-docs/en/v5/Introduction.html" target="_blank" rel="noopener"><span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pine Script™</font></font></span></a><button class="pine-colorizer__copy-btn"><div class="pine-colorizer__tooltip"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">已复制</font></font></div></button></div><code class="monaco-editor-tv-pine-light"><span><span class="mtk9">//</span><span class="mtk9 mtkb">@version=</span><span class="mtk9">5</span></span><br><span><span class="mtk16">indicator</span><span class="mtk13">(</span><span class="mtk29">"My&nbsp;script"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">format</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk11">format.percent</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">precision</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk12">4</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk16">plot</span><span class="mtk13">(</span><span class="mtk11">close</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">format</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk11">format.price</span><span class="mtk13">)</span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk9">//&nbsp;Price&nbsp;format&nbsp;with&nbsp;4-digit&nbsp;precision.</span></span><br><span><span class="mtk16">plot</span><span class="mtk13">(</span><span class="mtk12">100</span><span class="mtk1">&nbsp;</span><span class="mtk18">*</span><span class="mtk1">&nbsp;</span><span class="mtk11">bar_index</span><span class="mtk1">&nbsp;</span><span class="mtk18">/</span><span class="mtk1">&nbsp;</span><span class="mtk11">close</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">precision</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk12">2</span><span class="mtk13">)</span><span class="mtk1">&nbsp;</span><span class="mtk9">//&nbsp;Percent&nbsp;format&nbsp;with&nbsp;2-digit&nbsp;precision.&nbsp;</span></span><br></code></div>
<h3 id="november-2023" class="md-heading"><a href="#november-2023"><font style="vertical-align: inherit;"><span class="fancy-wrap"><font style="vertical-align: inherit;">2023 年</font></span><font style="vertical-align: inherit;">11 月</font></font><span class="fancy-wrap"><font style="vertical-align: inherit;"></font><span class="icon icon-link" aria-hidden="true"><svg width="28" height="28" viewBox="0 0 28 28"><g fill="currentColor" clip-path="url(#a)"><path d="M14.908 5.558a5.326 5.326 0 1 1 7.533 7.533l-3.236 3.236-1.061-1.061 3.236-3.236a3.826 3.826 0 1 0-5.411-5.411l-3.236 3.236-1.06-1.06 3.235-3.237ZM5.56 14.907a5.326 5.326 0 0 0 7.532 7.533l3.236-3.236-1.061-1.061-3.236 3.236a3.826 3.826 0 1 1-5.411-5.411l3.236-3.236-1.061-1.06-3.236 3.235Z"></path><path d="m16.346 10.592-5.753 5.753 1.061 1.06 5.753-5.752-1.06-1.06Z"></path></g><defs><clipPath id="a"><path fill="#fff" d="M0 0h28v28H0z"></path></clipPath></defs></svg></span></span></a></h3>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">我们已将以下变量和函数添加到</font></font><code dir="auto">strategy.*</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
命名空间：</font></font></p>
<ul>
<li><a href="https://www.tradingview.com/pine-script-reference/v5/#var_strategy.grossloss_percent"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">strategies.grossloss_percent</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - 所有已完成亏损交易的总毛损失价值，以初始资本的百分比表示。</font></font></li>
<li><a href="https://www.tradingview.com/pine-script-reference/v5/#var_strategy.grossprofit_percent"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">strategies.grossprofit_percent</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - 所有已完成获胜交易的总毛利值，以初始资本的百分比表示。</font></font></li>
<li><a href="https://www.tradingview.com/pine-script-reference/v5/#var_strategy.max_runup_percent"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">strategies.max_runup_percent</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - 股权曲线从谷底的最大上涨幅度，以谷底值的百分比表示。</font></font></li>
<li><a href="https://www.tradingview.com/pine-script-reference/v5/#var_strategy.max_drawdown_percent"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">strategies.max_drawdown_percent</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - 股权曲线峰值的最大跌幅，以峰值的百分比表示。</font></font></li>
<li><a href="https://www.tradingview.com/pine-script-reference/v5/#var_strategy.netprofit_percent"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">strategies.netprofit_percent</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - 所有已完成交易的总价值，以初始资本的百分比表示。</font></font></li>
<li><a href="https://www.tradingview.com/pine-script-reference/v5/#var_strategy.openprofit_percent"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">strategies.openprofit_percent</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - 所有未平仓头寸的当前未实现盈利或亏损，以已实现权益的百分比表示。</font></font></li>
<li><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_strategy.closedtrades.max_drawdown_percent"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">strategies.closedtrades.max_drawdown_percent()</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - 返回已平仓交易的最大亏损，即交易期间可能的最大损失，以百分比表示。</font></font></li>
<li><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_strategy.closedtrades.max_runup_percent"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">strategies.closedtrades.max_runup_percent()</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - 返回已平仓交易的最大涨幅，即交易期间可能的最大利润，以百分比表示。</font></font></li>
<li><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_strategy.closedtrades.profit_percent"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">strategies.closedtrades.profit_percent()</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - 返回已平仓交易的盈利/亏损值，以百分比表示。亏损以负值表示。</font></font></li>
<li><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_strategy.opentrades.max_drawdown_percent"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">strategies.opentrades.max_drawdown_percent()</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - 返回未平仓交易的最大亏损，即交易期间可能的最大损失，以百分比表示。</font></font></li>
<li><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_strategy.opentrades.max_runup_percent"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">strategies.opentrades.max_runup_percent()</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - 返回开仓交易的最大涨幅，即交易期间可能获得的最大利润，以百分比表示。</font></font></li>
<li><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_strategy.opentrades.profit_percent"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">strategies.opentrades.profit_percent()</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - 返回未平仓交易的利润/亏损，以百分比表示。亏损以负值表示。</font></font></li>
</ul>
<h3 id="october-2023" class="md-heading"><a href="#october-2023"><font style="vertical-align: inherit;"><span class="fancy-wrap"><font style="vertical-align: inherit;">2023 年</font></span><font style="vertical-align: inherit;">10 月</font></font><span class="fancy-wrap"><font style="vertical-align: inherit;"></font><span class="icon icon-link" aria-hidden="true"><svg width="28" height="28" viewBox="0 0 28 28"><g fill="currentColor" clip-path="url(#a)"><path d="M14.908 5.558a5.326 5.326 0 1 1 7.533 7.533l-3.236 3.236-1.061-1.061 3.236-3.236a3.826 3.826 0 1 0-5.411-5.411l-3.236 3.236-1.06-1.06 3.235-3.237ZM5.56 14.907a5.326 5.326 0 0 0 7.532 7.533l3.236-3.236-1.061-1.061-3.236 3.236a3.826 3.826 0 1 1-5.411-5.411l3.236-3.236-1.061-1.06-3.236 3.235Z"></path><path d="m16.346 10.592-5.753 5.753 1.061 1.06 5.753-5.752-1.06-1.06Z"></path></g><defs><clipPath id="a"><path fill="#fff" d="M0 0h28v28H0z"></path></clipPath></defs></svg></span></span></a></h3>
<h4 id="pine-script-polylines" class="md-heading"><a href="#pine-script-polylines"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pine Script™</font></font><span class="fancy-wrap"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">折线</font></font><span class="icon icon-link" aria-hidden="true"><svg width="28" height="28" viewBox="0 0 28 28"><g fill="currentColor" clip-path="url(#a)"><path d="M14.908 5.558a5.326 5.326 0 1 1 7.533 7.533l-3.236 3.236-1.061-1.061 3.236-3.236a3.826 3.826 0 1 0-5.411-5.411l-3.236 3.236-1.06-1.06 3.235-3.237ZM5.56 14.907a5.326 5.326 0 0 0 7.532 7.533l3.236-3.236-1.061-1.061-3.236 3.236a3.826 3.826 0 1 1-5.411-5.411l3.236-3.236-1.061-1.06-3.236 3.235Z"></path><path d="m16.346 10.592-5.753 5.753 1.061 1.06 5.753-5.752-1.06-1.06Z"></path></g><defs><clipPath id="a"><path fill="#fff" d="M0 0h28v28H0z"></path></clipPath></defs></svg></span></span></a></h4>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">折线是一种使用直线或</font><em><font style="vertical-align: inherit;">曲线</font></em><font style="vertical-align: inherit;">段按顺序连接
最多 10,000 个
</font><a href="/pine-script-docs/language/type-system#chart-points"><font style="vertical-align: inherit;">图表点的</font></a></font><a href="https://www.tradingview.com/pine-script-reference/v5/#type_array"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">坐标</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">的绘图
，允许脚本绘制使用</font><a href="https://www.tradingview.com/pine-script-reference/v5/#type_line"><font style="vertical-align: inherit;">线</font></a><font style="vertical-align: inherit;">
或</font><a href="https://www.tradingview.com/pine-script-reference/v5/#type_box"><font style="vertical-align: inherit;">框</font></a><font style="vertical-align: inherit;">对象难以或无法实现的自定义形状
</font><font style="vertical-align: inherit;">
。要了解有关这种新绘图类型的更多信息，请参阅
我们用户手册</font><a href="/pine-script-docs/concepts/lines-and-boxes"><font style="vertical-align: inherit;">中线和框</font></a><font style="vertical-align: inherit;">
页面的
</font><a href="/pine-script-docs/concepts/lines-and-boxes#polylines"><font style="vertical-align: inherit;">折线</font></a><font style="vertical-align: inherit;">部分。</font></font><a href="/pine-script-docs/language/type-system#chart-points"><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"></font><em><font style="vertical-align: inherit;"></font></em><font style="vertical-align: inherit;"></font><a href="https://www.tradingview.com/pine-script-reference/v5/#type_line"><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"></font><a href="https://www.tradingview.com/pine-script-reference/v5/#type_box"><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"></font><a href="/pine-script-docs/concepts/lines-and-boxes#polylines"><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"></font><a href="/pine-script-docs/concepts/lines-and-boxes"><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"></font></p>
<h3 id="september-2023" class="md-heading"><a href="#september-2023"><font style="vertical-align: inherit;"><span class="fancy-wrap"><font style="vertical-align: inherit;">2023 年</font></span><font style="vertical-align: inherit;">9 月</font></font><span class="fancy-wrap"><font style="vertical-align: inherit;"></font><span class="icon icon-link" aria-hidden="true"><svg width="28" height="28" viewBox="0 0 28 28"><g fill="currentColor" clip-path="url(#a)"><path d="M14.908 5.558a5.326 5.326 0 1 1 7.533 7.533l-3.236 3.236-1.061-1.061 3.236-3.236a3.826 3.826 0 1 0-5.411-5.411l-3.236 3.236-1.06-1.06 3.235-3.237ZM5.56 14.907a5.326 5.326 0 0 0 7.532 7.533l3.236-3.236-1.061-1.061-3.236 3.236a3.826 3.826 0 1 1-5.411-5.411l3.236-3.236-1.061-1.06-3.236 3.235Z"></path><path d="m16.346 10.592-5.753 5.753 1.061 1.06 5.753-5.752-1.06-1.06Z"></path></g><defs><clipPath id="a"><path fill="#fff" d="M0 0h28v28H0z"></path></clipPath></defs></svg></span></span></a></h3>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">添加了新功能：</font></font></p>
<ul>
<li><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_strategy.default_entry_qty"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">strategies.default_entry_qty()</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> -
如果要以指定值填写，则计算来自</font></font><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_strategy.entry"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">strategy.entry()</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
或
</font></font><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_strategy.order"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">strategy.order()</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">的入场订单的默认数量（以单位为单位）
 </font></font><code dir="auto">fill_price</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></li>
<li><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_chart.point.new"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">chart.point.new()</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> -
</font><font style="vertical-align: inherit;">
使用指定的</font><font style="vertical-align: inherit;">、</font><font style="vertical-align: inherit;">和创建一个新的</font></font><a href="https://www.tradingview.com/pine-script-reference/v5/#type_chart.point"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">chart.point</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">对象。</font></font><code dir="auto">time</code><font style="vertical-align: inherit;"></font><code dir="auto">index</code><font style="vertical-align: inherit;"></font><code dir="auto">price</code><font style="vertical-align: inherit;"></font></li>
<li><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_request%7Bdot%7Dseed"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">request.seed()</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - 从用户维护的 GitHub 存储库请求数据并将其作为系列返回。有关如何添加新数据的深入教程可</font></font><a href="https://github.com/tradingview-pine-seeds/docs" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在此处</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">找到。</font></font></li>
<li><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_ticker%7Bdot%7Dinherit"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ticker.inherit()</font></font></a><font style="vertical-align: inherit;"></font><code dir="auto">symbol</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - 使用从传递到函数调用中的</font><font style="vertical-align: inherit;">股票代码 ID 继承的附加参数为指定的股票代码 ID，允许脚本使用相同的修饰符请求符号的数据</font></font><code dir="auto">from_tickerid</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，包括延长会话、股息调整、货币转换、非标准图表类型、回溯调整、收盘结算等。</font></font></li>
<li><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_timeframe.from_seconds"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">timeframe.from_seconds()</font></font></a><font style="vertical-align: inherit;"></font><code dir="auto">seconds</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> -根据我们的</font></font><a href="/pine-script-docs/concepts/timeframes#timeframe-string-specifications"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">时间范围规范格式</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">将指定数字转换为有效的时间范围字符串</font><font style="vertical-align: inherit;">。</font></font></li>
</ul>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">命名空间</font></font><code dir="auto">dividends.*</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">现在包含用于检索未来股息信息的变量：</font></font></p>
<ul>
<li><a href="https://www.tradingview.com/pine-script-reference/v5/#var_dividends.future_amount"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">divided</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> into two categories: </font></font><code dir="auto">na</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">...</font></font></li>
<li><a href="https://www.tradingview.com/pine-script-reference/v5/#var_dividends.future_ex_date"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">divided</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> into two categories: </font></font><code dir="auto">na</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">...</font></font></li>
<li><a href="https://www.tradingview.com/pine-script-reference/v5/#var_dividends.future_pay_date"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">divided</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> into two categories: </font></font><code dir="auto">na</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">...</font></font></li>
</ul>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">request.security_lower_tf
 </font></font><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_request.security_lower_tf"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">()</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
函数有一个新的参数：</font></font></p>
<ul>
<li><code dir="auto">ignore_invalid_timeframe</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- 确定当图表的时间范围小于</font></font><code dir="auto">timeframe</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">函数调用中的值时函数的行为方式。如果</font></font><code dir="auto">false</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，函数将引发运行时错误并停止脚本的执行。如果</font></font><code dir="auto">true</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，函数将返回</font></font><code dir="auto">na</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">而不会引发错误。</font></font></li>
</ul>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">用户现在可以使用</font></font><code dir="auto">const</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、</font></font><code dir="auto">simple</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><code dir="auto">series</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">类型限定符显式声明变量，从而可以更精确地控制脚本中的变量类型。例如：</font></font></p>
<div class="pine-colorizer not-content colorized" data-id="3jd"><div class="pine-colorizer__header"><a class="pine-colorizer__title" href="https://tradingview.com/pine-script-docs/en/v5/Introduction.html" target="_blank" rel="noopener"><span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pine Script™</font></font></span></a><button class="pine-colorizer__copy-btn"><div class="pine-colorizer__tooltip"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">已复制</font></font></div></button></div><code class="monaco-editor-tv-pine-light"><span><span class="mtk9">//</span><span class="mtk9 mtkb">@version=</span><span class="mtk9">5</span></span><br><span><span class="mtk16">indicator</span><span class="mtk13">(</span><span class="mtk29">"My&nbsp;script"</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;A&nbsp;constant&nbsp;`string`&nbsp;used&nbsp;as&nbsp;the&nbsp;`title`&nbsp;in&nbsp;the&nbsp;`p</span><span class="mtk9">lot()`&nbsp;function.</span></span><br><span><span class="mtk18 mtkb">const</span><span class="mtk1">&nbsp;</span><span class="mtk18 mtkb">string</span><span class="mtk1">&nbsp;</span><span class="mtk33">plotTitle</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk29">"My&nbsp;plot"</span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;An&nbsp;`int`&nbsp;variable&nbsp;whose&nbsp;value&nbsp;is&nbsp;consistent&nbsp;after</span><span class="mtk9">&nbsp;the&nbsp;first&nbsp;chart&nbsp;bar.</span></span><br><span><span class="mtk18 mtkb">simple</span><span class="mtk1">&nbsp;</span><span class="mtk18 mtkb">int</span><span class="mtk1">&nbsp;</span><span class="mtk33">a</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk12">10</span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;An&nbsp;`int`&nbsp;variable&nbsp;whose&nbsp;value&nbsp;can&nbsp;change&nbsp;on&nbsp;every</span><span class="mtk9">&nbsp;bar.</span></span><br><span><span class="mtk18 mtkb">series</span><span class="mtk1">&nbsp;</span><span class="mtk18 mtkb">int</span><span class="mtk1">&nbsp;</span><span class="mtk33">b</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk11">bar_index</span></span><br><span><span></span></span><br><span><span class="mtk16">plot</span><span class="mtk13">(</span><span class="mtk33">b</span><span class="mtk1">&nbsp;</span><span class="mtk18">%</span><span class="mtk1">&nbsp;</span><span class="mtk33">a</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">title</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk33">plotTitle</span><span class="mtk13">)</span></span><br></code></div>
<h3 id="august-2023" class="md-heading"><a href="#august-2023"><font style="vertical-align: inherit;"><span class="fancy-wrap"><font style="vertical-align: inherit;">2023 年</font></span><font style="vertical-align: inherit;">8 月</font></font><span class="fancy-wrap"><font style="vertical-align: inherit;"></font><span class="icon icon-link" aria-hidden="true"><svg width="28" height="28" viewBox="0 0 28 28"><g fill="currentColor" clip-path="url(#a)"><path d="M14.908 5.558a5.326 5.326 0 1 1 7.533 7.533l-3.236 3.236-1.061-1.061 3.236-3.236a3.826 3.826 0 1 0-5.411-5.411l-3.236 3.236-1.06-1.06 3.235-3.237ZM5.56 14.907a5.326 5.326 0 0 0 7.532 7.533l3.236-3.236-1.061-1.061-3.236 3.236a3.826 3.826 0 1 1-5.411-5.411l3.236-3.236-1.061-1.06-3.236 3.235Z"></path><path d="m16.346 10.592-5.753 5.753 1.061 1.06 5.753-5.752-1.06-1.06Z"></path></g><defs><clipPath id="a"><path fill="#fff" d="M0 0h28v28H0z"></path></clipPath></defs></svg></span></span></a></h3>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">添加了以下警报
</font></font><a href="https://www.tradingview.com/support/solutions/43000531021"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">占位符</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：</font></font></p>
<ul>
<li><code dir="auto">{{syminfo.currency}}</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- 返回当前符号的货币代码（“EUR”、“USD”等）。</font></font></li>
<li><code dir="auto">{{syminfo.basecurrency}}</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- 如果符号指的是货币对，则返回当前符号的基础货币代码。否则，返回</font></font><code dir="auto">na</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。例如，当符号为“EURUSD”时，它返回“EUR”。</font></font></li>
</ul>
<h4 id="pine-script-maps" class="md-heading"><a href="#pine-script-maps"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pine Script™</font></font><span class="fancy-wrap"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">地图</font></font><span class="icon icon-link" aria-hidden="true"><svg width="28" height="28" viewBox="0 0 28 28"><g fill="currentColor" clip-path="url(#a)"><path d="M14.908 5.558a5.326 5.326 0 1 1 7.533 7.533l-3.236 3.236-1.061-1.061 3.236-3.236a3.826 3.826 0 1 0-5.411-5.411l-3.236 3.236-1.06-1.06 3.235-3.237ZM5.56 14.907a5.326 5.326 0 0 0 7.532 7.533l3.236-3.236-1.061-1.061-3.236 3.236a3.826 3.826 0 1 1-5.411-5.411l3.236-3.236-1.061-1.06-3.236 3.235Z"></path><path d="m16.346 10.592-5.753 5.753 1.061 1.06 5.753-5.752-1.06-1.06Z"></path></g><defs><clipPath id="a"><path fill="#fff" d="M0 0h28v28H0z"></path></clipPath></defs></svg></span></span></a></h4>
<p><font style="vertical-align: inherit;"></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">映射是以键值</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">对形式保存元素的集合。它们将</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">基本类型</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">的唯一键</font><font style="vertical-align: inherit;">与</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">内置</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或
</font></font><a href="/pine-script-docs/language/type-system#user-defined-types"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">用户定义</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">类型的值相关联。与</font></font><a href="/pine-script-docs/language/arrays"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">数组</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">不同，这些集合是</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">无序的</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，不使用内部查找索引。相反，脚本通过引用
放入其中的键值对中的</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">键</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">来访问映射的值。有关这些新集合的更多信息，请参阅我们的
</font></font><a href="/pine-script-docs/language/maps"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">用户手册中的映射页面</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></p>
<h3 id="july-2023" class="md-heading"><a href="#july-2023"><font style="vertical-align: inherit;"><span class="fancy-wrap"><font style="vertical-align: inherit;">2023 年</font></span><font style="vertical-align: inherit;">7 月</font></font><span class="fancy-wrap"><font style="vertical-align: inherit;"></font><span class="icon icon-link" aria-hidden="true"><svg width="28" height="28" viewBox="0 0 28 28"><g fill="currentColor" clip-path="url(#a)"><path d="M14.908 5.558a5.326 5.326 0 1 1 7.533 7.533l-3.236 3.236-1.061-1.061 3.236-3.236a3.826 3.826 0 1 0-5.411-5.411l-3.236 3.236-1.06-1.06 3.235-3.237ZM5.56 14.907a5.326 5.326 0 0 0 7.532 7.533l3.236-3.236-1.061-1.061-3.236 3.236a3.826 3.826 0 1 1-5.411-5.411l3.236-3.236-1.061-1.06-3.236 3.235Z"></path><path d="m16.346 10.592-5.753 5.753 1.061 1.06 5.753-5.752-1.06-1.06Z"></path></g><defs><clipPath id="a"><path fill="#fff" d="M0 0h28v28H0z"></path></clipPath></defs></svg></span></span></a></h3>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">修复了由于价格四舍五入不正确而导致策略偶尔错误计算限价订单规模的问题
</font></font><code dir="auto">limit</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">向命名空间添加了一个新的内置变量</font></font><code dir="auto">strategy.*</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：</font></font></p>
<ul>
<li><a href="https://www.tradingview.com/pine-script-reference/v5/#var_strategy%7Bdot%7Dmargin_liquidation_price"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">strategies.margin_liquidation_price</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - 当策略使用保证金时，返回发生保证金追加通知的价格值。</font></font></li>
</ul>
<h3 id="june-2023" class="md-heading"><a href="#june-2023"><font style="vertical-align: inherit;"><span class="fancy-wrap"><font style="vertical-align: inherit;">2023 年</font></span><font style="vertical-align: inherit;">6 月</font></font><span class="fancy-wrap"><font style="vertical-align: inherit;"></font><span class="icon icon-link" aria-hidden="true"><svg width="28" height="28" viewBox="0 0 28 28"><g fill="currentColor" clip-path="url(#a)"><path d="M14.908 5.558a5.326 5.326 0 1 1 7.533 7.533l-3.236 3.236-1.061-1.061 3.236-3.236a3.826 3.826 0 1 0-5.411-5.411l-3.236 3.236-1.06-1.06 3.235-3.237ZM5.56 14.907a5.326 5.326 0 0 0 7.532 7.533l3.236-3.236-1.061-1.061-3.236 3.236a3.826 3.826 0 1 1-5.411-5.411l3.236-3.236-1.061-1.06-3.236 3.235Z"></path><path d="m16.346 10.592-5.753 5.753 1.061 1.06 5.753-5.752-1.06-1.06Z"></path></g><defs><clipPath id="a"><path fill="#fff" d="M0 0h28v28H0z"></path></clipPath></defs></svg></span></span></a></h3>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">添加了新的</font></font><code dir="auto">syminfo.*</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">内置变量：</font></font></p>
<ul>
<li><a href="https://www.tradingview.com/pine-script-reference/v5/#var_syminfo%7Bdot%7Dsector"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">syminfo.sector</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - 返回符号的扇区。</font></font></li>
<li><a href="https://www.tradingview.com/pine-script-reference/v5/#var_syminfo%7Bdot%7Dindustry"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">syminfo.industry</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - 返回符号的行业。</font></font></li>
<li><a href="https://www.tradingview.com/pine-script-reference/v5/#var_syminfo%7Bdot%7Dcountry"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">syminfo.country-</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">返回交易该符号的国家的两字母代码。</font></font></li>
</ul>
<h3 id="may-2023" class="md-heading"><a href="#may-2023"><font style="vertical-align: inherit;"><span class="fancy-wrap"><font style="vertical-align: inherit;">2023 年</font></span><font style="vertical-align: inherit;">5 月</font></font><span class="fancy-wrap"><font style="vertical-align: inherit;"></font><span class="icon icon-link" aria-hidden="true"><svg width="28" height="28" viewBox="0 0 28 28"><g fill="currentColor" clip-path="url(#a)"><path d="M14.908 5.558a5.326 5.326 0 1 1 7.533 7.533l-3.236 3.236-1.061-1.061 3.236-3.236a3.826 3.826 0 1 0-5.411-5.411l-3.236 3.236-1.06-1.06 3.235-3.237ZM5.56 14.907a5.326 5.326 0 0 0 7.532 7.533l3.236-3.236-1.061-1.061-3.236 3.236a3.826 3.826 0 1 1-5.411-5.411l3.236-3.236-1.061-1.06-3.236 3.235Z"></path><path d="m16.346 10.592-5.753 5.753 1.061 1.06 5.753-5.752-1.06-1.06Z"></path></g><defs><clipPath id="a"><path fill="#fff" d="M0 0h28v28H0z"></path></clipPath></defs></svg></span></span></a></h3>
<p><font style="vertical-align: inherit;"></font><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_strategy%7Bdot%7Dentry"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">向strategy.entry()</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、
 </font></font><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_strategy%7Bdot%7Dorder"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">strategy.order()</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、
 </font></font><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_strategy%7Bdot%7Dclose"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">strategy.close()</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、
 </font></font><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_strategy%7Bdot%7Dclose_all"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">strategy.close_all()</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
</font></font><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_strategy%7Bdot%7Dexit"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">strategy.exit()</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">函数添加了新参数
</font><font style="vertical-align: inherit;">
：</font></font></p>
<ul>
<li><code dir="auto">disable_alert</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- 禁用该功能所下的任何订单的订单填写警报。</font></font></li>
</ul>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">我们的“指标上的指标”功能允许脚本通过 input.source
 </font></font><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_input%7Bdot%7Dsource"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">()</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
函数将另一个指标的图作为源值传递，现在支持多个外部输入。脚本可以使用来自最多 10 个不同指标的大量外部输入。</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">我们添加了以下数组函数：</font></font></p>
<ul>
<li>
<p><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_array%7Bdot%7Devery"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">array.every()</font></font></a><font style="vertical-align: inherit;"></font><code dir="auto">true</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> -如果数组的所有元素</font></font><code dir="auto">id</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">都是</font></font><code dir="auto">true</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，则</font><font style="vertical-align: inherit;">返回，</font></font><code dir="auto">false</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
否则。</font></font></p>
</li>
<li>
<p><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_array%7Bdot%7Dsome"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">array.some()</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> -</font></font><code dir="auto">true</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果数组中至少有一个元素</font></font><code dir="auto">id</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">为</font></font><code dir="auto">true</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
则返回 ，</font></font><code dir="auto">false</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">否则返回 。这些函数还适用于
</font></font><a href="https://www.tradingview.com/pine-script-reference/v5/#type_int"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">int</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
和
</font></font><a href="https://www.tradingview.com/pine-script-reference/v5/#type_float"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">float</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
类型的数组，在这种情况下，零值被视为</font></font><code dir="auto">false</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，其他所有值都
被视为</font></font><code dir="auto">true</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></p>
</li>
</ul>
<h3 id="april-2023" class="md-heading"><a href="#april-2023"><font style="vertical-align: inherit;"><span class="fancy-wrap"><font style="vertical-align: inherit;">2023 年</font></span><font style="vertical-align: inherit;">4 月</font></font><span class="fancy-wrap"><font style="vertical-align: inherit;"></font><span class="icon icon-link" aria-hidden="true"><svg width="28" height="28" viewBox="0 0 28 28"><g fill="currentColor" clip-path="url(#a)"><path d="M14.908 5.558a5.326 5.326 0 1 1 7.533 7.533l-3.236 3.236-1.061-1.061 3.236-3.236a3.826 3.826 0 1 0-5.411-5.411l-3.236 3.236-1.06-1.06 3.235-3.237ZM5.56 14.907a5.326 5.326 0 0 0 7.532 7.533l3.236-3.236-1.061-1.061-3.236 3.236a3.826 3.826 0 1 1-5.411-5.411l3.236-3.236-1.061-1.06-3.236 3.235Z"></path><path d="m16.346 10.592-5.753 5.753 1.061 1.06 5.753-5.752-1.06-1.06Z"></path></g><defs><clipPath id="a"><path fill="#fff" d="M0 0h28v28H0z"></path></clipPath></defs></svg></span></span></a></h3>
<p><font style="vertical-align: inherit;"></font><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_strategy%7Bdot%7Dexit"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">修复了strategy.exit()</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">中的追踪止损
是根据最高/最低价格而不是条形图内价格填充的</font><font style="vertical-align: inherit;">问题
。</font></font></p>
<p><font style="vertical-align: inherit;"></font><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_array%7Bdot%7Dmode"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">修复了array.mode()</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、
 </font></font><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_matrix%7Bdot%7Dmode"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">matrix.mode()</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
和
</font></font><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_ta%7Bdot%7Dmode"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ta.mode()</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">的行为
</font><font style="vertical-align: inherit;">。现在，当数据没有最常​​见值时，这些函数将返回最小值。</font></font></p>
<h3 id="march-2023" class="md-heading"><a href="#march-2023"><font style="vertical-align: inherit;"><span class="fancy-wrap"><font style="vertical-align: inherit;">2023 年</font></span><font style="vertical-align: inherit;">3 月</font></font><span class="fancy-wrap"><font style="vertical-align: inherit;"></font><span class="icon icon-link" aria-hidden="true"><svg width="28" height="28" viewBox="0 0 28 28"><g fill="currentColor" clip-path="url(#a)"><path d="M14.908 5.558a5.326 5.326 0 1 1 7.533 7.533l-3.236 3.236-1.061-1.061 3.236-3.236a3.826 3.826 0 1 0-5.411-5.411l-3.236 3.236-1.06-1.06 3.235-3.237ZM5.56 14.907a5.326 5.326 0 0 0 7.532 7.533l3.236-3.236-1.061-1.061-3.236 3.236a3.826 3.826 0 1 1-5.411-5.411l3.236-3.236-1.061-1.06-3.236 3.235Z"></path><path d="m16.346 10.592-5.753 5.753 1.061 1.06 5.753-5.752-1.06-1.06Z"></path></g><defs><clipPath id="a"><path fill="#fff" d="M0 0h28v28H0z"></path></clipPath></defs></svg></span></span></a></h3>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">现在可以将基于秒的时间范围字符串作为
</font><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_request%7Bdot%7Dsecurity"><font style="vertical-align: inherit;">request.security()</font></a><font style="vertical-align: inherit;">
和
</font><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_request%7Bdot%7Dsecurity_lower_tf"><font style="vertical-align: inherit;">request.security_lower_tf()</font></a></font><code dir="auto">timeframe</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">中的参数
</font><font style="vertical-align: inherit;">。</font></font><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_request%7Bdot%7Dsecurity"><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"></font><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_request%7Bdot%7Dsecurity_lower_tf"><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">添加了新功能：</font></font></p>
<ul>
<li><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_request%7Bdot%7Dcurrency_rate"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">request.currency_rate()</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - 提供每日汇率，将以某种</font></font><code dir="auto">from</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
货币表示的值转换为另一种</font></font><code dir="auto">to</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">货币表示的值。</font></font></li>
</ul>
<h3 id="february-2023" class="md-heading"><a href="#february-2023"><font style="vertical-align: inherit;"><span class="fancy-wrap"><font style="vertical-align: inherit;">2023 年</font></span><font style="vertical-align: inherit;">2 月</font></font><span class="fancy-wrap"><font style="vertical-align: inherit;"></font><span class="icon icon-link" aria-hidden="true"><svg width="28" height="28" viewBox="0 0 28 28"><g fill="currentColor" clip-path="url(#a)"><path d="M14.908 5.558a5.326 5.326 0 1 1 7.533 7.533l-3.236 3.236-1.061-1.061 3.236-3.236a3.826 3.826 0 1 0-5.411-5.411l-3.236 3.236-1.06-1.06 3.235-3.237ZM5.56 14.907a5.326 5.326 0 0 0 7.532 7.533l3.236-3.236-1.061-1.061-3.236 3.236a3.826 3.826 0 1 1-5.411-5.411l3.236-3.236-1.061-1.06-3.236 3.235Z"></path><path d="m16.346 10.592-5.753 5.753 1.061 1.06 5.753-5.752-1.06-1.06Z"></path></g><defs><clipPath id="a"><path fill="#fff" d="M0 0h28v28H0z"></path></clipPath></defs></svg></span></span></a></h3>
<h4 id="pine-script-methods" class="md-heading"><a href="#pine-script-methods"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pine Script™</font></font><span class="fancy-wrap"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">方法</font></font><span class="icon icon-link" aria-hidden="true"><svg width="28" height="28" viewBox="0 0 28 28"><g fill="currentColor" clip-path="url(#a)"><path d="M14.908 5.558a5.326 5.326 0 1 1 7.533 7.533l-3.236 3.236-1.061-1.061 3.236-3.236a3.826 3.826 0 1 0-5.411-5.411l-3.236 3.236-1.06-1.06 3.235-3.237ZM5.56 14.907a5.326 5.326 0 0 0 7.532 7.533l3.236-3.236-1.061-1.061-3.236 3.236a3.826 3.826 0 1 1-5.411-5.411l3.236-3.236-1.061-1.06-3.236 3.235Z"></path><path d="m16.346 10.592-5.753 5.753 1.061 1.06 5.753-5.752-1.06-1.06Z"></path></g><defs><clipPath id="a"><path fill="#fff" d="M0 0h28v28H0z"></path></clipPath></defs></svg></span></span></a></h4>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pine Script™ 方法是与内置或用户定义类型的特定实例相关的专用函数。它们提供比标准函数更方便的语法，因为用户可以使用方便的点符号语法以与对象字段相同的方式访问方法。Pine Script™ 包括
</font></font><a href="https://www.tradingview.com/pine-script-reference/v5/#type_array"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">数组</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、
</font></font><a href="https://www.tradingview.com/pine-script-reference/v5/#type_matrix"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">矩阵</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、
</font></font><a href="https://www.tradingview.com/pine-script-reference/v5/#type_line"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">线</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、
</font></font><a href="https://www.tradingview.com/pine-script-reference/v5/#type_linefill"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">行填充</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、
</font></font><a href="https://www.tradingview.com/pine-script-reference/v5/#type_label"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">标签</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、
</font></font><a href="https://www.tradingview.com/pine-script-reference/v5/#type_box"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">框</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
</font></font><a href="https://www.tradingview.com/pine-script-reference/v5/#type_table"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表类型的内置方法，并使用新</font></font></a><font style="vertical-align: inherit;"></font><a href="https://www.tradingview.com/pine-script-reference/v5/#kw_method"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">方法</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">关键字
促进用户定义方法
</font><font style="vertical-align: inherit;">
。有关此新功能的更多详细信息，请参阅我们的
</font></font><a href="/pine-script-docs/language/methods"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">用户手册中的方法页面</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></p>
<h3 id="january-2023" class="md-heading"><a href="#january-2023"><font style="vertical-align: inherit;"><span class="fancy-wrap"><font style="vertical-align: inherit;">2023 年</font></span><font style="vertical-align: inherit;">1 月</font></font><span class="fancy-wrap"><font style="vertical-align: inherit;"></font><span class="icon icon-link" aria-hidden="true"><svg width="28" height="28" viewBox="0 0 28 28"><g fill="currentColor" clip-path="url(#a)"><path d="M14.908 5.558a5.326 5.326 0 1 1 7.533 7.533l-3.236 3.236-1.061-1.061 3.236-3.236a3.826 3.826 0 1 0-5.411-5.411l-3.236 3.236-1.06-1.06 3.235-3.237ZM5.56 14.907a5.326 5.326 0 0 0 7.532 7.533l3.236-3.236-1.061-1.061-3.236 3.236a3.826 3.826 0 1 1-5.411-5.411l3.236-3.236-1.061-1.06-3.236 3.235Z"></path><path d="m16.346 10.592-5.753 5.753 1.061 1.06 5.753-5.752-1.06-1.06Z"></path></g><defs><clipPath id="a"><path fill="#fff" d="M0 0h28v28H0z"></path></clipPath></defs></svg></span></span></a></h3>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">添加了新的数组函数：</font></font></p>
<ul>
<li><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_array%7Bdot%7Dfirst"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">array.first()</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - 返回数组的第一个元素。</font></font></li>
<li><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_array%7Bdot%7Dlast"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">array.last()</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - 返回数组的最后一个元素。</font></font></li>
</ul>
<h2 id="2022" class="md-heading"><a href="#2022"> <span class="fancy-wrap"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2022</font></font><span class="icon icon-link" aria-hidden="true"><svg width="28" height="28" viewBox="0 0 28 28"><g fill="currentColor" clip-path="url(#a)"><path d="M14.908 5.558a5.326 5.326 0 1 1 7.533 7.533l-3.236 3.236-1.061-1.061 3.236-3.236a3.826 3.826 0 1 0-5.411-5.411l-3.236 3.236-1.06-1.06 3.235-3.237ZM5.56 14.907a5.326 5.326 0 0 0 7.532 7.533l3.236-3.236-1.061-1.061-3.236 3.236a3.826 3.826 0 1 1-5.411-5.411l3.236-3.236-1.061-1.06-3.236 3.235Z"></path><path d="m16.346 10.592-5.753 5.753 1.061 1.06 5.753-5.752-1.06-1.06Z"></path></g><defs><clipPath id="a"><path fill="#fff" d="M0 0h28v28H0z"></path></clipPath></defs></svg></span></span></a></h2>
<h3 id="december-2022" class="md-heading"><a href="#december-2022"><font style="vertical-align: inherit;"><span class="fancy-wrap"><font style="vertical-align: inherit;">2022 年</font></span><font style="vertical-align: inherit;">12 月</font></font><span class="fancy-wrap"><font style="vertical-align: inherit;"></font><span class="icon icon-link" aria-hidden="true"><svg width="28" height="28" viewBox="0 0 28 28"><g fill="currentColor" clip-path="url(#a)"><path d="M14.908 5.558a5.326 5.326 0 1 1 7.533 7.533l-3.236 3.236-1.061-1.061 3.236-3.236a3.826 3.826 0 1 0-5.411-5.411l-3.236 3.236-1.06-1.06 3.235-3.237ZM5.56 14.907a5.326 5.326 0 0 0 7.532 7.533l3.236-3.236-1.061-1.061-3.236 3.236a3.826 3.826 0 1 1-5.411-5.411l3.236-3.236-1.061-1.06-3.236 3.235Z"></path><path d="m16.346 10.592-5.753 5.753 1.061 1.06 5.753-5.752-1.06-1.06Z"></path></g><defs><clipPath id="a"><path fill="#fff" d="M0 0h28v28H0z"></path></clipPath></defs></svg></span></span></a></h3>
<h4 id="pine-objects" class="md-heading"><a href="#pine-objects"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">松木</font></font><span class="fancy-wrap"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">物品</font></font><span class="icon icon-link" aria-hidden="true"><svg width="28" height="28" viewBox="0 0 28 28"><g fill="currentColor" clip-path="url(#a)"><path d="M14.908 5.558a5.326 5.326 0 1 1 7.533 7.533l-3.236 3.236-1.061-1.061 3.236-3.236a3.826 3.826 0 1 0-5.411-5.411l-3.236 3.236-1.06-1.06 3.235-3.237ZM5.56 14.907a5.326 5.326 0 0 0 7.532 7.533l3.236-3.236-1.061-1.061-3.236 3.236a3.826 3.826 0 1 1-5.411-5.411l3.236-3.236-1.061-1.06-3.236 3.235Z"></path><path d="m16.346 10.592-5.753 5.753 1.061 1.06 5.753-5.752-1.06-1.06Z"></path></g><defs><clipPath id="a"><path fill="#fff" d="M0 0h28v28H0z"></path></clipPath></defs></svg></span></span></a></h4>
<p><font style="vertical-align: inherit;"></font><a href="https://www.tradingview.com/pine-script-reference/v5/#kw_type"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pine 对象是使用type</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">关键字声明的新用户定义复合类型 (UDT) 的实例
</font><font style="vertical-align: inherit;">
。经验丰富的程序员可以将 UDT 视为无方法类。它们允许用户创建自定义类型，将不同的值组织在一个逻辑实体下。新功能的详细概述可在我们的</font></font><a href="/pine-script-docs/language/objects"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">用户手册的对象页面</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">中找到。</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">添加了新功能：</font></font></p>
<ul>
<li><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_ticker%7Bdot%7Dstandard"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ticker.standard()</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - 创建一个代码来从标准图表中请求数据，该数据不受延长时段、股息调整、货币转换等修改器以及非标准图表类型的计算的影响：Heikin Ashi、Renko 等。</font></font></li>
</ul>
<p><font style="vertical-align: inherit;"></font><code dir="auto">strategy.*</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">添加了</font><font style="vertical-align: inherit;">新功能：</font></font></p>
<ul>
<li><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_strategy%7Bdot%7Dopentrades%7Bdot%7Dentry_comment"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">strategies.opentrades.entry_comment()</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - 该函数返回开启交易条目的注释信息。</font></font></li>
<li><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_strategy%7Bdot%7Dclosedtrades%7Bdot%7Dentry_comment"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">strategies.closedtrades.entry_comment()</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - 该函数返回已关闭交易的条目的评论信息。</font></font></li>
<li><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_strategy%7Bdot%7Dclosedtrades%7Bdot%7Dexit_comment"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">strategies.closedtrades.exit_comment()</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - 该函数返回已关闭交易退出的评论消息。</font></font></li>
</ul>
<h3 id="november-2022" class="md-heading"><a href="#november-2022"><font style="vertical-align: inherit;"><span class="fancy-wrap"><font style="vertical-align: inherit;">2022 年</font></span><font style="vertical-align: inherit;">11 月</font></font><span class="fancy-wrap"><font style="vertical-align: inherit;"></font><span class="icon icon-link" aria-hidden="true"><svg width="28" height="28" viewBox="0 0 28 28"><g fill="currentColor" clip-path="url(#a)"><path d="M14.908 5.558a5.326 5.326 0 1 1 7.533 7.533l-3.236 3.236-1.061-1.061 3.236-3.236a3.826 3.826 0 1 0-5.411-5.411l-3.236 3.236-1.06-1.06 3.235-3.237ZM5.56 14.907a5.326 5.326 0 0 0 7.532 7.533l3.236-3.236-1.061-1.061-3.236 3.236a3.826 3.826 0 1 1-5.411-5.411l3.236-3.236-1.061-1.06-3.236 3.235Z"></path><path d="m16.346 10.592-5.753 5.753 1.061 1.06 5.753-5.752-1.06-1.06Z"></path></g><defs><clipPath id="a"><path fill="#fff" d="M0 0h28v28H0z"></path></clipPath></defs></svg></span></span></a></h3>
<p><font style="vertical-align: inherit;"></font><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_math%7Bdot%7Dround_to_mintick"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">修复了math.round_to_mintick()</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">函数的行为
</font><font style="vertical-align: inherit;">
。对于“na”值，它返回“na”。</font></font></p>
<h3 id="october-2022" class="md-heading"><a href="#october-2022"><font style="vertical-align: inherit;"><span class="fancy-wrap"><font style="vertical-align: inherit;">2022 年</font></span><font style="vertical-align: inherit;">10 月</font></font><span class="fancy-wrap"><font style="vertical-align: inherit;"></font><span class="icon icon-link" aria-hidden="true"><svg width="28" height="28" viewBox="0 0 28 28"><g fill="currentColor" clip-path="url(#a)"><path d="M14.908 5.558a5.326 5.326 0 1 1 7.533 7.533l-3.236 3.236-1.061-1.061 3.236-3.236a3.826 3.826 0 1 0-5.411-5.411l-3.236 3.236-1.06-1.06 3.235-3.237ZM5.56 14.907a5.326 5.326 0 0 0 7.532 7.533l3.236-3.236-1.061-1.061-3.236 3.236a3.826 3.826 0 1 1-5.411-5.411l3.236-3.236-1.061-1.06-3.236 3.235Z"></path><path d="m16.346 10.592-5.753 5.753 1.061 1.06 5.753-5.752-1.06-1.06Z"></path></g><defs><clipPath id="a"><path fill="#fff" d="M0 0h28v28H0z"></path></clipPath></defs></svg></span></span></a></h3>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pine Script™ 现在拥有一个功能更强大、集成性更好的新编辑器。阅读</font></font><a href="https://www.tradingview.com/blog/en/new-vsc-style-pine-script-editor-34159/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">我们的博客</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
，了解有关所有新功能和升级的所有信息。</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
添加了</font></font><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_fill"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">fill()</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">函数的新重载
。现在它可以创建垂直渐变。有关它的更多信息，请参阅</font></font><a href="https://www.tradingview.com/blog/en/pine-script-vertical-gradients-33586/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">博客文章</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">添加了新功能：</font></font></p>
<ul>
<li><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_str%7Bdot%7Dformat_time"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">str.format_time()</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - 使用指定的格式和时区将时间戳转换为格式化的字符串。</font></font></li>
</ul>
<h3 id="september-2022" class="md-heading"><a href="#september-2022"><font style="vertical-align: inherit;"><span class="fancy-wrap"><font style="vertical-align: inherit;">2022 年</font></span><font style="vertical-align: inherit;">9 月</font></font><span class="fancy-wrap"><font style="vertical-align: inherit;"></font><span class="icon icon-link" aria-hidden="true"><svg width="28" height="28" viewBox="0 0 28 28"><g fill="currentColor" clip-path="url(#a)"><path d="M14.908 5.558a5.326 5.326 0 1 1 7.533 7.533l-3.236 3.236-1.061-1.061 3.236-3.236a3.826 3.826 0 1 0-5.411-5.411l-3.236 3.236-1.06-1.06 3.235-3.237ZM5.56 14.907a5.326 5.326 0 0 0 7.532 7.533l3.236-3.236-1.061-1.061-3.236 3.236a3.826 3.826 0 1 1-5.411-5.411l3.236-3.236-1.061-1.06-3.236 3.235Z"></path><path d="m16.346 10.592-5.753 5.753 1.061 1.06 5.753-5.752-1.06-1.06Z"></path></g><defs><clipPath id="a"><path fill="#fff" d="M0 0h28v28H0z"></path></clipPath></defs></svg></span></span></a></h3>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">该参数现在允许在</font><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_label%7Bdot%7Dnew"><font style="vertical-align: inherit;">label.new()</font></a><font style="vertical-align: inherit;">、
 </font><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_box%7Bdot%7Dnew"><font style="vertical-align: inherit;">box.new()</font></a><font style="vertical-align: inherit;">
和
</font><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_table%7Bdot%7Dcell"><font style="vertical-align: inherit;">table.cell()</font></a></font><code dir="auto">text_font_family</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">函数调用中选择等宽字体
</font><font style="vertical-align: inherit;">
，这使得垂直对齐文本变得更加容易。其参数可以是：</font></font><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_label%7Bdot%7Dnew"><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"></font><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_box%7Bdot%7Dnew"><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"></font><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_table%7Bdot%7Dcell"><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"></font></p>
<ul>
<li><a href="https://www.tradingview.com/pine-script-reference/v5/#const_font%7Bdot%7Dfamily_default"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">font.family_default</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - 指定默认字体。</font></font></li>
<li><a href="https://www.tradingview.com/pine-script-reference/v5/#const_font%7Bdot%7Dfamily_monospace"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">font.family_monospace</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - 指定等宽字体。</font></font></li>
</ul>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">附带的 setter 函数包括：</font></font></p>
<ul>
<li><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_label%7Bdot%7Dset_text_font_family"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">label.set_text_font_family()</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - 该函数设置标签内文本的字体系列。</font></font></li>
<li><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_box%7Bdot%7Dset_text_font_family"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">box.set_text_font_family()</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - 该函数设置框内文本的字体系列。</font></font></li>
<li><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_table%7Bdot%7Dcell_set_text_font_family"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">table.cell_set_text_font_family()</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - 该函数设置单元格内文本的字体系列。</font></font></li>
</ul>
<h3 id="august-2022" class="md-heading"><a href="#august-2022"><font style="vertical-align: inherit;"><span class="fancy-wrap"><font style="vertical-align: inherit;">2022 年</font></span><font style="vertical-align: inherit;">8 月</font></font><span class="fancy-wrap"><font style="vertical-align: inherit;"></font><span class="icon icon-link" aria-hidden="true"><svg width="28" height="28" viewBox="0 0 28 28"><g fill="currentColor" clip-path="url(#a)"><path d="M14.908 5.558a5.326 5.326 0 1 1 7.533 7.533l-3.236 3.236-1.061-1.061 3.236-3.236a3.826 3.826 0 1 0-5.411-5.411l-3.236 3.236-1.06-1.06 3.235-3.237ZM5.56 14.907a5.326 5.326 0 0 0 7.532 7.533l3.236-3.236-1.061-1.061-3.236 3.236a3.826 3.826 0 1 1-5.411-5.411l3.236-3.236-1.061-1.06-3.236 3.235Z"></path><path d="m16.346 10.592-5.753 5.753 1.061 1.06 5.753-5.752-1.06-1.06Z"></path></g><defs><clipPath id="a"><path fill="#fff" d="M0 0h28v28H0z"></path></clipPath></defs></svg></span></span></a></h3>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
添加了</font><font style="vertical-align: inherit;">新的标签样式
</font></font><a href="https://www.tradingview.com/pine-script-reference/v5/#const_label%7Bdot%7Dstyle_text_outline"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">label.style_text_outline 。</font></font></a><font style="vertical-align: inherit;"></font></p>
<p><font style="vertical-align: inherit;"></font><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_ta%7Bdot%7Dpivot_point_levels"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">为ta.pivot_point_levels()</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
函数添加了</font><font style="vertical-align: inherit;">一个新参数
：</font></font></p>
<ul>
<li><code dir="auto">developing</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- 如果</font></font><code dir="auto">false</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，则这些值是上次锚定条件为真时计算的值。它们保持不变，直到锚定条件再次变为真。如果</font></font><code dir="auto">true</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，则枢轴正在发展，即它们不断地重新计算上一个锚点（如果锚定条件从未为真，则为零条）和当前条之间发展的数据。当</font><font style="vertical-align: inherit;">设置为</font></font><code dir="auto">true</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">时
不能是</font><font style="vertical-align: inherit;">。</font></font><code dir="auto">type</code><font style="vertical-align: inherit;"></font><code dir="auto">"Woodie"</code><font style="vertical-align: inherit;"></font></li>
</ul>
<p><font style="vertical-align: inherit;"></font><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_box%7Bdot%7Dnew"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">为box.new()</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
函数添加了</font><font style="vertical-align: inherit;">一个新参数
：</font></font></p>
<ul>
<li><code dir="auto">text_wrap</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- 它定义文本是否显示在一行中，必要时延伸到框的宽度之外，或者换行以使每行都不比框本身宽。</font></font></li>
</ul>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">此参数支持两个参数：</font></font></p>
<ul>
<li><a href="https://www.tradingview.com/pine-script-reference/v5/#const_text%7Bdot%7Dwrap_none"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">text.wrap_none</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - 禁用
</font></font><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_box%7Bdot%7Dnew"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">box.new</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
和
</font></font><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_box%7Bdot%7Dset_text_wrap"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">box.set_text_wrap</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
函数的换行模式。</font></font></li>
<li><a href="https://www.tradingview.com/pine-script-reference/v5/#const_text%7Bdot%7Dwrap_auto"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">text.wrap_auto - </font></font></a><font style="vertical-align: inherit;"></font><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_box%7Bdot%7Dnew"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">box.new</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
和
</font></font><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_box%7Bdot%7Dset_text_wrap"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">box.set_text_wrap</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">函数的自动换行模式
</font><font style="vertical-align: inherit;">
。</font></font></li>
</ul>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">添加了新的内置函数：</font></font></p>
<ul>
<li><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_ta%7Bdot%7Dmin"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ta.min()</font></font></a><font style="vertical-align: inherit;"></font><code dir="auto">source</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - 返回从图表开始到当前条</font><font style="vertical-align: inherit;">的历史最低值。</font></font></li>
<li><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_ta%7Bdot%7Dmax"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ta.max()</font></font></a><font style="vertical-align: inherit;"></font><code dir="auto">source</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - 返回从图表开始到当前条</font><font style="vertical-align: inherit;">的历史最高值。</font></font></li>
</ul>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">添加了新的注释</font></font><code dir="auto">//@strategy_alert_message</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。如果将注释添加到策略中，则注释后面的文本将自动设置为[创建警报]窗口中的默认警报消息。</font></font></p>
<div class="pine-colorizer not-content colorized" data-id="vq"><div class="pine-colorizer__header"><a class="pine-colorizer__title" href="https://tradingview.com/pine-script-docs/en/v5/Introduction.html" target="_blank" rel="noopener"><span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pine Script™</font></font></span></a><button class="pine-colorizer__copy-btn"><div class="pine-colorizer__tooltip"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">已复制</font></font></div></button></div><code class="monaco-editor-tv-pine-light"><span><span class="mtk9">//</span><span class="mtk9 mtkb">@version=</span><span class="mtk9">5</span></span><br><span><span class="mtk9">//&nbsp;</span><span class="mtk9 mtkb">@strategy</span><span class="mtk9">_alert_message&nbsp;My&nbsp;Default&nbsp;Alert&nbsp;Message</span></span><br><span><span class="mtk16">strategy</span><span class="mtk13">(</span><span class="mtk29">"My&nbsp;Strategy"</span><span class="mtk13">)</span></span><br><span><span class="mtk16">plot</span><span class="mtk13">(</span><span class="mtk11">close</span><span class="mtk13">)</span></span><br></code></div>
<h3 id="july-2022" class="md-heading"><a href="#july-2022"><font style="vertical-align: inherit;"><span class="fancy-wrap"><font style="vertical-align: inherit;">2022 年</font></span><font style="vertical-align: inherit;">7 月</font></font><span class="fancy-wrap"><font style="vertical-align: inherit;"></font><span class="icon icon-link" aria-hidden="true"><svg width="28" height="28" viewBox="0 0 28 28"><g fill="currentColor" clip-path="url(#a)"><path d="M14.908 5.558a5.326 5.326 0 1 1 7.533 7.533l-3.236 3.236-1.061-1.061 3.236-3.236a3.826 3.826 0 1 0-5.411-5.411l-3.236 3.236-1.06-1.06 3.235-3.237ZM5.56 14.907a5.326 5.326 0 0 0 7.532 7.533l3.236-3.236-1.061-1.061-3.236 3.236a3.826 3.826 0 1 1-5.411-5.411l3.236-3.236-1.061-1.06-3.236 3.235Z"></path><path d="m16.346 10.592-5.753 5.753 1.061 1.06 5.753-5.752-1.06-1.06Z"></path></g><defs><clipPath id="a"><path fill="#fff" d="M0 0h28v28H0z"></path></clipPath></defs></svg></span></span></a></h3>
<p><font style="vertical-align: inherit;"><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_plot"><font style="vertical-align: inherit;">现在可以通过为plot()</font></a><font style="vertical-align: inherit;">、
 </font><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_plotchar"><font style="vertical-align: inherit;">plotchar()</font></a><font style="vertical-align: inherit;">、
 </font><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_plotshape"><font style="vertical-align: inherit;">plotshape()</font></a><font style="vertical-align: inherit;">、
 </font><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_plotarrow"><font style="vertical-align: inherit;">plotarrow()</font></a><font style="vertical-align: inherit;">、
 </font><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_plotcandle"><font style="vertical-align: inherit;">plotcandle()</font></a><font style="vertical-align: inherit;">和
</font><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_plotbar"><font style="vertical-align: inherit;">plotbar()</font></a></font><code dir="auto">display</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">函数的
参数
</font><font style="vertical-align: inherit;">引入新参数来微调脚本绘图值的显示位置</font><font style="vertical-align: inherit;">
。</font></font><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_plot"><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"></font><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_plotchar"><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"></font><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_plotshape"><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"></font><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_plotarrow"><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"></font><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_plotcandle"><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"></font><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_plotbar"><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">添加了四个新参数，补充了之前可用的
</font></font><a href="https://www.tradingview.com/pine-script-reference/v5/#const_display%7Bdot%7Dall"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">display.all</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
和
</font></font><a href="https://www.tradingview.com/pine-script-reference/v5/#const_display%7Bdot%7Dnone"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">display.none</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：</font></font></p>
<ul>
<li><a href="https://www.tradingview.com/pine-script-reference/v5/#const_display%7Bdot%7Ddata_window"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">display.data_window</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
在数据窗口中显示绘图值，这是图表右侧栏中可用的项目之一。</font></font></li>
<li><a href="https://www.tradingview.com/pine-script-reference/v5/#const_display%7Bdot%7Dpane"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">display.pane</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
在脚本所在的窗格中显示绘图，如</font></font><code dir="auto">overlay</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">脚本的
</font></font><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_indicator"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">indicator()</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、
 </font></font><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_strategy"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">strategy()</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或
</font></font><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_library"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">library()</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
声明语句的参数所定义。</font></font></li>
<li><a href="https://www.tradingview.com/pine-script-reference/v5/#const_display%7Bdot%7Dprice_scale"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果图表设置允许， display.price_scale</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
控制价格刻度中图表标签和价格的显示。</font></font></li>
<li><a href="https://www.tradingview.com/pine-script-reference/v5/#const_display%7Bdot%7Dstatus_line"><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
如果图表设置允许，</font><a href="https://www.tradingview.com/pine-script-reference/v5/#const_display%7Bdot%7Dstatus_line"><font style="vertical-align: inherit;">display.status_line会在脚本的状态行中（图表上脚本名称的旁边）显示绘图值。</font></a></font></li>
</ul>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">参数</font></font><code dir="auto">display</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">支持对其参数进行加减操作：</font></font></p>
<ul>
<li><code dir="auto">display.all - display.status_line</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">将在脚本的状态行之外的所有地方显示情节的信息。</font></font></li>
<li><code dir="auto">display.price_scale + display.status_line</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">将仅在价格刻度和状态行中显示图表。</font></font></li>
</ul>
<h3 id="june-2022" class="md-heading"><a href="#june-2022"><font style="vertical-align: inherit;"><span class="fancy-wrap"><font style="vertical-align: inherit;">2022 年</font></span><font style="vertical-align: inherit;">6 月</font></font><span class="fancy-wrap"><font style="vertical-align: inherit;"></font><span class="icon icon-link" aria-hidden="true"><svg width="28" height="28" viewBox="0 0 28 28"><g fill="currentColor" clip-path="url(#a)"><path d="M14.908 5.558a5.326 5.326 0 1 1 7.533 7.533l-3.236 3.236-1.061-1.061 3.236-3.236a3.826 3.826 0 1 0-5.411-5.411l-3.236 3.236-1.06-1.06 3.235-3.237ZM5.56 14.907a5.326 5.326 0 0 0 7.532 7.533l3.236-3.236-1.061-1.061-3.236 3.236a3.826 3.826 0 1 1-5.411-5.411l3.236-3.236-1.061-1.06-3.236 3.235Z"></path><path d="m16.346 10.592-5.753 5.753 1.061 1.06 5.753-5.752-1.06-1.06Z"></path></g><defs><clipPath id="a"><path fill="#fff" d="M0 0h28v28H0z"></path></clipPath></defs></svg></span></span></a></h3>
<p><font style="vertical-align: inherit;"><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_strategy%7Bdot%7Dexit"><font style="vertical-align: inherit;">与strategy.exit()</font></a></font><code dir="auto">qty_percent</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">参数
</font><font style="vertical-align: inherit;">一起使用的参数的行为</font><font style="vertical-align: inherit;">
已更改。以前，同一仓位的连续退出订单使用的百分比是根据任何给定时间的剩余仓位计算的。相反，百分比现在始终适用于初始仓位大小。例如，在执行以下策略时：</font></font><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_strategy%7Bdot%7Dexit"><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"></font></p>
<div class="pine-colorizer not-content colorized" data-id="787"><div class="pine-colorizer__header"><a class="pine-colorizer__title" href="https://tradingview.com/pine-script-docs/en/v5/Introduction.html" target="_blank" rel="noopener"><span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pine Script™</font></font></span></a><button class="pine-colorizer__copy-btn"><div class="pine-colorizer__tooltip"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">已复制</font></font></div></button></div><code class="monaco-editor-tv-pine-light"><span><span class="mtk9">//</span><span class="mtk9 mtkb">@version=</span><span class="mtk9">5</span></span><br><span><span class="mtk16">strategy</span><span class="mtk13">(</span><span class="mtk29">"strategy.exit()&nbsp;example"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">overlay</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk11">true</span><span class="mtk13">)</span></span><br><span><span class="mtk16">strategy.entry</span><span class="mtk13">(</span><span class="mtk29">"Long"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk11">strategy.long</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">qty</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk12">100</span><span class="mtk13">)</span></span><br><span><span class="mtk16">strategy.exit</span><span class="mtk13">(</span><span class="mtk29">"Exit&nbsp;Long1"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"Long"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">trail_points</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk12">50</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">trail_offset</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk12">0</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">qty_percent</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk12">20</span><span class="mtk13">)</span></span><br><span><span class="mtk16">strategy.exit</span><span class="mtk13">(</span><span class="mtk29">"Exit&nbsp;Long2"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"Long"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">trail_points</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk12">100</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">trail_offset</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk12">0</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">qty_percent</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk12">20</span><span class="mtk13">)</span></span><br></code></div>
<p><font style="vertical-align: inherit;"></font><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_strategy%7Bdot%7Dexit"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">每次调用strategy.exit()</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">时，都会平掉20%的初始仓位
</font><font style="vertical-align: inherit;">
。之前，第一次调用会平掉20%的初始仓位，第二次调用会平掉剩余80%仓位的20%，所以只平掉16%的初始仓位。</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">为内置
</font></font><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_ta%7Bdot%7Dvwap"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ta.vwap()</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
函数添加了两个新参数：</font></font></p>
<ul>
<li><code dir="auto">anchor</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- 指定触发 VWAP 计算重置的条件。当 时</font></font><code dir="auto">true</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，计算重置；当 时</font></font><code dir="auto">false</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，计算将使用自上次重置以来累积的值继续进行。</font></font></li>
<li><code dir="auto">stdev_mult</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- 如果指定，
 </font></font><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_ta%7Bdot%7Dvwap"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ta.vwap()</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
将根据主 VWAP 系列计算标准偏差带并返回一个</font></font><code dir="auto">[vwap, upper_band, lower_band]</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">元组。</font></font></li>
</ul>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
带有参数的</font></font><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_strategy%7Bdot%7Dclose"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">strategy.close()</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
和
</font></font><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_strategy%7Bdot%7Dclose_all"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">strategy.close_all()</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">函数的新重载版本
</font></font><code dir="auto">immediately</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。当</font></font><code dir="auto">immediately</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">设置为时
</font></font><code dir="auto">true</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，平仓订单将在下单时执行，忽略将订单执行限制在下一个柱开盘时的策略参数。</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">添加了新的内置函数：</font></font></p>
<ul>
<li><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_timeframe%7Bdot%7Dchange"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">timeframe.change()</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> -</font><font style="vertical-align: inherit;">
否则</font><font style="vertical-align: inherit;">，返回</font></font><code dir="auto">true</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">新的第一条。</font></font><code dir="auto">timeframe</code><font style="vertical-align: inherit;"></font><code dir="auto">false</code><font style="vertical-align: inherit;"></font></li>
<li><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_ta%7Bdot%7Dpivot_point_levels"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ta.pivot_point_levels()</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - 返回一个浮点数组，其数值代表 11 个枢轴点水平：</font></font><code dir="auto">[P, R1, S1, R2, S2, R3, S3, R4, S4, R5, S5]</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。指定的水平不存在则</font></font><code dir="auto">type</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">返回 na 值。</font></font></li>
</ul>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">添加了新的内置变量：</font></font></p>
<ul>
<li><a href="https://www.tradingview.com/pine-script-reference/v5/#var_session%7Bdot%7Disfirstbar"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">session.isfirstbar-</font></font></a><font style="vertical-align: inherit;"></font><code dir="auto">true</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果当前柱是当日柱的第一个柱则返回，</font></font><code dir="auto">false</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">否则</font><font style="vertical-align: inherit;">返回。</font></font></li>
<li><a href="https://www.tradingview.com/pine-script-reference/v5/#var_session%7Bdot%7Dislastbar"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">session.islastbar-</font></font></a><font style="vertical-align: inherit;"></font><code dir="auto">true</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果当前柱是当日柱的最后一柱则返回，否则</font><font style="vertical-align: inherit;">返回</font></font><code dir="auto">false</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></li>
<li><a href="https://www.tradingview.com/pine-script-reference/v5/#var_session%7Bdot%7Disfirstbar_regular"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">session.isfirstbar_regular</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - 否则，返回</font></font><code dir="auto">true</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">当天第一个常规会话栏</font></font><code dir="auto">false</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
。</font></font></li>
<li><a href="https://www.tradingview.com/pine-script-reference/v5/#var_session%7Bdot%7Dislastbar_regular"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">session.islastbar_regular</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> -</font><font style="vertical-align: inherit;">
否则，返回</font></font><code dir="auto">true</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">当天最后一个常规会话栏。</font></font><code dir="auto">false</code><font style="vertical-align: inherit;"></font></li>
<li><a href="https://www.tradingview.com/pine-script-reference/v5/#var_chart%7Bdot%7Dleft_visible_bar_time"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">chart.left_visible_bar_time</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - 返回</font></font><code dir="auto">time</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图表上当前可见的最左侧条形图。</font></font></li>
<li><a href="https://www.tradingview.com/pine-script-reference/v5/#var_chart%7Bdot%7Dright_visible_bar_time"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">chart.right_visible_bar_time</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - 返回</font></font><code dir="auto">time</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图表上当前可见的最右侧条形图。</font></font></li>
</ul>
<h3 id="may-2022" class="md-heading"><a href="#may-2022"><font style="vertical-align: inherit;"><span class="fancy-wrap"><font style="vertical-align: inherit;">2022 年</font></span><font style="vertical-align: inherit;">5 月</font></font><span class="fancy-wrap"><font style="vertical-align: inherit;"></font><span class="icon icon-link" aria-hidden="true"><svg width="28" height="28" viewBox="0 0 28 28"><g fill="currentColor" clip-path="url(#a)"><path d="M14.908 5.558a5.326 5.326 0 1 1 7.533 7.533l-3.236 3.236-1.061-1.061 3.236-3.236a3.826 3.826 0 1 0-5.411-5.411l-3.236 3.236-1.06-1.06 3.235-3.237ZM5.56 14.907a5.326 5.326 0 0 0 7.532 7.533l3.236-3.236-1.061-1.061-3.236 3.236a3.826 3.826 0 1 1-5.411-5.411l3.236-3.236-1.061-1.06-3.236 3.235Z"></path><path d="m16.346 10.592-5.753 5.753 1.061 1.06 5.753-5.752-1.06-1.06Z"></path></g><defs><clipPath id="a"><path fill="#fff" d="M0 0h28v28H0z"></path></clipPath></defs></svg></span></span></a></h3>
<p><a href="https://www.tradingview.com/pine-script-reference/v5/#type_matrix"><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"></font><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_request%7Bdot%7Dsecurity"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">request.security()</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">函数
中添加了
</font><a href="https://www.tradingview.com/pine-script-reference/v5/#type_matrix"><font style="vertical-align: inherit;">矩阵</font></a><font style="vertical-align: inherit;">支持
。</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
现在可以使用
</font><a href="https://www.tradingview.com/pine-script-reference/v5/#op_%5B%5D"><font style="vertical-align: inherit;">[]运算符引用</font></a></font><a href="https://www.tradingview.com/pine-script-reference/v5/#type_array"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">数组</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
和
</font></font><a href="https://www.tradingview.com/pine-script-reference/v5/#type_matrix"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">矩阵</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">的历史状态
</font><font style="vertical-align: inherit;">
。在下面的示例中，我们引用了 10 个条形图之前的矩阵的历史状态：</font></font><a href="https://www.tradingview.com/pine-script-reference/v5/#op_%5B%5D"><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"></font></p>
<div class="pine-colorizer not-content colorized" data-id="1hh"><div class="pine-colorizer__header"><a class="pine-colorizer__title" href="https://tradingview.com/pine-script-docs/en/v5/Introduction.html" target="_blank" rel="noopener"><span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pine Script™</font></font></span></a><button class="pine-colorizer__copy-btn"><div class="pine-colorizer__tooltip"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">已复制</font></font></div></button></div><code class="monaco-editor-tv-pine-light"><span><span class="mtk9">//</span><span class="mtk9 mtkb">@version=</span><span class="mtk9">5</span></span><br><span><span class="mtk16">indicator</span><span class="mtk13">(</span><span class="mtk29">"matrix.new&lt;float&gt;&nbsp;example"</span><span class="mtk13">)</span></span><br><span><span class="mtk33">m</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">matrix.new</span><span class="mtk13">&lt;</span><span class="mtk18 mtkb">float</span><span class="mtk13">&gt;(</span><span class="mtk12">1</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">1</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk11">close</span><span class="mtk13">)</span></span><br><span><span class="mtk18 mtkb">float</span><span class="mtk1">&nbsp;</span><span class="mtk33">x</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk11">na</span></span><br><span><span class="mtk18">if</span><span class="mtk1">&nbsp;</span><span class="mtk11">bar_index</span><span class="mtk1">&nbsp;</span><span class="mtk18">&gt;</span><span class="mtk1">&nbsp;</span><span class="mtk12">10</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk33">x</span><span class="mtk1">&nbsp;</span><span class="mtk18">:=</span><span class="mtk1">&nbsp;</span><span class="mtk16">matrix.get</span><span class="mtk13">(</span><span class="mtk33">m</span><span class="mtk13">[</span><span class="mtk12">10</span><span class="mtk13">]</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">0</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">0</span><span class="mtk13">)</span></span><br><span><span class="mtk16">plot</span><span class="mtk13">(</span><span class="mtk33">x</span><span class="mtk13">)</span></span><br><span><span class="mtk16">plot</span><span class="mtk13">(</span><span class="mtk11">close</span><span class="mtk13">)</span></span><br></code></div>
<p><font style="vertical-align: inherit;"></font><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_ta%7Bdot%7Dchange"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ta.change()</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">函数
现在可以将</font></font><a href="https://www.tradingview.com/pine-script-reference/v5/#type_int"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">int</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
和
</font></font><a href="https://www.tradingview.com/pine-script-reference/v5/#type_bool"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">bool</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">类型
的值
</font><font style="vertical-align: inherit;">
作为其</font></font><code dir="auto">source</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">参数，并返回相应类型的差异。</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">添加了新的内置变量：</font></font></p>
<ul>
<li><a href="https://www.tradingview.com/pine-script-reference/v5/#var_chart%7Bdot%7Dbg_color"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">chart.bg_color</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - 从字段返回图表背景的颜色
</font></font><code dir="auto">"Chart settings/Appearance/Background"</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></li>
<li><a href="https://www.tradingview.com/pine-script-reference/v5/#var_chart%7Bdot%7Dfg_color"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">chart.fg_color - 返回与</font></font></a><font style="vertical-align: inherit;"></font><a href="https://www.tradingview.com/pine-script-reference/v5/#var_chart%7Bdot%7Dbg_color"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">chart.bg_color</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">提供最佳对比度的颜色
</font><font style="vertical-align: inherit;">。</font></font></li>
<li><a href="https://www.tradingview.com/pine-script-reference/v5/#var_chart%7Bdot%7Dis_standard"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">chart.is_standard</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - 如果图表类型是条形图、蜡烛图、空心蜡烛图、折线图、面积图或基线，则返回 true，否则返回 false。</font></font></li>
<li><a href="https://www.tradingview.com/pine-script-reference/v5/#const_currency%7Bdot%7DUSDT"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">currency.USDT</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ——Tether 货币代码常量。</font></font></li>
</ul>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">添加了新功能：</font></font></p>
<ul>
<li><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_syminfo%7Bdot%7Dprefix"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">syminfo.prefix()</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - 返回传递给它的交易所前缀</font></font><code dir="auto">symbol</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，例如“NASDAQ:AAPL”的前缀“NASDAQ”。</font></font></li>
<li><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_syminfo%7Bdot%7Dticker"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">syminfo.ticker()</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - 返回传递给它的代码</font></font><code dir="auto">symbol</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，不带交易所前缀，例如“NASDAQ:AAPL”的“AAPL”。</font></font></li>
<li><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_request%7Bdot%7Dsecurity_lower_tf"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">request.security_lower_tf()</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - 从比图表更低的时间范围请求数据。</font></font></li>
</ul>
<p><font style="vertical-align: inherit;"></font><code dir="auto">use_bar_magnifier</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">为
</font></font><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_strategy"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">strategy()</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">函数添加了参数</font><font style="vertical-align: inherit;">
。当</font></font><code dir="auto">true</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><a href="/pine-script-docs/concepts/strategies#broker-emulator"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">经纪商模拟器</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
在历史回测期间使用较低的时间范围数据来获得更真实的结果。</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
当价格超出条形价格范围时触发止损时，</font><font style="vertical-align: inherit;">修复
</font></font><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_strategy%7Bdot%7Dexit"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">strategy.exit()函数的行为。</font></font></a><font style="vertical-align: inherit;"></font></p>
<p><font style="vertical-align: inherit;"><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_strategy%7Bdot%7Dexit"><font style="vertical-align: inherit;">为strategy.exit（）</font></a><font style="vertical-align: inherit;">函数添加了新的参数</font></font><code dir="auto">comment</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><code dir="auto">alert</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">消息参数
</font><font style="vertical-align: inherit;">
：</font></font><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_strategy%7Bdot%7Dexit"><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"></font></p>
<ul>
<li><code dir="auto">comment_profit</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- 如果退出是由穿越</font></font><code dir="auto">profit</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或</font></font><code dir="auto">limit</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">特定方式触发的，则订单上有附加说明。</font></font></li>
<li><code dir="auto">comment_loss</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- 如果退出是由穿越</font></font><code dir="auto">stop</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或</font></font><code dir="auto">loss</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">特定方式触发的，则订单上有附加说明。</font></font></li>
<li><code dir="auto">comment_trailing</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- 如果退出是因</font></font><code dir="auto">trail_offset</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">特别穿越而触发的，则订单上有附加注释。</font></font></li>
<li><code dir="auto">alert_profit</code><font style="vertical-align: inherit;"></font><code dir="auto">'{{strategy.order.alert_message}}'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-如果出口是由穿越</font></font><code dir="auto">profit</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或特定方式触发的</font><font style="vertical-align: inherit;">，则用文本代替
占位符</font></font><code dir="auto">limit</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></li>
<li><code dir="auto">alert_loss</code><font style="vertical-align: inherit;"></font><code dir="auto">'{{strategy.order.alert_message}}'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-如果出口是由穿越</font></font><code dir="auto">stop</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或特定方式触发的</font><font style="vertical-align: inherit;">，则用文本代替
占位符</font></font><code dir="auto">loss</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></li>
<li><code dir="auto">alert_trailing</code><font style="vertical-align: inherit;"></font><code dir="auto">'{{strategy.order.alert_message}}'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-如果出口是因特别穿越而触发的，则用</font><font style="vertical-align: inherit;">文本代替
占位符</font></font><code dir="auto">trail_offset</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></li>
</ul>
<h3 id="april-2022" class="md-heading"><a href="#april-2022"><font style="vertical-align: inherit;"><span class="fancy-wrap"><font style="vertical-align: inherit;">2022 年</font></span><font style="vertical-align: inherit;">4 月</font></font><span class="fancy-wrap"><font style="vertical-align: inherit;"></font><span class="icon icon-link" aria-hidden="true"><svg width="28" height="28" viewBox="0 0 28 28"><g fill="currentColor" clip-path="url(#a)"><path d="M14.908 5.558a5.326 5.326 0 1 1 7.533 7.533l-3.236 3.236-1.061-1.061 3.236-3.236a3.826 3.826 0 1 0-5.411-5.411l-3.236 3.236-1.06-1.06 3.235-3.237ZM5.56 14.907a5.326 5.326 0 0 0 7.532 7.533l3.236-3.236-1.061-1.061-3.236 3.236a3.826 3.826 0 1 1-5.411-5.411l3.236-3.236-1.061-1.06-3.236 3.235Z"></path><path d="m16.346 10.592-5.753 5.753 1.061 1.06 5.753-5.752-1.06-1.06Z"></path></g><defs><clipPath id="a"><path fill="#fff" d="M0 0h28v28H0z"></path></clipPath></defs></svg></span></span></a></h3>
<p><font style="vertical-align: inherit;"></font><code dir="auto">display</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">向以下函数
</font><font style="vertical-align: inherit;">添加了参数： </font></font><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_barcolor"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">barcolor</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
 </font></font><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_bgcolor"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">bgcolor</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
 </font></font><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_fill"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">fill</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
 </font></font><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_hline"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">hline</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">添加了新功能：</font></font></p>
<ul>
<li><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_request%7Bdot%7Deconomic"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">request.economic()</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - 经济数据包括一个国家或某个特定行业的经济状况等信息。</font></font></li>
</ul>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">添加了新的内置变量：</font></font></p>
<ul>
<li><a href="https://www.tradingview.com/pine-script-reference/v5/#var_strategy%7Bdot%7Dmax_runup"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">strategies.max_runup</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - 返回整个交易间隔的最大股权上涨值。</font></font></li>
<li><a href="https://www.tradingview.com/pine-script-reference/v5/#var_syminfo%7Bdot%7Dvolumetype"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">syminfo.volumetype</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - 返回当前符号的体积类型。</font></font></li>
<li><a href="https://www.tradingview.com/pine-script-reference/v5/#var_chart%7Bdot%7Dis_heikinashi"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">chart.is_heikinashi</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - 如果图表类型是 Heikin Ashi，则返回 true，否则返回 false。</font></font></li>
<li><a href="https://www.tradingview.com/pine-script-reference/v5/#var_chart%7Bdot%7Dis_kagi"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">chart.is_kagi</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - 如果图表类型是 Kagi，则返回 true，否则返回 false。</font></font></li>
<li><a href="https://www.tradingview.com/pine-script-reference/v5/#var_chart%7Bdot%7Dis_linebreak"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">chart.is_linebreak</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - 如果图表类型是 Line break，则返回 true，否则返回 false。</font></font></li>
<li><a href="https://www.tradingview.com/pine-script-reference/v5/#var_chart%7Bdot%7Dis_pnf"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">chart.is_pnf</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - 如果图表类型是点数图，则返回 true，否则返回 false。</font></font></li>
<li><a href="https://www.tradingview.com/pine-script-reference/v5/#var_chart%7Bdot%7Dis_range"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">chart.is_range</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - 如果图表类型为 Range，则返回 true，否则返回 false。</font></font></li>
<li><a href="https://www.tradingview.com/pine-script-reference/v5/#var_chart%7Bdot%7Dis_renko"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">chart.is_renko</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - 如果图表类型是 Renko，则返回 true，否则返回 false。</font></font></li>
</ul>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">添加了新的矩阵函数：</font></font></p>
<ul>
<li><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_matrix%7Bdot%7Dnew%3Ctype%3E"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">matrix.new&lt;type&gt;()</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - 创建一个新的矩阵对象。矩阵是包含行和列的二维数据结构。矩阵中的所有元素都必须是类型模板（“&lt;type&gt;”）中指定的类型。</font></font></li>
<li><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_matrix%7Bdot%7Drow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">matrix.row()</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - 从矩阵行的元素创建一维数组。</font></font></li>
<li><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_matrix%7Bdot%7Dcol"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">matrix.col()</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - 从矩阵列的元素创建一维数组。</font></font></li>
<li><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_matrix%7Bdot%7Dget"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">matrix.get()</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - 返回矩阵中具有指定索引的元素。</font></font></li>
<li><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_matrix%7Bdot%7Dset"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">matrix.set()</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - 分配给</font><font style="vertical-align: inherit;">矩阵的索引</font><font style="vertical-align: inherit;">处</font></font><code dir="auto">value</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">的元素。</font></font><code dir="auto">column</code><font style="vertical-align: inherit;"></font><code dir="auto">row</code><font style="vertical-align: inherit;"></font></li>
<li><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_matrix%7Bdot%7Drows"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">matrix.rows()</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - 返回矩阵中的行数。</font></font></li>
<li><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_matrix%7Bdot%7Dcolumns"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">matrix.columns()</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - 返回矩阵中的列数。</font></font></li>
<li><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_matrix%7Bdot%7Delements_count"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">matrix.elements_count()</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - 返回矩阵元素的总数。</font></font></li>
<li><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_matrix%7Bdot%7Dadd_row"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">matrix.add_row()</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - 向矩阵添加一行。行可以由</font></font><code dir="auto">na</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值组成，也可以使用数组来提供值。</font></font></li>
<li><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_matrix%7Bdot%7Dadd_col"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">matrix.add_col()</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - 向矩阵添加一列。该列可以由</font></font><code dir="auto">na</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值组成，也可以使用数组来提供值。</font></font></li>
<li><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_matrix%7Bdot%7Dremove_row"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">matrix.remove_row()</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - 删除矩阵的行并返回包含所删除行的值的数组。</font></font></li>
<li><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_matrix%7Bdot%7Dremove_col"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">matrix.remove_col()</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - 删除矩阵的列并返回包含被删除列的值的数组。</font></font></li>
<li><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_matrix%7Bdot%7Dswap_rows"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">matrix.swap_rows()</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - 交换矩阵中的行。</font></font></li>
<li><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_matrix%7Bdot%7Dswap_columns"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">matrix.swap_columns()</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - 交换矩阵中的列。</font></font></li>
<li><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_matrix%7Bdot%7Dfill"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">matrix.fill()</font></font></a><font style="vertical-align: inherit;"></font><code dir="auto">from_column</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - 填充由索引</font><font style="vertical-align: inherit;">定义的矩阵的矩形区域
</font></font><code dir="auto">to_column</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></li>
<li><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_matrix%7Bdot%7Dcopy"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">matrix.copy()</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - 创建一个新矩阵，它是原始矩阵的副本。</font></font></li>
<li><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_matrix%7Bdot%7Dsubmatrix"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">matrix.submatrix()</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - 在指定索引内提取子矩阵。</font></font></li>
<li><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_matrix%7Bdot%7Dreverse"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">matrix.reverse()</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - 反转矩阵中行和列的顺序。第一行和第一列变为最后一行，最后一列变为第一行。</font></font></li>
<li><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_matrix%7Bdot%7Dreshape"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">matrix.reshape()</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - 将矩阵重建为</font></font><code dir="auto">rows</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">x</font></font><code dir="auto">cols</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">维。</font></font></li>
<li><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_matrix%7Bdot%7Dconcat"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">matrix.concat()</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - 将一个矩阵附加到另一个矩阵。</font></font></li>
<li><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_matrix%7Bdot%7Dsum"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">matrix.sum()</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - 返回两个矩阵之和或一个矩阵与一个标量（数值）之和的新矩阵。</font></font></li>
<li><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_matrix%7Bdot%7Ddiff"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">matrix.diff()</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - 返回矩阵之间或矩阵与标量（数值）之间减法得到的新矩阵。</font></font></li>
<li><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_matrix%7Bdot%7Dmult"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">matrix.mult()</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - 返回矩阵之间、矩阵与标量（数值）之间或矩阵与向量（值数组）之间乘积产生的新矩阵。</font></font></li>
<li><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_matrix%7Bdot%7Dsort"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">matrix.sort()</font></font></a><font style="vertical-align: inherit;"></font><code dir="auto">id</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> -按照矩阵中值的排序顺序</font><font style="vertical-align: inherit;">重新排列矩阵中的行</font></font><code dir="auto">column</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></li>
<li><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_matrix%7Bdot%7Davg"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">matrix.avg()</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - 计算矩阵中所有元素的平均值。</font></font></li>
<li><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_matrix%7Bdot%7Dmax"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">matrix.max()</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - 返回矩阵元素中的最大值。</font></font></li>
<li><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_matrix%7Bdot%7Dmin"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">matrix.min()</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - 返回矩阵元素中的最小值。</font></font></li>
<li><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_matrix%7Bdot%7Dmedian"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">matrix.median()</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - 计算矩阵元素的中位数（“中间”值）。</font></font></li>
<li><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_matrix%7Bdot%7Dmode"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">matrix.mode()</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - 计算矩阵的众数，即矩阵元素中出现频率最高的值。当有多个值出现频率相同时，该函数返回这些值中最小的一个。</font></font></li>
<li><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_matrix%7Bdot%7Dpow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">matrix.pow()</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - 计算矩阵与其自身的乘积</font></font><code dir="auto">power</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></li>
<li><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_matrix%7Bdot%7Ddet"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">matrix.det()</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - 返回方阵的行列式。</font></font></li>
<li><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_matrix%7Bdot%7Dtranspose"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">matrix.transpose()</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - 通过交换每个元素的行和列索引创建一个新的矩阵的转置版本。</font></font></li>
<li><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_matrix%7Bdot%7Dpinv"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">matrix.pinv()</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - 返回矩阵的伪逆。</font></font></li>
<li><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_matrix%7Bdot%7Dinv"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">matrix.inv()</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - 返回方阵的逆。</font></font></li>
<li><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_matrix%7Bdot%7Drank"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">matrix.rank()</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - 计算矩阵的秩。</font></font></li>
<li><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_matrix%7Bdot%7Deigenvalues"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">matrix.trace()</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - 计算矩阵的迹（主对角线元素的总和）。</font></font></li>
<li><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_matrix%7Bdot%7Deigenvectors"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">matrix.eigenvalues()</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - 返回包含方阵特征值的数组。</font></font></li>
<li><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_matrix%7Bdot%7D"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">matrix.eigenvectors()</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - 返回一个特征向量矩阵，其中每一列都是矩阵的特征向量。</font></font></li>
<li><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_matrix%7Bdot%7Dkronis_zero"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">matrix.kron()</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - 返回两个矩阵的克罗内克积。</font></font></li>
<li><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_matrix%7Bdot%7Dis_zero"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">matrix.is_zero()</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - 确定矩阵的所有元素是否为零。</font></font></li>
<li><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_matrix%7Bdot%7Dis_identity"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">matrix.is_identity()</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - 确定矩阵是否为单位矩阵（主对角线上的元素为 1，其他位置为 0）。</font></font></li>
<li><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_matrix%7Bdot%7Dis_binary"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">matrix.is_binary()</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - 确定矩阵是否为二进制（当矩阵的所有元素均为 0 或 1 时）。</font></font></li>
<li><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_matrix%7Bdot%7Dis_symmetric"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">matrix.is_symmetric()</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - 确定方阵是否对称（元素关于主对角线对称）。</font></font></li>
<li><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_matrix%7Bdot%7Dis_antisymmetric"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">matrix.is_antisymmetric()</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - 确定矩阵是否是反对称的（其转置等于其负数）。</font></font></li>
<li><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_matrix%7Bdot%7Dis_diagonal"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">matrix.is_diagonal()</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - 确定矩阵是否是对角线的（主对角线之外的所有元素均为零）。</font></font></li>
<li><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_matrix%7Bdot%7Dis_antidiagonal"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">matrix.is_antidiagonal()</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - 确定矩阵是否是反对角线的（次对角线之外的所有元素均为零）。</font></font></li>
<li><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_matrix%7Bdot%7Dis_triangular"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">matrix.is_triangular()</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - 确定矩阵是否为三角矩阵（如果主对角线上方或下方的所有元素都为零）。</font></font></li>
<li><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_matrix%7Bdot%7Dis_stochastic"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">matrix.is_stochastic()</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - 确定矩阵是否随机。</font></font></li>
<li><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_matrix%7Bdot%7Dis_square"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">matrix.is_square()</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - 确定矩阵是否为正方形（具有相同数量的行和列）。</font></font></li>
</ul>
<p><font style="vertical-align: inherit;"></font><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_strategy"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">为strategy（）</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">函数添加了一个新参数
</font><font style="vertical-align: inherit;">
：</font></font></p>
<ul>
<li><code dir="auto">risk_free_rate</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- 无风险回报率是风险极小或为零的投资价值的年度百分比变化，用于计算夏普比率和索提诺比率。</font></font></li>
</ul>
<h3 id="march-2022" class="md-heading"><a href="#march-2022"><font style="vertical-align: inherit;"><span class="fancy-wrap"><font style="vertical-align: inherit;">2022 年</font></span><font style="vertical-align: inherit;">3 月</font></font><span class="fancy-wrap"><font style="vertical-align: inherit;"></font><span class="icon icon-link" aria-hidden="true"><svg width="28" height="28" viewBox="0 0 28 28"><g fill="currentColor" clip-path="url(#a)"><path d="M14.908 5.558a5.326 5.326 0 1 1 7.533 7.533l-3.236 3.236-1.061-1.061 3.236-3.236a3.826 3.826 0 1 0-5.411-5.411l-3.236 3.236-1.06-1.06 3.235-3.237ZM5.56 14.907a5.326 5.326 0 0 0 7.532 7.533l3.236-3.236-1.061-1.061-3.236 3.236a3.826 3.826 0 1 1-5.411-5.411l3.236-3.236-1.061-1.06-3.236 3.235Z"></path><path d="m16.346 10.592-5.753 5.753 1.061 1.06 5.753-5.752-1.06-1.06Z"></path></g><defs><clipPath id="a"><path fill="#fff" d="M0 0h28v28H0z"></path></clipPath></defs></svg></span></span></a></h3>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">添加了新的数组函数：</font></font></p>
<ul>
<li><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_array%7Bdot%7Dsort_indices"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">array.sort_indices()</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - 返回一个索引数组，当用于索引原始数组时，将按照排序顺序访问其元素。</font></font></li>
<li><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_array%7Bdot%7Dpercentrank"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">array.percentrank()</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - 返回数组中值的百分位等级。</font></font></li>
<li><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_array%7Bdot%7Dpercentile_nearest_rank"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">array.percentile_nearest_rank()</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - 使用最近等级法返回指定百分比的数组值（百分位数）小于或等于它的值。</font></font></li>
<li><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_array%7Bdot%7Dpercentile_linear_interpolation"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">array.percentile_linear_interpolation()</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - 使用线性插值返回指定百分比的数组值（百分位数）小于或等于它的值。</font></font></li>
<li><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_array%7Bdot%7Dabs"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">array.abs()</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - 返回一个包含原始数组中每个元素的绝对值的数组。</font></font></li>
<li><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_array%7Bdot%7Dbinary_search"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">array.binary_search()</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - 返回值的索引，如果未找到该值，则返回 -1。</font></font></li>
<li><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_array%7Bdot%7Dbinary_search_leftmost"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">array.binary_search_leftmost()</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - 如果找到该值，则返回该值的索引，或者如果该值在数组中，则返回该值所在位置左侧的下一个最小元素的索引。</font></font></li>
<li><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_array%7Bdot%7Dbinary_search_rightmost"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">array.binary_search_rightmost()</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - 如果找到值，则返回该值的索引；如果值在数组中，则返回该值右侧元素的索引。</font></font></li>
</ul>
<p><font style="vertical-align: inherit;"></font><code dir="auto">nth</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">为
</font></font><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_array%7Bdot%7Dmin"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">array.min()</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
和
</font></font><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_array%7Bdot%7Dmax"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">array.max()</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
函数</font><font style="vertical-align: inherit;">添加了一个新的可选参数。</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">添加了</font></font><code dir="auto">index</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">for..in
</font></font><a href="https://www.tradingview.com/pine-script-reference/v5/#op_for%7Bdot%7D%7Bdot%7D%7Bdot%7Din"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">运算</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
符。它跟踪当前迭代的索引。</font></font></p>
<h4 id="table-merging-and-cell-tooltips" class="md-heading"><a href="#table-merging-and-cell-tooltips"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表格合并和单元格</font></font><span class="fancy-wrap"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">工具提示</font></font><span class="icon icon-link" aria-hidden="true"><svg width="28" height="28" viewBox="0 0 28 28"><g fill="currentColor" clip-path="url(#a)"><path d="M14.908 5.558a5.326 5.326 0 1 1 7.533 7.533l-3.236 3.236-1.061-1.061 3.236-3.236a3.826 3.826 0 1 0-5.411-5.411l-3.236 3.236-1.06-1.06 3.235-3.237ZM5.56 14.907a5.326 5.326 0 0 0 7.532 7.533l3.236-3.236-1.061-1.061-3.236 3.236a3.826 3.826 0 1 1-5.411-5.411l3.236-3.236-1.061-1.06-3.236 3.235Z"></path><path d="m16.346 10.592-5.753 5.753 1.061 1.06 5.753-5.752-1.06-1.06Z"></path></g><defs><clipPath id="a"><path fill="#fff" d="M0 0h28v28H0z"></path></clipPath></defs></svg></span></span></a></h4>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">现在可以合并表格中的多个单元格。合并的单元格不必是标题：您可以向任意方向合并单元格，只要合并后的单元格不会影响任何已合并的单元格，也不会超出表格的边界。可以使用新的
</font></font><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_table%7Bdot%7Dmerge_cells"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">table.merge_cells()</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
函数合并单元格。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表格现在支持工具提示，即当您将鼠标悬停在表格单元格上时出现的浮动标签。要添加工具提示，请将字符串传递给
</font><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_table%7Bdot%7Dcell"><font style="vertical-align: inherit;">table.cell()</font></a></font><code dir="auto">tooltip</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">函数的参数
</font><font style="vertical-align: inherit;">
或使用新的
</font><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_table%7Bdot%7Dcell_set_tooltip"><font style="vertical-align: inherit;">table.cell_set_tooltip()</font></a><font style="vertical-align: inherit;">
函数。</font></font><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_table%7Bdot%7Dcell"><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"></font><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_table%7Bdot%7Dcell_set_tooltip"><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"></font></li>
</ul>
<h3 id="february-2022" class="md-heading"><a href="#february-2022"><font style="vertical-align: inherit;"><span class="fancy-wrap"><font style="vertical-align: inherit;">2022 年</font></span><font style="vertical-align: inherit;">2 月</font></font><span class="fancy-wrap"><font style="vertical-align: inherit;"></font><span class="icon icon-link" aria-hidden="true"><svg width="28" height="28" viewBox="0 0 28 28"><g fill="currentColor" clip-path="url(#a)"><path d="M14.908 5.558a5.326 5.326 0 1 1 7.533 7.533l-3.236 3.236-1.061-1.061 3.236-3.236a3.826 3.826 0 1 0-5.411-5.411l-3.236 3.236-1.06-1.06 3.235-3.237ZM5.56 14.907a5.326 5.326 0 0 0 7.532 7.533l3.236-3.236-1.061-1.061-3.236 3.236a3.826 3.826 0 1 1-5.411-5.411l3.236-3.236-1.061-1.06-3.236 3.235Z"></path><path d="m16.346 10.592-5.753 5.753 1.061 1.06 5.753-5.752-1.06-1.06Z"></path></g><defs><clipPath id="a"><path fill="#fff" d="M0 0h28v28H0z"></path></clipPath></defs></svg></span></span></a></h3>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">添加了模板和通过模板创建数组的功能。除了使用其中一个函数外</font></font><code dir="auto">array.new_*()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，还可以使用模板函数
</font></font><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_array%7Bdot%7Dnew%3Ctype%3E"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">array.new&lt;type&gt;()</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
。在下面的示例中，我们使用此功能创建一个填充</font></font><code dir="auto">float</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值的数组：</font></font></p>
<div class="pine-colorizer not-content colorized" data-id="1g9"><div class="pine-colorizer__header"><a class="pine-colorizer__title" href="https://tradingview.com/pine-script-docs/en/v5/Introduction.html" target="_blank" rel="noopener"><span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pine Script™</font></font></span></a><button class="pine-colorizer__copy-btn"><div class="pine-colorizer__tooltip"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">已复制</font></font></div></button></div><code class="monaco-editor-tv-pine-light"><span><span class="mtk9">//</span><span class="mtk9 mtkb">@version=</span><span class="mtk9">5</span></span><br><span><span class="mtk16">indicator</span><span class="mtk13">(</span><span class="mtk29">"array.new&lt;float&gt;&nbsp;example"</span><span class="mtk13">)</span></span><br><span><span class="mtk33">length</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk12">5</span></span><br><span><span class="mtk18">var</span><span class="mtk1">&nbsp;</span><span class="mtk33">a</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">array.new</span><span class="mtk13">&lt;</span><span class="mtk18 mtkb">float</span><span class="mtk13">&gt;(</span><span class="mtk33">length</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk11">close</span><span class="mtk13">)</span></span><br><span><span class="mtk18">if</span><span class="mtk1">&nbsp;</span><span class="mtk16">array.size</span><span class="mtk13">(</span><span class="mtk33">a</span><span class="mtk13">)</span><span class="mtk1">&nbsp;</span><span class="mtk18">==</span><span class="mtk1">&nbsp;</span><span class="mtk33">length</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk16">array.remove</span><span class="mtk13">(</span><span class="mtk33">a</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">0</span><span class="mtk13">)</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk16">array.push</span><span class="mtk13">(</span><span class="mtk33">a</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk11">close</span><span class="mtk13">)</span></span><br><span><span class="mtk16">plot</span><span class="mtk13">(</span><span class="mtk16">array.sum</span><span class="mtk13">(</span><span class="mtk33">a</span><span class="mtk13">)</span><span class="mtk1">&nbsp;</span><span class="mtk18">/</span><span class="mtk1">&nbsp;</span><span class="mtk33">length</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"SMA"</span><span class="mtk13">)</span></span><br></code></div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">添加了新功能：</font></font></p>
<ul>
<li><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_timeframe%7Bdot%7Din_seconds"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">timeframe.in_seconds(timeframe)</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - 将传递给参数的时间范围转换</font></font><code dir="auto">timeframe</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">为秒。</font></font></li>
<li><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_input%7Bdot%7Dtext_area"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">input.text_area()</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - 将多行文本输入区域添加到脚本设置。</font></font></li>
<li><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_strategy%7Bdot%7Dclosedtrades%7Bdot%7Dentry_id"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">strategies.closedtrades.entry_id()</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - 返回已关闭交易的条目的 id。</font></font></li>
<li><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_strategy%7Bdot%7Dclosedtrades%7Bdot%7Dexit_id"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">strategies.closedtrades.exit_id()</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - 返回已关闭交易的退出 ID。</font></font></li>
<li><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_strategy%7Bdot%7Dopentrades%7Bdot%7Dentry_id"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">strategies.opentrades.entry_id()</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - 返回开放交易条目的 id。</font></font></li>
</ul>
<h3 id="january-2022" class="md-heading"><a href="#january-2022"><font style="vertical-align: inherit;"><span class="fancy-wrap"><font style="vertical-align: inherit;">2022 年</font></span><font style="vertical-align: inherit;">1 月</font></font><span class="fancy-wrap"><font style="vertical-align: inherit;"></font><span class="icon icon-link" aria-hidden="true"><svg width="28" height="28" viewBox="0 0 28 28"><g fill="currentColor" clip-path="url(#a)"><path d="M14.908 5.558a5.326 5.326 0 1 1 7.533 7.533l-3.236 3.236-1.061-1.061 3.236-3.236a3.826 3.826 0 1 0-5.411-5.411l-3.236 3.236-1.06-1.06 3.235-3.237ZM5.56 14.907a5.326 5.326 0 0 0 7.532 7.533l3.236-3.236-1.061-1.061-3.236 3.236a3.826 3.826 0 1 1-5.411-5.411l3.236-3.236-1.061-1.06-3.236 3.235Z"></path><path d="m16.346 10.592-5.753 5.753 1.061 1.06 5.753-5.752-1.06-1.06Z"></path></g><defs><clipPath id="a"><path fill="#fff" d="M0 0h28v28H0z"></path></clipPath></defs></svg></span></span></a></h3>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">增加了克隆图纸的新功能：</font></font></p>
<ul>
<li><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_line%7Bdot%7Dcopy"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">行.复制()</font></font></a></li>
<li><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_label%7Bdot%7Dcopy"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">标签.复制()</font></font></a></li>
<li><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_box%7Bdot%7Dcopy"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">盒子.复制（）</font></font></a></li>
</ul>
<h2 id="2021" class="md-heading"><a href="#2021"> <span class="fancy-wrap"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2021</font></font><span class="icon icon-link" aria-hidden="true"><svg width="28" height="28" viewBox="0 0 28 28"><g fill="currentColor" clip-path="url(#a)"><path d="M14.908 5.558a5.326 5.326 0 1 1 7.533 7.533l-3.236 3.236-1.061-1.061 3.236-3.236a3.826 3.826 0 1 0-5.411-5.411l-3.236 3.236-1.06-1.06 3.235-3.237ZM5.56 14.907a5.326 5.326 0 0 0 7.532 7.533l3.236-3.236-1.061-1.061-3.236 3.236a3.826 3.826 0 1 1-5.411-5.411l3.236-3.236-1.061-1.06-3.236 3.235Z"></path><path d="m16.346 10.592-5.753 5.753 1.061 1.06 5.753-5.752-1.06-1.06Z"></path></g><defs><clipPath id="a"><path fill="#fff" d="M0 0h28v28H0z"></path></clipPath></defs></svg></span></span></a></h2>
<h3 id="december-2021" class="md-heading"><a href="#december-2021"><font style="vertical-align: inherit;"><span class="fancy-wrap"><font style="vertical-align: inherit;">2021 年</font></span><font style="vertical-align: inherit;">12 月</font></font><span class="fancy-wrap"><font style="vertical-align: inherit;"></font><span class="icon icon-link" aria-hidden="true"><svg width="28" height="28" viewBox="0 0 28 28"><g fill="currentColor" clip-path="url(#a)"><path d="M14.908 5.558a5.326 5.326 0 1 1 7.533 7.533l-3.236 3.236-1.061-1.061 3.236-3.236a3.826 3.826 0 1 0-5.411-5.411l-3.236 3.236-1.06-1.06 3.235-3.237ZM5.56 14.907a5.326 5.326 0 0 0 7.532 7.533l3.236-3.236-1.061-1.061-3.236 3.236a3.826 3.826 0 1 1-5.411-5.411l3.236-3.236-1.061-1.06-3.236 3.235Z"></path><path d="m16.346 10.592-5.753 5.753 1.061 1.06 5.753-5.752-1.06-1.06Z"></path></g><defs><clipPath id="a"><path fill="#fff" d="M0 0h28v28H0z"></path></clipPath></defs></svg></span></span></a></h3>
<h4 id="linefills" class="md-heading"><a href="#linefills"> <span class="fancy-wrap"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">线填充</font></font><span class="icon icon-link" aria-hidden="true"><svg width="28" height="28" viewBox="0 0 28 28"><g fill="currentColor" clip-path="url(#a)"><path d="M14.908 5.558a5.326 5.326 0 1 1 7.533 7.533l-3.236 3.236-1.061-1.061 3.236-3.236a3.826 3.826 0 1 0-5.411-5.411l-3.236 3.236-1.06-1.06 3.235-3.237ZM5.56 14.907a5.326 5.326 0 0 0 7.532 7.533l3.236-3.236-1.061-1.061-3.236 3.236a3.826 3.826 0 1 1-5.411-5.411l3.236-3.236-1.061-1.06-3.236 3.235Z"></path><path d="m16.346 10.592-5.753 5.753 1.061 1.06 5.753-5.752-1.06-1.06Z"></path></g><defs><clipPath id="a"><path fill="#fff" d="M0 0h28v28H0z"></path></clipPath></defs></svg></span></span></a></h4>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">现在可以填充在 Pine Script™ 中绘制的线条之间的空间！我们添加了一种新的</font></font><code dir="auto">linefill</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">绘图类型，以及许多专用于操作它的函数。通过将两条线和一种颜色传递给函数来创建线填充</font></font><code dir="auto">linefill.new()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，它们的行为基于它们所绑定的线：它们沿与线相同的方向延伸，当它们的线移动时移动，并且当两条线中的一条被删除时被删除。</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">新的行填充相关函数：</font></font></p>
<ul>
<li><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_array%7Bdot%7Dnew_linefill"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">数组.new_linefill()</font></font></a></li>
<li><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_linefill"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">行填充()</font></font></a></li>
<li><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_linefill%7Bdot%7Ddelete"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">行填充.删除()</font></font></a></li>
<li><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_linefill%7Bdot%7Dget_line1"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">linefill.get_line1()</font></font></a></li>
<li><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_linefill%7Bdot%7Dget_line2"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">linefill.get_line2()</font></font></a></li>
<li><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_linefill%7Bdot%7Dnew"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">linefill.new()</font></font></a></li>
<li><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_linefill%7Bdot%7Dset_color"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">线条填充.设置颜色()</font></font></a></li>
<li><a href="https://www.tradingview.com/pine-script-reference/v5/#var_linefill%7Bdot%7Dall"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">行填充.全部()</font></font></a></li>
</ul>
<h4 id="new-functions-for-string-manipulation" class="md-heading"><a href="#new-functions-for-string-manipulation"><font style="vertical-align: inherit;"><span class="fancy-wrap"><font style="vertical-align: inherit;">字符串操作</font></span><font style="vertical-align: inherit;">的新函数</font></font><span class="fancy-wrap"><font style="vertical-align: inherit;"></font><span class="icon icon-link" aria-hidden="true"><svg width="28" height="28" viewBox="0 0 28 28"><g fill="currentColor" clip-path="url(#a)"><path d="M14.908 5.558a5.326 5.326 0 1 1 7.533 7.533l-3.236 3.236-1.061-1.061 3.236-3.236a3.826 3.826 0 1 0-5.411-5.411l-3.236 3.236-1.06-1.06 3.235-3.237ZM5.56 14.907a5.326 5.326 0 0 0 7.532 7.533l3.236-3.236-1.061-1.061-3.236 3.236a3.826 3.826 0 1 1-5.411-5.411l3.236-3.236-1.061-1.06-3.236 3.235Z"></path><path d="m16.346 10.592-5.753 5.753 1.061 1.06 5.753-5.752-1.06-1.06Z"></path></g><defs><clipPath id="a"><path fill="#fff" d="M0 0h28v28H0z"></path></clipPath></defs></svg></span></span></a></h4>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">添加了许多新功能，提供更多处理字符串的方法，并将正则表达式引入 Pine Script™：</font></font></p>
<ul>
<li><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_str%7Bdot%7Dcontains"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">str.contains(source, str)</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - 确定</font></font><code dir="auto">source</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">字符串是否包含</font></font><code dir="auto">str</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">子字符串。</font></font></li>
<li><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_str%7Bdot%7Dpos"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">str.pos(source, str)</font></font></a><font style="vertical-align: inherit;"></font><code dir="auto">str</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - 返回字符串在字符串中</font><font style="vertical-align: inherit;">的位置</font></font><code dir="auto">source</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></li>
<li><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_str%7Bdot%7Dsubstring"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">str.substring(source, begin_pos, end_pos)</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - 从字符串中提取子字符串</font></font><code dir="auto">source</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></li>
<li><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_str%7Bdot%7Dreplace"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">str.replace(source, target, replacement, indication) - 与现有的</font></font></a><font style="vertical-align: inherit;"></font><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_str%7Bdot%7Dreplace_all"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">str.replace_all()</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">函数相反
</font><font style="vertical-align: inherit;">
，</font></font><code dir="auto">str.replace()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">允许用替换字符串选择性地替换匹配的子字符串。</font></font></li>
<li><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_str%7Bdot%7Dlower"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">str.lower(source)</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
和
</font></font><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_str%7Bdot%7Dupper"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">str.upper(source)</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - 将</font></font><code dir="auto">source</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">字符串的所有字母转换为小写或大写：</font></font></li>
<li><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_str%7Bdot%7Dstartswith"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">str.startswith(source, str)</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
和</font></font><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_str%7Bdot%7Dendswith"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">str.endswith(source, str)</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - 确定</font></font><code dir="auto">source</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">字符串是否以子字符串开始或结束</font></font><code dir="auto">str</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
。</font></font></li>
<li><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_str%7Bdot%7Dmatch"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">str.match(source, regex)</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - 提取与指定</font></font><a href="https://en.wikipedia.org/wiki/Regular_expression#Perl_and_PCRE" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">正则表达式</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">匹配的子字符串。</font></font></li>
</ul>
<h4 id="textboxes" class="md-heading"><a href="#textboxes"> <span class="fancy-wrap"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">文本框</font></font><span class="icon icon-link" aria-hidden="true"><svg width="28" height="28" viewBox="0 0 28 28"><g fill="currentColor" clip-path="url(#a)"><path d="M14.908 5.558a5.326 5.326 0 1 1 7.533 7.533l-3.236 3.236-1.061-1.061 3.236-3.236a3.826 3.826 0 1 0-5.411-5.411l-3.236 3.236-1.06-1.06 3.235-3.237ZM5.56 14.907a5.326 5.326 0 0 0 7.532 7.533l3.236-3.236-1.061-1.061-3.236 3.236a3.826 3.826 0 1 1-5.411-5.411l3.236-3.236-1.061-1.06-3.236 3.235Z"></path><path d="m16.346 10.592-5.753 5.753 1.061 1.06 5.753-5.752-1.06-1.06Z"></path></g><defs><clipPath id="a"><path fill="#fff" d="M0 0h28v28H0z"></path></clipPath></defs></svg></span></span></a></h4>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">方框绘图现在支持文本。
 </font></font><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_box%7Bdot%7Dnew"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">box.new()</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
函数有五个用于文本操作的新参数：</font></font><code dir="auto">text</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、
 </font></font><code dir="auto">text_size</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、</font></font><code dir="auto">text_color</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、</font></font><code dir="auto">text_valign</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><code dir="auto">text_halign</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。此外，还添加了五个用于设置现有方框文本属性的新函数：</font></font></p>
<ul>
<li><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_box%7Bdot%7Dset_text"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">框.设置文本（）</font></font></a></li>
<li><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_box%7Bdot%7Dset_text_color"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">框.设置文本颜色（）</font></font></a></li>
<li><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_box%7Bdot%7Dset_text_size"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">框.设置文本大小（）</font></font></a></li>
<li><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_box%7Bdot%7Dset_text_valign"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">框.设置文本对齐（）</font></font></a></li>
<li><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_box%7Bdot%7Dset_text_halign"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">box.set_text_halign()</font></font></a></li>
</ul>
<h4 id="new-built-in-variables" class="md-heading"><a href="#new-built-in-variables"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">新的内置</font></font><span class="fancy-wrap"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">变量</font></font><span class="icon icon-link" aria-hidden="true"><svg width="28" height="28" viewBox="0 0 28 28"><g fill="currentColor" clip-path="url(#a)"><path d="M14.908 5.558a5.326 5.326 0 1 1 7.533 7.533l-3.236 3.236-1.061-1.061 3.236-3.236a3.826 3.826 0 1 0-5.411-5.411l-3.236 3.236-1.06-1.06 3.235-3.237ZM5.56 14.907a5.326 5.326 0 0 0 7.532 7.533l3.236-3.236-1.061-1.061-3.236 3.236a3.826 3.826 0 1 1-5.411-5.411l3.236-3.236-1.061-1.06-3.236 3.235Z"></path><path d="m16.346 10.592-5.753 5.753 1.061 1.06 5.753-5.752-1.06-1.06Z"></path></g><defs><clipPath id="a"><path fill="#fff" d="M0 0h28v28H0z"></path></clipPath></defs></svg></span></span></a></h4>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">添加了新的内置变量，用于返回数据集中最后一根柱线的</font></font><code dir="auto">bar_index</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><code dir="auto">time</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
值。它们的值在脚本计算开始时已知：</font></font></p>
<ul>
<li><a href="https://www.tradingview.com/pine-script-reference/v5/#var_last_bar_index"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">last_bar_index</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - 图表最后一条条形图的条形图索引。</font></font></li>
<li><a href="https://www.tradingview.com/pine-script-reference/v5/#var_last_bar_time"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">last_bar_time-</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">最后一个图表条的 UNIX 时间。</font></font></li>
</ul>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">新的内置</font></font><code dir="auto">source</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">变量：</font></font></p>
<ul>
<li><a href="https://www.tradingview.com/pine-script-reference/v5/#var_hlcc4"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">hlcc4</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - 的快捷方式</font></font><code dir="auto">(high + low + close + close)/4</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。它使用双倍加权收盘价平均最高值和最低值。</font></font></li>
</ul>
<h3 id="november-2021" class="md-heading"><a href="#november-2021"><font style="vertical-align: inherit;"><span class="fancy-wrap"><font style="vertical-align: inherit;">2021 年</font></span><font style="vertical-align: inherit;">11 月</font></font><span class="fancy-wrap"><font style="vertical-align: inherit;"></font><span class="icon icon-link" aria-hidden="true"><svg width="28" height="28" viewBox="0 0 28 28"><g fill="currentColor" clip-path="url(#a)"><path d="M14.908 5.558a5.326 5.326 0 1 1 7.533 7.533l-3.236 3.236-1.061-1.061 3.236-3.236a3.826 3.826 0 1 0-5.411-5.411l-3.236 3.236-1.06-1.06 3.235-3.237ZM5.56 14.907a5.326 5.326 0 0 0 7.532 7.533l3.236-3.236-1.061-1.061-3.236 3.236a3.826 3.826 0 1 1-5.411-5.411l3.236-3.236-1.061-1.06-3.236 3.235Z"></path><path d="m16.346 10.592-5.753 5.753 1.061 1.06 5.753-5.752-1.06-1.06Z"></path></g><defs><clipPath id="a"><path fill="#fff" d="M0 0h28v28H0z"></path></clipPath></defs></svg></span></span></a></h3>
<h4 id="forin" class="md-heading"><a href="#forin"> <span class="fancy-wrap"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">对于…在</font></font><span class="icon icon-link" aria-hidden="true"><svg width="28" height="28" viewBox="0 0 28 28"><g fill="currentColor" clip-path="url(#a)"><path d="M14.908 5.558a5.326 5.326 0 1 1 7.533 7.533l-3.236 3.236-1.061-1.061 3.236-3.236a3.826 3.826 0 1 0-5.411-5.411l-3.236 3.236-1.06-1.06 3.235-3.237ZM5.56 14.907a5.326 5.326 0 0 0 7.532 7.533l3.236-3.236-1.061-1.061-3.236 3.236a3.826 3.826 0 1 1-5.411-5.411l3.236-3.236-1.061-1.06-3.236 3.235Z"></path><path d="m16.346 10.592-5.753 5.753 1.061 1.06 5.753-5.752-1.06-1.06Z"></path></g><defs><clipPath id="a"><path fill="#fff" d="M0 0h28v28H0z"></path></clipPath></defs></svg></span></span></a></h4>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">添加了新的
</font></font><a href="https://www.tradingview.com/pine-script-reference/v5/#op_for%7Bdot%7D%7Bdot%7D%7Bdot%7Din"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">for...in</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
运算符来迭代数组的所有元素：</font></font></p>
<div class="pine-colorizer not-content colorized" data-id="5cu"><div class="pine-colorizer__header"><a class="pine-colorizer__title" href="https://tradingview.com/pine-script-docs/en/v5/Introduction.html" target="_blank" rel="noopener"><span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pine Script™</font></font></span></a><button class="pine-colorizer__copy-btn"><div class="pine-colorizer__tooltip"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">已复制</font></font></div></button></div><code class="monaco-editor-tv-pine-light"><span><span class="mtk9">//</span><span class="mtk9 mtkb">@version=</span><span class="mtk9">5</span></span><br><span><span class="mtk16">indicator</span><span class="mtk13">(</span><span class="mtk29">"My&nbsp;Script"</span><span class="mtk13">)</span></span><br><span><span class="mtk18 mtkb">int</span><span class="mtk13">[]</span><span class="mtk1">&nbsp;</span><span class="mtk33">a1</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">array.from</span><span class="mtk13">(</span><span class="mtk12">1</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">3</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">6</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">3</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">8</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">0</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">-9</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">5</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk15">highest</span><span class="mtk13">(</span><span class="mtk33">array</span><span class="mtk13">)</span><span class="mtk1">&nbsp;</span><span class="mtk18">=&gt;</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk18">var</span><span class="mtk1">&nbsp;</span><span class="mtk18 mtkb">int</span><span class="mtk1">&nbsp;</span><span class="mtk33">highestNum</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk11">na</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk18">for</span><span class="mtk1">&nbsp;</span><span class="mtk33">item</span><span class="mtk1">&nbsp;</span><span class="mtk18">in</span><span class="mtk1">&nbsp;</span><span class="mtk18 mtkb">array</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk18">if</span><span class="mtk1">&nbsp;</span><span class="mtk16">na</span><span class="mtk13">(</span><span class="mtk33">highestNum</span><span class="mtk13">)</span><span class="mtk1">&nbsp;</span><span class="mtk18">or</span><span class="mtk1">&nbsp;</span><span class="mtk33">item</span><span class="mtk1">&nbsp;</span><span class="mtk18">&gt;</span><span class="mtk1">&nbsp;</span><span class="mtk33">highestNum</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk33">highestNum</span><span class="mtk1">&nbsp;</span><span class="mtk18">:=</span><span class="mtk1">&nbsp;</span><span class="mtk33">item</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk33">highestNum</span></span><br><span><span></span></span><br><span><span class="mtk16">plot</span><span class="mtk13">(</span><span class="mtk33">highest</span><span class="mtk13">(</span><span class="mtk33">a1</span><span class="mtk13">))</span></span><br></code></div>
<h4 id="function-overloads" class="md-heading"><a href="#function-overloads"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">函数</font></font><span class="fancy-wrap"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">重载</font></font><span class="icon icon-link" aria-hidden="true"><svg width="28" height="28" viewBox="0 0 28 28"><g fill="currentColor" clip-path="url(#a)"><path d="M14.908 5.558a5.326 5.326 0 1 1 7.533 7.533l-3.236 3.236-1.061-1.061 3.236-3.236a3.826 3.826 0 1 0-5.411-5.411l-3.236 3.236-1.06-1.06 3.235-3.237ZM5.56 14.907a5.326 5.326 0 0 0 7.532 7.533l3.236-3.236-1.061-1.061-3.236 3.236a3.826 3.826 0 1 1-5.411-5.411l3.236-3.236-1.061-1.06-3.236 3.235Z"></path><path d="m16.346 10.592-5.753 5.753 1.061 1.06 5.753-5.752-1.06-1.06Z"></path></g><defs><clipPath id="a"><path fill="#fff" d="M0 0h28v28H0z"></path></clipPath></defs></svg></span></span></a></h4>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">添加了函数重载。只要满足以下条件之一，脚本中的多个函数现在可以共享相同的名称：</font></font></p>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">每个重载都有不同数量的参数：</font></font></li>
</ul>
<div class="pine-colorizer not-content colorized" data-id="2e2"><div class="pine-colorizer__header"><a class="pine-colorizer__title" href="https://tradingview.com/pine-script-docs/en/v5/Introduction.html" target="_blank" rel="noopener"><span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pine Script™</font></font></span></a><button class="pine-colorizer__copy-btn"><div class="pine-colorizer__tooltip"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">已复制</font></font></div></button></div><code class="monaco-editor-tv-pine-light"><span><span class="mtk9">//</span><span class="mtk9 mtkb">@version=</span><span class="mtk9">5</span></span><br><span><span class="mtk16">indicator</span><span class="mtk13">(</span><span class="mtk29">"Function&nbsp;overload"</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk9">//&nbsp;Two&nbsp;parameters</span></span><br><span><span class="mtk15">mult</span><span class="mtk13">(</span><span class="mtk33">x1</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">x2</span><span class="mtk13">)</span><span class="mtk1">&nbsp;</span><span class="mtk18">=&gt;</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk33">x1</span><span class="mtk1">&nbsp;</span><span class="mtk18">*</span><span class="mtk1">&nbsp;</span><span class="mtk33">x2</span></span><br><span><span></span></span><br><span><span class="mtk9">//&nbsp;Three&nbsp;parameters</span></span><br><span><span class="mtk15">mult</span><span class="mtk13">(</span><span class="mtk33">x1</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">x2</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">x3</span><span class="mtk13">)</span><span class="mtk1">&nbsp;</span><span class="mtk18">=&gt;</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk33">x1</span><span class="mtk1">&nbsp;</span><span class="mtk18">*</span><span class="mtk1">&nbsp;</span><span class="mtk33">x2</span><span class="mtk1">&nbsp;</span><span class="mtk18">*</span><span class="mtk1">&nbsp;</span><span class="mtk33">x3</span></span><br><span><span></span></span><br><span><span class="mtk16">plot</span><span class="mtk13">(</span><span class="mtk33">mult</span><span class="mtk13">(</span><span class="mtk12">7</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">4</span><span class="mtk13">))</span></span><br><span><span class="mtk16">plot</span><span class="mtk13">(</span><span class="mtk33">mult</span><span class="mtk13">(</span><span class="mtk12">7</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">4</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">2</span><span class="mtk13">))</span></span><br></code></div>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">当重载具有相同数量的参数时，每个重载中的所有参数都必须明确类型化，并且它们的类型组合必须是唯一的：</font></font></li>
</ul>
<div class="pine-colorizer not-content colorized" data-id="2g3"><div class="pine-colorizer__header"><a class="pine-colorizer__title" href="https://tradingview.com/pine-script-docs/en/v5/Introduction.html" target="_blank" rel="noopener"><span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pine Script™</font></font></span></a><button class="pine-colorizer__copy-btn"><div class="pine-colorizer__tooltip"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">已复制</font></font></div></button></div><code class="monaco-editor-tv-pine-light"><span><span class="mtk9">//</span><span class="mtk9 mtkb">@version=</span><span class="mtk9">5</span></span><br><span><span class="mtk16">indicator</span><span class="mtk13">(</span><span class="mtk29">"Function&nbsp;overload"</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk9">//&nbsp;Accepts&nbsp;both&nbsp;'int'&nbsp;and&nbsp;'float'&nbsp;values&nbsp;-&nbsp;any&nbsp;'in</span><span class="mtk9">t'&nbsp;can&nbsp;be&nbsp;automatically&nbsp;cast&nbsp;to&nbsp;'float'</span></span><br><span><span class="mtk15">mult</span><span class="mtk13">(</span><span class="mtk18 mtkb">float</span><span class="mtk1">&nbsp;</span><span class="mtk33">x1</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk18 mtkb">float</span><span class="mtk1">&nbsp;</span><span class="mtk33">x2</span><span class="mtk13">)</span><span class="mtk1">&nbsp;</span><span class="mtk18">=&gt;</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk33">x1</span><span class="mtk1">&nbsp;</span><span class="mtk18">*</span><span class="mtk1">&nbsp;</span><span class="mtk33">x2</span></span><br><span><span></span></span><br><span><span class="mtk9">//&nbsp;Returns&nbsp;a&nbsp;'bool'&nbsp;value&nbsp;instead&nbsp;of&nbsp;a&nbsp;number</span></span><br><span><span class="mtk15">mult</span><span class="mtk13">(</span><span class="mtk18 mtkb">bool</span><span class="mtk1">&nbsp;</span><span class="mtk33">x1</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk18 mtkb">bool</span><span class="mtk1">&nbsp;</span><span class="mtk33">x2</span><span class="mtk13">)</span><span class="mtk1">&nbsp;</span><span class="mtk18">=&gt;</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk33">x1</span><span class="mtk1">&nbsp;</span><span class="mtk18">and</span><span class="mtk1">&nbsp;</span><span class="mtk33">x2</span><span class="mtk1">&nbsp;</span><span class="mtk18">?</span><span class="mtk1">&nbsp;</span><span class="mtk11">true</span><span class="mtk1">&nbsp;</span><span class="mtk18">:</span><span class="mtk1">&nbsp;</span><span class="mtk11">false</span></span><br><span><span></span></span><br><span><span class="mtk15">mult</span><span class="mtk13">(</span><span class="mtk18 mtkb">string</span><span class="mtk1">&nbsp;</span><span class="mtk33">x1</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk18 mtkb">string</span><span class="mtk1">&nbsp;</span><span class="mtk33">x2</span><span class="mtk13">)</span><span class="mtk1">&nbsp;</span><span class="mtk18">=&gt;</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk16">str.tonumber</span><span class="mtk13">(</span><span class="mtk33">x1</span><span class="mtk13">)</span><span class="mtk1">&nbsp;</span><span class="mtk18">*</span><span class="mtk1">&nbsp;</span><span class="mtk16">str.tonumber</span><span class="mtk13">(</span><span class="mtk33">x2</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk9">//&nbsp;Has&nbsp;three&nbsp;parameters,&nbsp;so&nbsp;explicit&nbsp;types&nbsp;are&nbsp;not</span><span class="mtk9">&nbsp;required</span></span><br><span><span class="mtk15">mult</span><span class="mtk13">(</span><span class="mtk33">x1</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">x2</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">x3</span><span class="mtk13">)</span><span class="mtk1">&nbsp;</span><span class="mtk18">=&gt;</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk33">x1</span><span class="mtk1">&nbsp;</span><span class="mtk18">*</span><span class="mtk1">&nbsp;</span><span class="mtk33">x2</span><span class="mtk1">&nbsp;</span><span class="mtk18">*</span><span class="mtk1">&nbsp;</span><span class="mtk33">x3</span></span><br><span><span></span></span><br><span><span class="mtk16">plot</span><span class="mtk13">(</span><span class="mtk33">mult</span><span class="mtk13">(</span><span class="mtk12">7</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">4</span><span class="mtk13">))</span></span><br><span><span class="mtk16">plot</span><span class="mtk13">(</span><span class="mtk33">mult</span><span class="mtk13">(</span><span class="mtk12">7.5</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">4.2</span><span class="mtk13">))</span></span><br><span><span class="mtk16">plot</span><span class="mtk13">(</span><span class="mtk33">mult</span><span class="mtk13">(</span><span class="mtk11">true</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk11">false</span><span class="mtk13">)</span><span class="mtk1">&nbsp;</span><span class="mtk18">?</span><span class="mtk1">&nbsp;</span><span class="mtk12">1</span><span class="mtk1">&nbsp;</span><span class="mtk18">:</span><span class="mtk1">&nbsp;</span><span class="mtk12">0</span><span class="mtk13">)</span></span><br><span><span class="mtk16">plot</span><span class="mtk13">(</span><span class="mtk33">mult</span><span class="mtk13">(</span><span class="mtk29">"5"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"6"</span><span class="mtk13">))</span></span><br><span><span class="mtk16">plot</span><span class="mtk13">(</span><span class="mtk33">mult</span><span class="mtk13">(</span><span class="mtk12">7</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">4</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">2</span><span class="mtk13">))</span></span><br></code></div>
<h4 id="currency-conversion" class="md-heading"><a href="#currency-conversion"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">货币</font></font><span class="fancy-wrap"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">转换</font></font><span class="icon icon-link" aria-hidden="true"><svg width="28" height="28" viewBox="0 0 28 28"><g fill="currentColor" clip-path="url(#a)"><path d="M14.908 5.558a5.326 5.326 0 1 1 7.533 7.533l-3.236 3.236-1.061-1.061 3.236-3.236a3.826 3.826 0 1 0-5.411-5.411l-3.236 3.236-1.06-1.06 3.235-3.237ZM5.56 14.907a5.326 5.326 0 0 0 7.532 7.533l3.236-3.236-1.061-1.061-3.236 3.236a3.826 3.826 0 1 1-5.411-5.411l3.236-3.236-1.061-1.06-3.236 3.235Z"></path><path d="m16.346 10.592-5.753 5.753 1.061 1.06 5.753-5.752-1.06-1.06Z"></path></g><defs><clipPath id="a"><path fill="#fff" d="M0 0h28v28H0z"></path></clipPath></defs></svg></span></span></a></h4>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">为大多数函数添加了新的 [currency] 参数</font></font><code dir="auto">request.*()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
。如果指定，函数返回的价格值将从源货币转换为目标货币。以下函数受到影响：</font></font></p>
<ul>
<li><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_request%7Bdot%7Ddividends"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">请求.股息()</font></font></a></li>
<li><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_request%7Bdot%7Dearnings"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">请求.收入（）</font></font></a></li>
<li><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_request%7Bdot%7Dfinancial"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">请求.财务（）</font></font></a></li>
<li><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_request%7Bdot%7Dsecurity"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">请求.安全()</font></font></a></li>
</ul>
<h3 id="october-2021" class="md-heading"><a href="#october-2021"><font style="vertical-align: inherit;"><span class="fancy-wrap"><font style="vertical-align: inherit;">2021 年</font></span><font style="vertical-align: inherit;">10 月</font></font><span class="fancy-wrap"><font style="vertical-align: inherit;"></font><span class="icon icon-link" aria-hidden="true"><svg width="28" height="28" viewBox="0 0 28 28"><g fill="currentColor" clip-path="url(#a)"><path d="M14.908 5.558a5.326 5.326 0 1 1 7.533 7.533l-3.236 3.236-1.061-1.061 3.236-3.236a3.826 3.826 0 1 0-5.411-5.411l-3.236 3.236-1.06-1.06 3.235-3.237ZM5.56 14.907a5.326 5.326 0 0 0 7.532 7.533l3.236-3.236-1.061-1.061-3.236 3.236a3.826 3.826 0 1 1-5.411-5.411l3.236-3.236-1.061-1.06-3.236 3.235Z"></path><path d="m16.346 10.592-5.753 5.753 1.061 1.06 5.753-5.752-1.06-1.06Z"></path></g><defs><clipPath id="a"><path fill="#fff" d="M0 0h28v28H0z"></path></clipPath></defs></svg></span></span></a></h3>
<p><font style="vertical-align: inherit;"></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pine Script™ v5 来了！这是添加到该语言的新</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">功能和一些</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">更改</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">的列表</font><font style="vertical-align: inherit;">。请参阅 Pine Script™ v5
</font></font><a href="/pine-script-docs/migration-guides/to-pine-version-5"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">迁移指南</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，了解v5 中</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">更改</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">的完整列表。</font></font></p>
<h4 id="new-features" class="md-heading"><a href="#new-features"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">新</font></font><span class="fancy-wrap"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">功能</font></font><span class="icon icon-link" aria-hidden="true"><svg width="28" height="28" viewBox="0 0 28 28"><g fill="currentColor" clip-path="url(#a)"><path d="M14.908 5.558a5.326 5.326 0 1 1 7.533 7.533l-3.236 3.236-1.061-1.061 3.236-3.236a3.826 3.826 0 1 0-5.411-5.411l-3.236 3.236-1.06-1.06 3.235-3.237ZM5.56 14.907a5.326 5.326 0 0 0 7.532 7.533l3.236-3.236-1.061-1.061-3.236 3.236a3.826 3.826 0 1 1-5.411-5.411l3.236-3.236-1.061-1.06-3.236 3.235Z"></path><path d="m16.346 10.592-5.753 5.753 1.061 1.06 5.753-5.752-1.06-1.06Z"></path></g><defs><clipPath id="a"><path fill="#fff" d="M0 0h28v28H0z"></path></clipPath></defs></svg></span></span></a></h4>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">库是一种新型出版物。它们允许您创建自定义函数以供其他脚本重复使用。请参阅本手册的
</font></font><a href="/pine-script-docs/concepts/libraries"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">库</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">页面。</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pine Script™ 现在支持
</font></font><a href="https://www.tradingview.com/pine-script-reference/v5/#kw_switch"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">switch结构！它们为长三元运算符和</font></font></a><font style="vertical-align: inherit;"></font><a href="https://www.tradingview.com/pine-script-reference/v5/#kw_if"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">if</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">语句
提供了更方便、更易读的替代方案
</font><font style="vertical-align: inherit;">
。</font></font></p>
<p><a href="https://www.tradingview.com/pine-script-reference/v5/#kw_while"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">while</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
循环就在这里！它们允许您创建一个循环，该循环仅在其控制条件为 false 或</font></font><code dir="auto">break</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在循环中使用命令时才会停止。</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pine Script™ 运行时维护新的内置数组变量，用于保存脚本绘制的同一类型的所有活动对象的 ID。它们是
</font></font><a href="https://www.tradingview.com/pine-script-reference/v5/#var_label%7Bdot%7Dall"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">label.all</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、
 </font></font><a href="https://www.tradingview.com/pine-script-reference/v5/#var_line%7Bdot%7Dall"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">line.all</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、
 </font></font><a href="https://www.tradingview.com/pine-script-reference/v5/#var_box%7Bdot%7Dall"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">box.all</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
和
</font></font><a href="https://www.tradingview.com/pine-script-reference/v5/#var_table%7Bdot%7Dall"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">table.all</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用 Runtime.error
 </font></font><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_runtime%7Bdot%7Derror"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">()</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
函数可以暂停脚本的执行，并使用自定义消息显示运行时错误。您可以使用脚本中的任何条件来触发调用。</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">用户定义函数中的参数定义现在可以包含默认值：定义为 的函数</font></font><code dir="auto">f(x = 1) =&gt; x</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在被调用时将返回 1 </font></font><code dir="auto">f()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，即，不为其参数提供参数</font></font><code dir="auto">x</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
。</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">新的变量和函数为策略信息提供了更好的脚本可见性：</font></font></p>
<ul>
<li><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_strategy%7Bdot%7Dclosedtrades%7Bdot%7Dentry_price"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">策略.closedtrades.entry_price()</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
和
</font></font><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_strategy%7Bdot%7Dopentrades%7Bdot%7Dentry_price"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">策略.opentrades.entry_price()</font></font></a></li>
<li><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_strategy%7Bdot%7Dclosedtrades%7Bdot%7Dentry_bar_index"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">strategies.closedtrades.entry_bar_index()</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
和
</font></font><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_strategy%7Bdot%7Dopentrades%7Bdot%7Dentry_bar_index"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">strategies.opentrades.entry_bar_index()</font></font></a></li>
<li><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_strategy%7Bdot%7Dclosedtrades%7Bdot%7Dentry_time"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">strategies.closedtrades.entry_time()</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
和
</font></font><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_strategy%7Bdot%7Dopentrades%7Bdot%7Dentry_time"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">strategies.opentrades.entry_time()</font></font></a></li>
<li><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_strategy%7Bdot%7Dclosedtrades%7Bdot%7Dsize"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">strategies.closedtrades.size()</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
和
</font></font><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_strategy%7Bdot%7Dopentrades%7Bdot%7Dsize"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">strategies.opentrades.size()</font></font></a></li>
<li><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_strategy%7Bdot%7Dclosedtrades%7Bdot%7Dprofit"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">strategies.closedtrades.profit()</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
和
</font></font><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_strategy%7Bdot%7Dopentrades%7Bdot%7Dprofit"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">strategies.opentrades.profit()</font></font></a></li>
<li><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_strategy%7Bdot%7Dclosedtrades%7Bdot%7Dcommission"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">strategies.closedtrades.commission()</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
和
</font></font><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_strategy%7Bdot%7Dopentrades%7Bdot%7Dcommission"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">strategies.opentrades.commission()</font></font></a></li>
<li><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_strategy%7Bdot%7Dclosedtrades%7Bdot%7Dmax_runup"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">strategies.closedtrades.max_runup()</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
和
</font></font><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_strategy%7Bdot%7Dopentrades%7Bdot%7Dmax_runup"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">strategies.opentrades.max_runup()</font></font></a></li>
<li><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_strategy%7Bdot%7Dclosedtrades%7Bdot%7Dmax_drawdown"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">strategies.closedtrades.max_drawdown()</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
和
</font></font><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_strategy%7Bdot%7Dopentrades%7Bdot%7Dmax_drawdown"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">strategies.opentrades.max_drawdown()</font></font></a></li>
<li><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_strategy%7Bdot%7Dclosedtrades%7Bdot%7Dexit_price"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">策略.closedtrades.exit_price()</font></font></a></li>
<li><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_strategy%7Bdot%7Dclosedtrades%7Bdot%7Dexit_bar_index"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">策略.closedtrades.exit_bar_index()</font></font></a></li>
<li><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_strategy%7Bdot%7Dclosedtrades%7Bdot%7Dexit_time"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">策略.closedtrades.exit_time()</font></font></a></li>
<li><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_strategy%7Bdot%7Dconvert_to_account"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">策略.转换为账户（）</font></font></a></li>
<li><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_strategy%7Bdot%7Dconvert_to_symbol"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">策略.转换为符号()</font></font></a></li>
<li><a href="https://www.tradingview.com/pine-script-reference/v5/#var_strategy%7Bdot%7Daccount_currency"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">策略.account_currency</font></font></a></li>
</ul>
<p><font style="vertical-align: inherit;"><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_request%7Bdot%7Dearnings"><font style="vertical-align: inherit;">request.earnings()</font></a><font style="vertical-align: inherit;">函数
的
</font><font style="vertical-align: inherit;">新
</font></font><a href="https://www.tradingview.com/pine-script-reference/v5/#const_earnings%7Bdot%7Dstandardized"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">income.standardized</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">常量
允许请求标准化收入数据。</font></font><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_request%7Bdot%7Dearnings"><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pine Script™ 编辑器中现在包含 v4 到 v5 的转换器。</font><font style="vertical-align: inherit;">有关将脚本转换为 v5 的更多信息，请参阅 Pine Script™ v5</font></font><a href="/pine-script-docs/migration-guides/to-pine-version-5"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">迁移指南。</font></font></a><font style="vertical-align: inherit;"></font></p>
<p><font style="vertical-align: inherit;"></font><a href="https://www.tradingview.com/pine-script-reference/v5/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">参考手册</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">现在</font><font style="vertical-align: inherit;">系统地提及每个函数参数所需的形式和类型（例如“简单 int”）。</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">重新组织了用户手册并添加了新内容。</font></font></p>
<h4 id="changes" class="md-heading"><a href="#changes"> <span class="fancy-wrap"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">变化</font></font><span class="icon icon-link" aria-hidden="true"><svg width="28" height="28" viewBox="0 0 28 28"><g fill="currentColor" clip-path="url(#a)"><path d="M14.908 5.558a5.326 5.326 0 1 1 7.533 7.533l-3.236 3.236-1.061-1.061 3.236-3.236a3.826 3.826 0 1 0-5.411-5.411l-3.236 3.236-1.06-1.06 3.235-3.237ZM5.56 14.907a5.326 5.326 0 0 0 7.532 7.533l3.236-3.236-1.061-1.061-3.236 3.236a3.826 3.826 0 1 1-5.411-5.411l3.236-3.236-1.061-1.06-3.236 3.235Z"></path><path d="m16.346 10.592-5.753 5.753 1.061 1.06 5.753-5.752-1.06-1.06Z"></path></g><defs><clipPath id="a"><path fill="#fff" d="M0 0h28v28H0z"></path></clipPath></defs></svg></span></span></a></h4>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在 v5 中，许多内置变量、函数和函数参数被重命名或移至新的命名空间。</font></font><code dir="auto">study()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例如，古老的 现在是
</font></font><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_indicator"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">indicator()</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><code dir="auto">security()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">现在是
</font></font><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_request%7Bdot%7Dsecurity"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">request.security()</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。新的命名空间现在将相关函数和变量组合在一起。这种合并实现了更合理的命名法，并提供了一个有序的空间来容纳为 Pine Script™ 计划的许多新增功能。</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">请参阅 Pine Script™ v5
</font></font><a href="/pine-script-docs/migration-guides/to-pine-version-5"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">迁移指南</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，了解v5 中所做</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">更改</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">的完整列表。</font></font></p>
<h3 id="september-2021" class="md-heading"><a href="#september-2021"><font style="vertical-align: inherit;"><span class="fancy-wrap"><font style="vertical-align: inherit;">2021 年</font></span><font style="vertical-align: inherit;">9 月</font></font><span class="fancy-wrap"><font style="vertical-align: inherit;"></font><span class="icon icon-link" aria-hidden="true"><svg width="28" height="28" viewBox="0 0 28 28"><g fill="currentColor" clip-path="url(#a)"><path d="M14.908 5.558a5.326 5.326 0 1 1 7.533 7.533l-3.236 3.236-1.061-1.061 3.236-3.236a3.826 3.826 0 1 0-5.411-5.411l-3.236 3.236-1.06-1.06 3.235-3.237ZM5.56 14.907a5.326 5.326 0 0 0 7.532 7.533l3.236-3.236-1.061-1.061-3.236 3.236a3.826 3.826 0 1 1-5.411-5.411l3.236-3.236-1.061-1.06-3.236 3.235Z"></path><path d="m16.346 10.592-5.753 5.753 1.061 1.06 5.753-5.752-1.06-1.06Z"></path></g><defs><clipPath id="a"><path fill="#fff" d="M0 0h28v28H0z"></path></clipPath></defs></svg></span></span></a></h3>
<p><font style="vertical-align: inherit;"></font><code dir="auto">dividends()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">为、</font></font><code dir="auto">earnings()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、
 </font></font><code dir="auto">financial()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、</font></font><code dir="auto">quandl()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、</font></font><code dir="auto">security()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><code dir="auto">splits()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">函数</font><font style="vertical-align: inherit;">添加了新参数：</font></font></p>
<ul>
<li><code dir="auto">ignore_invalid_symbol</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- 确定如果未找到指定符号时函数的行为：如果</font></font><code dir="auto">false</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，脚本将暂停并返回运行时错误；如果</font></font><code dir="auto">true</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，函数将返回</font></font><code dir="auto">na</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
并且继续执行。</font></font></li>
</ul>
<h3 id="july-2021" class="md-heading"><a href="#july-2021"><font style="vertical-align: inherit;"><span class="fancy-wrap"><font style="vertical-align: inherit;">2021 年</font></span><font style="vertical-align: inherit;">7 月</font></font><span class="fancy-wrap"><font style="vertical-align: inherit;"></font><span class="icon icon-link" aria-hidden="true"><svg width="28" height="28" viewBox="0 0 28 28"><g fill="currentColor" clip-path="url(#a)"><path d="M14.908 5.558a5.326 5.326 0 1 1 7.533 7.533l-3.236 3.236-1.061-1.061 3.236-3.236a3.826 3.826 0 1 0-5.411-5.411l-3.236 3.236-1.06-1.06 3.235-3.237ZM5.56 14.907a5.326 5.326 0 0 0 7.532 7.533l3.236-3.236-1.061-1.061-3.236 3.236a3.826 3.826 0 1 1-5.411-5.411l3.236-3.236-1.061-1.06-3.236 3.235Z"></path><path d="m16.346 10.592-5.753 5.753 1.061 1.06 5.753-5.752-1.06-1.06Z"></path></g><defs><clipPath id="a"><path fill="#fff" d="M0 0h28v28H0z"></path></clipPath></defs></svg></span></span></a></h3>
<p><code dir="auto">tostring</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">现在接受“bool”和“string”类型。</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">添加了</font></font><code dir="auto">time</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和函数</font><font style="vertical-align: inherit;">的新参数：</font></font><code dir="auto">time_close</code><font style="vertical-align: inherit;"></font></p>
<ul>
<li><code dir="auto">timezone</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- 参数的时区，仅可在指定会话时使用。可以以 GMT 符号（例如“GMT-5”）或</font><a href="https://en.wikipedia.org/wiki/List_of_tz_database_time_zones" rel="nofollow"><font style="vertical-align: inherit;">IANA 时区数据库名称</font></a><font style="vertical-align: inherit;">
（例如“America/New_York”）</font></font><code dir="auto">session</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">写出。</font></font><a href="https://en.wikipedia.org/wiki/List_of_tz_database_time_zones" rel="nofollow"><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"></font></li>
</ul>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">现在可以使用 来放置绘图对象
</font></font><code dir="auto">xloc = xloc.bar_index</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">添加了</font></font><code dir="auto">study</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和函数</font><font style="vertical-align: inherit;">的新参数：</font></font><code dir="auto">strategy</code><font style="vertical-align: inherit;"></font></p>
<ul>
<li><code dir="auto">explicit_plot_zorder</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- 指定指标的绘图、填充和水平线的呈现顺序。如果为 true，则绘图将根据它们在指标代码中出现的顺序绘制，每个较新的绘图将绘制在先前绘图的上方。</font></font></li>
</ul>
<h3 id="june-2021" class="md-heading"><a href="#june-2021"><font style="vertical-align: inherit;"><span class="fancy-wrap"><font style="vertical-align: inherit;">2021 年</font></span><font style="vertical-align: inherit;">6 月</font></font><span class="fancy-wrap"><font style="vertical-align: inherit;"></font><span class="icon icon-link" aria-hidden="true"><svg width="28" height="28" viewBox="0 0 28 28"><g fill="currentColor" clip-path="url(#a)"><path d="M14.908 5.558a5.326 5.326 0 1 1 7.533 7.533l-3.236 3.236-1.061-1.061 3.236-3.236a3.826 3.826 0 1 0-5.411-5.411l-3.236 3.236-1.06-1.06 3.235-3.237ZM5.56 14.907a5.326 5.326 0 0 0 7.532 7.533l3.236-3.236-1.061-1.061-3.236 3.236a3.826 3.826 0 1 1-5.411-5.411l3.236-3.236-1.061-1.06-3.236 3.235Z"></path><path d="m16.346 10.592-5.753 5.753 1.061 1.06 5.753-5.752-1.06-1.06Z"></path></g><defs><clipPath id="a"><path fill="#fff" d="M0 0h28v28H0z"></path></clipPath></defs></svg></span></span></a></h3>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">添加了新变量：</font></font></p>
<ul>
<li><code dir="auto">barstate.islastconfirmedhistory</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-</font></font><code dir="auto">true</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果市场关闭时脚本正在数据集的最后一条柱上执行，则返回；如果市场开放时脚本正在实时柱之前的柱上执行，则返回。</font></font><code dir="auto">false</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">否则返回。</font></font></li>
</ul>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">增加了新功能：</font></font></p>
<ul>
<li><code dir="auto">round_to_mintick(x)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- 返回四舍五入到符号最小刻度的值，即可除以 的最接近的值
</font></font><code dir="auto">syminfo.mintick</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，不取余数，若有余数则向上舍入。</font></font></li>
</ul>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">扩展</font></font><code dir="auto">tostring()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">功能。该函数现在接受三个新的格式参数：</font></font></p>
<ul>
<li><code dir="auto">format.mintick</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">格式化为刻度精度。</font></font></li>
<li><code dir="auto">format.volume</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">缩写大值。</font></font></li>
<li><code dir="auto">format.percent</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">格式化百分比。</font></font></li>
</ul>
<h3 id="may-2021" class="md-heading"><a href="#may-2021"><font style="vertical-align: inherit;"><span class="fancy-wrap"><font style="vertical-align: inherit;">2021 年</font></span><font style="vertical-align: inherit;">5 月</font></font><span class="fancy-wrap"><font style="vertical-align: inherit;"></font><span class="icon icon-link" aria-hidden="true"><svg width="28" height="28" viewBox="0 0 28 28"><g fill="currentColor" clip-path="url(#a)"><path d="M14.908 5.558a5.326 5.326 0 1 1 7.533 7.533l-3.236 3.236-1.061-1.061 3.236-3.236a3.826 3.826 0 1 0-5.411-5.411l-3.236 3.236-1.06-1.06 3.235-3.237ZM5.56 14.907a5.326 5.326 0 0 0 7.532 7.533l3.236-3.236-1.061-1.061-3.236 3.236a3.826 3.826 0 1 1-5.411-5.411l3.236-3.236-1.061-1.06-3.236 3.235Z"></path><path d="m16.346 10.592-5.753 5.753 1.061 1.06 5.753-5.752-1.06-1.06Z"></path></g><defs><clipPath id="a"><path fill="#fff" d="M0 0h28v28H0z"></path></clipPath></defs></svg></span></span></a></h3>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">通过添加杠杆机制改进了回溯测试功能。</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">添加了对表格绘图的支持以及处理表格的函数。表格是独特的对象，不固定在特定的条形图上；它们浮动在脚本的空间中，与正在查看的图表条形图或使用的缩放系数无关。有关更多信息，请参阅
</font></font><a href="/pine-script-docs/concepts/tables"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表格</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">用户手册页面。</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">添加了新功能：</font></font></p>
<ul>
<li><code dir="auto">color.rgb(red, green, blue, transp)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- 使用 RGB 颜色模型创建具有透明度的新颜色。</font></font></li>
<li><code dir="auto">color.from_gradient(value, bottom_value, top_value, bottom_color, top_color)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- 返回根据底部颜色 (bottom_color) 到顶部颜色 (top_color) 之间的线性渐变计算的颜色。</font></font></li>
<li><code dir="auto">color.r(color)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，，，，</font><font style="vertical-align: inherit;">-
检索</font></font><code dir="auto">color.g(color)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">其中</font><font style="vertical-align: inherit;">一个颜色分量的值。</font></font><code dir="auto">color.b(color)</code><font style="vertical-align: inherit;"></font><code dir="auto">color.t(color)</code><font style="vertical-align: inherit;"></font></li>
<li><code dir="auto">array.from()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- 采用以下类型之一的可变数量的参数</font><font style="vertical-align: inherit;">：
 </font><font style="vertical-align: inherit;">，，，，，，，，，，</font><font style="vertical-align: inherit;">并</font><font style="vertical-align: inherit;">返回</font></font><code dir="auto">int</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">相应</font><font style="vertical-align: inherit;">类型</font></font><code dir="auto">float</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">的</font><font style="vertical-align: inherit;">数组</font><font style="vertical-align: inherit;">。</font></font><code dir="auto">bool</code><font style="vertical-align: inherit;"></font><code dir="auto">string</code><font style="vertical-align: inherit;"></font><code dir="auto">label</code><font style="vertical-align: inherit;"></font><code dir="auto">line</code><font style="vertical-align: inherit;"></font><code dir="auto">color</code><font style="vertical-align: inherit;"></font><code dir="auto">box</code><font style="vertical-align: inherit;"></font><code dir="auto">table</code><font style="vertical-align: inherit;"></font></li>
</ul>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pine Script™ 中添加了新的</font></font><code dir="auto">box</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">绘图功能，可以使用 Pine Script™ 语法在图表上绘制矩形。有关更多详细信息，请参阅 Pine Script™
</font></font><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_box%7Bdot%7Dnew"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">参考</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
和</font></font><a href="/pine-script-docs/concepts/lines-and-boxes"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">线条和框</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">用户手册页面。</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">该</font></font><code dir="auto">color.new</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">函数现在可以接受系列和输入参数，在这种情况下，颜色将在运行时计算。有关更多信息，请参阅我们的</font></font><a href="/pine-script-docs/concepts/colors"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">颜色</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">用户手册页面。</font></font></p>
<h3 id="april-2021" class="md-heading"><a href="#april-2021"><font style="vertical-align: inherit;"><span class="fancy-wrap"><font style="vertical-align: inherit;">2021 年</font></span><font style="vertical-align: inherit;">4 月</font></font><span class="fancy-wrap"><font style="vertical-align: inherit;"></font><span class="icon icon-link" aria-hidden="true"><svg width="28" height="28" viewBox="0 0 28 28"><g fill="currentColor" clip-path="url(#a)"><path d="M14.908 5.558a5.326 5.326 0 1 1 7.533 7.533l-3.236 3.236-1.061-1.061 3.236-3.236a3.826 3.826 0 1 0-5.411-5.411l-3.236 3.236-1.06-1.06 3.235-3.237ZM5.56 14.907a5.326 5.326 0 0 0 7.532 7.533l3.236-3.236-1.061-1.061-3.236 3.236a3.826 3.826 0 1 1-5.411-5.411l3.236-3.236-1.061-1.06-3.236 3.235Z"></path><path d="m16.346 10.592-5.753 5.753 1.061 1.06 5.753-5.752-1.06-1.06Z"></path></g><defs><clipPath id="a"><path fill="#fff" d="M0 0h28v28H0z"></path></clipPath></defs></svg></span></span></a></h3>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">添加了新的数学常数：</font></font></p>
<ul>
<li><code dir="auto">math.pi</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- 是阿基米德常数的命名常数。它等于 3.1415926535897932。</font></font></li>
<li><code dir="auto">math.phi</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- 是黄金比例的命名常数。它等于 1.6180339887498948。</font></font></li>
<li><code dir="auto">math.rphi</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- 是黄金比率共轭的命名常数。它等于 0.6180339887498948。</font></font></li>
<li><code dir="auto">math.e</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- 是欧拉数的一个命名常数。它等于 2.7182818284590452。</font></font></li>
</ul>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">添加了新的数学函数：</font></font></p>
<ul>
<li><code dir="auto">round(x, precision)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- 返回四舍五入到最接近的整数的值</font></font><code dir="auto">x</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，四舍五入。如果使用精度参数，则返回四舍五入到该小数位数的浮点值。</font></font></li>
<li><code dir="auto">median(source, length)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- 返回序列的中位数。</font></font></li>
<li><code dir="auto">mode(source, length)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- 返回序列的众数。如果存在多个频率相同的值，则返回最小值。</font></font></li>
<li><code dir="auto">range(source, length)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- 返回系列中</font></font><code dir="auto">min</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
和值</font><font style="vertical-align: inherit;">之间的差值。</font></font><code dir="auto">max</code><font style="vertical-align: inherit;"></font></li>
<li><code dir="auto">todegrees(radians)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- 返回以弧度测量的角度与以度为单位测量的角度近似相等的角度。</font></font></li>
<li><code dir="auto">toradians(degrees)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- 返回以度为单位测量的角度与以弧度为单位测量的角度的近似等值角度。</font></font></li>
<li><code dir="auto">random(min, max, seed)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- 返回伪随机值。该函数将为每次脚本执行生成不同的值序列。对可选种子参数使用相同的值将生成可重复的序列。</font></font></li>
</ul>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">添加了新功能：</font></font></p>
<ul>
<li><code dir="auto">session.ismarket</code><font style="vertical-align: inherit;"></font><code dir="auto">true</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-如果当前柱属于常规交易时间（即市场时间）的一部分，则</font><font style="vertical-align: inherit;">返回，</font></font><code dir="auto">false</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">否则。</font></font></li>
<li><code dir="auto">session.ispremarket</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-</font></font><code dir="auto">true</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果当前条是盘前交易的一部分则返回，</font></font><code dir="auto">false</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">否则返回。</font></font></li>
<li><code dir="auto">session.ispostmarket</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-</font></font><code dir="auto">true</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果当前条是后市的一部分则返回，</font></font><code dir="auto">false</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">否则返回。</font></font></li>
<li><code dir="auto">str.format</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- 根据指定的格式将值转换为字符串。接受某些</font></font><code dir="auto">number</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">修饰符：</font></font><code dir="auto">integer</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、</font></font><code dir="auto">currency</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、
 </font></font><code dir="auto">percent</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></li>
</ul>
<h3 id="march-2021" class="md-heading"><a href="#march-2021"><font style="vertical-align: inherit;"><span class="fancy-wrap"><font style="vertical-align: inherit;">2021 年</font></span><font style="vertical-align: inherit;">3 月</font></font><span class="fancy-wrap"><font style="vertical-align: inherit;"></font><span class="icon icon-link" aria-hidden="true"><svg width="28" height="28" viewBox="0 0 28 28"><g fill="currentColor" clip-path="url(#a)"><path d="M14.908 5.558a5.326 5.326 0 1 1 7.533 7.533l-3.236 3.236-1.061-1.061 3.236-3.236a3.826 3.826 0 1 0-5.411-5.411l-3.236 3.236-1.06-1.06 3.235-3.237ZM5.56 14.907a5.326 5.326 0 0 0 7.532 7.533l3.236-3.236-1.061-1.061-3.236 3.236a3.826 3.826 0 1 1-5.411-5.411l3.236-3.236-1.061-1.06-3.236 3.235Z"></path><path d="m16.346 10.592-5.753 5.753 1.061 1.06 5.753-5.752-1.06-1.06Z"></path></g><defs><clipPath id="a"><path fill="#fff" d="M0 0h28v28H0z"></path></clipPath></defs></svg></span></span></a></h3>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">添加了新的赋值运算符：</font></font></p>
<ul>
<li><code dir="auto">+=</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- 附加作业</font></font></li>
<li><code dir="auto">-=</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- 减法作业</font></font></li>
<li><code dir="auto">*=</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- 乘法作业</font></font></li>
<li><code dir="auto">/=</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- 部门分配</font></font></li>
<li><code dir="auto">%=</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- 模数分配</font></font></li>
</ul>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">添加了用于输入自定义的新参数：</font></font></p>
<ul>
<li><code dir="auto">inline</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- 将所有具有相同内联值的输入调用合并到一行中。</font></font></li>
<li><code dir="auto">group</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- 在所有使用相同组字符串值的输入上方创建标题。该字符串也用作标题文本。</font></font></li>
<li><code dir="auto">tooltip</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- 在菜单中添加工具提示图标</font></font><code dir="auto">Inputs</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。将鼠标悬停在工具提示图标上时会显示工具提示字符串。</font></font></li>
</ul>
<p><font style="vertical-align: inherit;"></font><code dir="auto">fill</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">添加了</font><font style="vertical-align: inherit;">新的函数参数：</font></font></p>
<ul>
<li><code dir="auto">fillgaps</code><font style="vertical-align: inherit;"></font><code dir="auto">plot</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- 控制当其中一个调用返回值</font><font style="vertical-align: inherit;">时是否继续填充空白
</font></font><code dir="auto">na</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></li>
</ul>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">添加了新的关键字：</font></font></p>
<ul>
<li><code dir="auto">varip</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- 与关键字类似</font></font><code dir="auto">var</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，但用声明的变量</font></font><code dir="auto">varip</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在实时栏更新之间保留其值。</font></font></li>
</ul>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">添加了新功能：</font></font></p>
<ul>
<li><code dir="auto">tonumber()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- 将字符串值转换为浮点数。</font></font></li>
<li><code dir="auto">time_close()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- 根据传递给函数的分辨率和会话，返回当前条收盘的 UNIX 时间戳。</font></font></li>
<li><code dir="auto">dividends()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- 请求指定符号的股息数据。</font></font></li>
<li><code dir="auto">earnings()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- 请求指定符号的收益数据。</font></font></li>
<li><code dir="auto">splits()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- 请求指定符号的分割数据。</font></font></li>
</ul>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">添加了 study() 函数的新参数：</font></font></p>
<ul>
<li><code dir="auto">resolution_gaps</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- 使用时填补从更高时间范围获取的值之间的差距</font></font><code dir="auto">resolution</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></li>
<li><code dir="auto">format.percent</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- 将脚本输出值格式化为百分比。</font></font></li>
</ul>
<h3 id="february-2021" class="md-heading"><a href="#february-2021"><font style="vertical-align: inherit;"><span class="fancy-wrap"><font style="vertical-align: inherit;">2021 年</font></span><font style="vertical-align: inherit;">2 月</font></font><span class="fancy-wrap"><font style="vertical-align: inherit;"></font><span class="icon icon-link" aria-hidden="true"><svg width="28" height="28" viewBox="0 0 28 28"><g fill="currentColor" clip-path="url(#a)"><path d="M14.908 5.558a5.326 5.326 0 1 1 7.533 7.533l-3.236 3.236-1.061-1.061 3.236-3.236a3.826 3.826 0 1 0-5.411-5.411l-3.236 3.236-1.06-1.06 3.235-3.237ZM5.56 14.907a5.326 5.326 0 0 0 7.532 7.533l3.236-3.236-1.061-1.061-3.236 3.236a3.826 3.826 0 1 1-5.411-5.411l3.236-3.236-1.061-1.06-3.236 3.235Z"></path><path d="m16.346 10.592-5.753 5.753 1.061 1.06 5.753-5.752-1.06-1.06Z"></path></g><defs><clipPath id="a"><path fill="#fff" d="M0 0h28v28H0z"></path></clipPath></defs></svg></span></span></a></h3>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">添加了新变量：</font></font></p>
<ul>
<li><code dir="auto">time_tradingday</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- 当前条所属交易日的开始时间。</font></font></li>
</ul>
<h3 id="january-2021" class="md-heading"><a href="#january-2021"><font style="vertical-align: inherit;"><span class="fancy-wrap"><font style="vertical-align: inherit;">2021 年</font></span><font style="vertical-align: inherit;">1 月</font></font><span class="fancy-wrap"><font style="vertical-align: inherit;"></font><span class="icon icon-link" aria-hidden="true"><svg width="28" height="28" viewBox="0 0 28 28"><g fill="currentColor" clip-path="url(#a)"><path d="M14.908 5.558a5.326 5.326 0 1 1 7.533 7.533l-3.236 3.236-1.061-1.061 3.236-3.236a3.826 3.826 0 1 0-5.411-5.411l-3.236 3.236-1.06-1.06 3.235-3.237ZM5.56 14.907a5.326 5.326 0 0 0 7.532 7.533l3.236-3.236-1.061-1.061-3.236 3.236a3.826 3.826 0 1 1-5.411-5.411l3.236-3.236-1.061-1.06-3.236 3.235Z"></path><path d="m16.346 10.592-5.753 5.753 1.061 1.06 5.753-5.752-1.06-1.06Z"></path></g><defs><clipPath id="a"><path fill="#fff" d="M0 0h28v28H0z"></path></clipPath></defs></svg></span></span></a></h3>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">以下函数现在接受系列长度参数：</font></font></p>
<ul>
<li><a href="https://www.tradingview.com/pine-script-reference/v4/#fun_bb"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">bb()</font></font></a></li>
<li><a href="https://www.tradingview.com/pine-script-reference/v4/#fun_bbw"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">bbw（）</font></font></a></li>
<li><a href="https://www.tradingview.com/pine-script-reference/v4/#fun_cci"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">cci（）</font></font></a></li>
<li><a href="https://www.tradingview.com/pine-script-reference/v4/#fun_cmo"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">cmo（）</font></font></a></li>
<li><a href="https://www.tradingview.com/pine-script-reference/v4/#fun_cog"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">齿轮（）</font></font></a></li>
<li><a href="https://www.tradingview.com/pine-script-reference/v4/#fun_correlation"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">相关性（）</font></font></a></li>
<li><a href="https://www.tradingview.com/pine-script-reference/v4/#fun_dev"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dev（）</font></font></a></li>
<li><a href="https://www.tradingview.com/pine-script-reference/v4/#fun_falling"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">坠落()</font></font></a></li>
<li><a href="https://www.tradingview.com/pine-script-reference/v4/#fun_mfi"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mfi（）</font></font></a></li>
<li><a href="https://www.tradingview.com/pine-script-reference/v4/#fun_percentile_linear_interpolation"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">百分位数线性插值（）</font></font></a></li>
<li><a href="https://www.tradingview.com/pine-script-reference/v4/#fun_percentile_nearest_rank"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">百分位数最近排序()</font></font></a></li>
<li><a href="https://www.tradingview.com/pine-script-reference/v4/#fun_percentrank"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">百分比等级()</font></font></a></li>
<li><a href="https://www.tradingview.com/pine-script-reference/v4/#fun_rising"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">上升（）</font></font></a></li>
<li><a href="https://www.tradingview.com/pine-script-reference/v4/#fun_roc"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">鹏（）</font></font></a></li>
<li><a href="https://www.tradingview.com/pine-script-reference/v4/#fun_stdev"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">标准差()</font></font></a></li>
<li><a href="https://www.tradingview.com/pine-script-reference/v4/#fun_stoch"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">stoch()</font></font></a></li>
<li><a href="https://www.tradingview.com/pine-script-reference/v4/#fun_variance"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">方差（）</font></font></a></li>
<li><a href="https://www.tradingview.com/pine-script-reference/v4/#fun_wpr"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">函数返回值</font></font></a></li>
</ul>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">添加了新的警报类型 - 脚本警报。更多信息请参阅我们的</font></font><a href="https://www.tradingview.com/support/solutions/43000597494/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">帮助中心</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></p>
<h2 id="2020" class="md-heading"><a href="#2020"> <span class="fancy-wrap"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2020</font></font><span class="icon icon-link" aria-hidden="true"><svg width="28" height="28" viewBox="0 0 28 28"><g fill="currentColor" clip-path="url(#a)"><path d="M14.908 5.558a5.326 5.326 0 1 1 7.533 7.533l-3.236 3.236-1.061-1.061 3.236-3.236a3.826 3.826 0 1 0-5.411-5.411l-3.236 3.236-1.06-1.06 3.235-3.237ZM5.56 14.907a5.326 5.326 0 0 0 7.532 7.533l3.236-3.236-1.061-1.061-3.236 3.236a3.826 3.826 0 1 1-5.411-5.411l3.236-3.236-1.061-1.06-3.236 3.235Z"></path><path d="m16.346 10.592-5.753 5.753 1.061 1.06 5.753-5.752-1.06-1.06Z"></path></g><defs><clipPath id="a"><path fill="#fff" d="M0 0h28v28H0z"></path></clipPath></defs></svg></span></span></a></h2>
<h3 id="december-2020" class="md-heading"><a href="#december-2020"><font style="vertical-align: inherit;"><span class="fancy-wrap"><font style="vertical-align: inherit;">2020 年</font></span><font style="vertical-align: inherit;">12 月</font></font><span class="fancy-wrap"><font style="vertical-align: inherit;"></font><span class="icon icon-link" aria-hidden="true"><svg width="28" height="28" viewBox="0 0 28 28"><g fill="currentColor" clip-path="url(#a)"><path d="M14.908 5.558a5.326 5.326 0 1 1 7.533 7.533l-3.236 3.236-1.061-1.061 3.236-3.236a3.826 3.826 0 1 0-5.411-5.411l-3.236 3.236-1.06-1.06 3.235-3.237ZM5.56 14.907a5.326 5.326 0 0 0 7.532 7.533l3.236-3.236-1.061-1.061-3.236 3.236a3.826 3.826 0 1 1-5.411-5.411l3.236-3.236-1.061-1.06-3.236 3.235Z"></path><path d="m16.346 10.592-5.753 5.753 1.061 1.06 5.753-5.752-1.06-1.06Z"></path></g><defs><clipPath id="a"><path fill="#fff" d="M0 0h28v28H0z"></path></clipPath></defs></svg></span></span></a></h3>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">添加了新的数组类型：</font></font></p>
<ul>
<li><code dir="auto">array.new_line()</code></li>
<li><code dir="auto">array.new_label()</code></li>
<li><code dir="auto">array.new_string()</code></li>
</ul>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">添加了新功能：</font></font></p>
<ul>
<li><code dir="auto">str.length()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- 返回源字符串中的字符数。</font></font></li>
<li><code dir="auto">array.join()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- 将数组中的所有元素连接成一个字符串，并用指定的分隔符分隔这些元素。</font></font></li>
<li><code dir="auto">str.split()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- 在给定的子字符串分隔符处拆分字符串。</font></font></li>
</ul>
<h3 id="november-2020" class="md-heading"><a href="#november-2020"><font style="vertical-align: inherit;"><span class="fancy-wrap"><font style="vertical-align: inherit;">2020 年</font></span><font style="vertical-align: inherit;">11 月</font></font><span class="fancy-wrap"><font style="vertical-align: inherit;"></font><span class="icon icon-link" aria-hidden="true"><svg width="28" height="28" viewBox="0 0 28 28"><g fill="currentColor" clip-path="url(#a)"><path d="M14.908 5.558a5.326 5.326 0 1 1 7.533 7.533l-3.236 3.236-1.061-1.061 3.236-3.236a3.826 3.826 0 1 0-5.411-5.411l-3.236 3.236-1.06-1.06 3.235-3.237ZM5.56 14.907a5.326 5.326 0 0 0 7.532 7.533l3.236-3.236-1.061-1.061-3.236 3.236a3.826 3.826 0 1 1-5.411-5.411l3.236-3.236-1.061-1.06-3.236 3.235Z"></path><path d="m16.346 10.592-5.753 5.753 1.061 1.06 5.753-5.752-1.06-1.06Z"></path></g><defs><clipPath id="a"><path fill="#fff" d="M0 0h28v28H0z"></path></clipPath></defs></svg></span></span></a></h3>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">研究和策略功能中新增了参数。现在，您可以通过设置这些参数的值（1 到 500）来管理行数和标签</font><font style="vertical-align: inherit;">数</font></font><code dir="auto">max_labels_count</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><code dir="auto">max_lines_count</code><font style="vertical-align: inherit;"></font></li>
</ul>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">增加了新功能：</font></font></p>
<ul>
<li><code dir="auto">array.range()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- 返回数组中最小值和最大值之间的差值。</font></font></li>
</ul>
<h3 id="october-2020" class="md-heading"><a href="#october-2020"><font style="vertical-align: inherit;"><span class="fancy-wrap"><font style="vertical-align: inherit;">2020 年</font></span><font style="vertical-align: inherit;">10 月</font></font><span class="fancy-wrap"><font style="vertical-align: inherit;"></font><span class="icon icon-link" aria-hidden="true"><svg width="28" height="28" viewBox="0 0 28 28"><g fill="currentColor" clip-path="url(#a)"><path d="M14.908 5.558a5.326 5.326 0 1 1 7.533 7.533l-3.236 3.236-1.061-1.061 3.236-3.236a3.826 3.826 0 1 0-5.411-5.411l-3.236 3.236-1.06-1.06 3.235-3.237ZM5.56 14.907a5.326 5.326 0 0 0 7.532 7.533l3.236-3.236-1.061-1.061-3.236 3.236a3.826 3.826 0 1 1-5.411-5.411l3.236-3.236-1.061-1.06-3.236 3.235Z"></path><path d="m16.346 10.592-5.753 5.753 1.061 1.06 5.753-5.752-1.06-1.06Z"></path></g><defs><clipPath id="a"><path fill="#fff" d="M0 0h28v28H0z"></path></clipPath></defs></svg></span></span></a></h3>
<p><font style="vertical-align: inherit;"></font><code dir="auto">rising()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和函数</font><font style="vertical-align: inherit;">的行为</font></font><code dir="auto">falling()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">已发生改变。例如，</font></font><code dir="auto">rising(close,3)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">现在按如下方式计算：</font></font></p>
<div class="pine-colorizer not-content colorized" data-id="3np"><div class="pine-colorizer__header"><a class="pine-colorizer__title" href="https://tradingview.com/pine-script-docs/en/v5/Introduction.html" target="_blank" rel="noopener"><span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pine Script™</font></font></span></a><button class="pine-colorizer__copy-btn"><div class="pine-colorizer__tooltip"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">已复制</font></font></div></button></div><code class="monaco-editor-tv-pine-light"><span><span class="mtk11">close</span><span class="mtk13">[</span><span class="mtk12">0</span><span class="mtk13">]</span><span class="mtk1">&nbsp;</span><span class="mtk18">&gt;</span><span class="mtk1">&nbsp;</span><span class="mtk11">close</span><span class="mtk13">[</span><span class="mtk12">1</span><span class="mtk13">]</span><span class="mtk1">&nbsp;</span><span class="mtk18">and</span><span class="mtk1">&nbsp;</span><span class="mtk11">close</span><span class="mtk13">[</span><span class="mtk12">1</span><span class="mtk13">]</span><span class="mtk1">&nbsp;</span><span class="mtk18">&gt;</span><span class="mtk1">&nbsp;</span><span class="mtk11">close</span><span class="mtk13">[</span><span class="mtk12">2</span><span class="mtk13">]</span><span class="mtk1">&nbsp;</span><span class="mtk18">and</span><span class="mtk1">&nbsp;</span><span class="mtk11">close</span><span class="mtk13">[</span><span class="mtk12">2</span><span class="mtk13">]</span><span class="mtk1">&nbsp;</span><span class="mtk18">&gt;</span><span class="mtk1">&nbsp;</span><span class="mtk11">close</span><span class="mtk13">[</span><span class="mtk12">3</span><span class="mtk13">]</span></span><br></code></div>
<h3 id="september-2020" class="md-heading"><a href="#september-2020"><font style="vertical-align: inherit;"><span class="fancy-wrap"><font style="vertical-align: inherit;">2020 年</font></span><font style="vertical-align: inherit;">9 月</font></font><span class="fancy-wrap"><font style="vertical-align: inherit;"></font><span class="icon icon-link" aria-hidden="true"><svg width="28" height="28" viewBox="0 0 28 28"><g fill="currentColor" clip-path="url(#a)"><path d="M14.908 5.558a5.326 5.326 0 1 1 7.533 7.533l-3.236 3.236-1.061-1.061 3.236-3.236a3.826 3.826 0 1 0-5.411-5.411l-3.236 3.236-1.06-1.06 3.235-3.237ZM5.56 14.907a5.326 5.326 0 0 0 7.532 7.533l3.236-3.236-1.061-1.061-3.236 3.236a3.826 3.826 0 1 1-5.411-5.411l3.236-3.236-1.061-1.06-3.236 3.235Z"></path><path d="m16.346 10.592-5.753 5.753 1.061 1.06 5.753-5.752-1.06-1.06Z"></path></g><defs><clipPath id="a"><path fill="#fff" d="M0 0h28v28H0z"></path></clipPath></defs></svg></span></span></a></h3>
<p><font style="vertical-align: inherit;"></font><code dir="auto">input.color</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">添加了对函数的</font><font style="vertical-align: inherit;">支持。现在，您可以通过脚本的“设置/输入”选项卡为脚本用户提供颜色选择，颜色小部件与整个 TradingView 用户界面中使用的颜色小部件相同。在我们的</font><a href="https://www.tradingview.com/blog/en/create-color-inputs-in-pine-20751/"><font style="vertical-align: inherit;">博客</font></a></font><code dir="auto">input()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">中了解有关此功能的更多信息
</font></font><a href="https://www.tradingview.com/blog/en/create-color-inputs-in-pine-20751/"><font style="vertical-align: inherit;"></font></a></p>
<div class="pine-colorizer not-content colorized" data-id="vb"><div class="pine-colorizer__header"><a class="pine-colorizer__title" href="https://tradingview.com/pine-script-docs/en/v5/Introduction.html" target="_blank" rel="noopener"><span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pine Script™</font></font></span></a><button class="pine-colorizer__copy-btn"><div class="pine-colorizer__tooltip"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">已复制</font></font></div></button></div><code class="monaco-editor-tv-pine-light"><span><span class="mtk9">//</span><span class="mtk9 mtkb">@version=</span><span class="mtk9">4</span></span><br><span><span class="mtk16">study</span><span class="mtk13">(</span><span class="mtk29">"My&nbsp;Script"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">overlay</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk18">true</span><span class="mtk13">)</span></span><br><span><span class="mtk33">color</span><span class="mtk1">&nbsp;</span><span class="mtk33">c_labelColor</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">input</span><span class="mtk13">(</span><span class="mtk11">color.green</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"Main&nbsp;Color"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk11">input.color</span><span class="mtk13">)</span></span><br><span><span class="mtk18">var</span><span class="mtk1">&nbsp;</span><span class="mtk33">l</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">label.new</span><span class="mtk13">(</span><span class="mtk11">bar_index</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk11">close</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">yloc</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk11">yloc.abovebar</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">text</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk29">"Colored&nbsp;label"</span><span class="mtk13">)</span></span><br><span><span class="mtk16">label.set_x</span><span class="mtk13">(</span><span class="mtk33">l</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk11">bar_index</span><span class="mtk13">)</span></span><br><span><span class="mtk16">label.set_color</span><span class="mtk13">(</span><span class="mtk33">l</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">c_labelColor</span><span class="mtk13">)</span></span><br></code></div>
<p><img src="/pine-script-docs/_astro/input_color.BV9qKm_h_2a3e7N.webp" alt="图像" width="600" height="423" loading="lazy" decoding="async"></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">增加了对数组和函数的支持，以便使用它们。现在，您可以使用强大的新数组功能来构建自定义数据集。请参阅我们的
</font></font><a href="/pine-script-docs/language/arrays"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">数组用户手册页面</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
和我们的
</font></font><a href="https://www.tradingview.com/blog/en/arrays-are-now-available-in-pine-script-20052/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">博客</font></font></a></p>
<div class="pine-colorizer not-content colorized" data-id="36b"><div class="pine-colorizer__header"><a class="pine-colorizer__title" href="https://tradingview.com/pine-script-docs/en/v5/Introduction.html" target="_blank" rel="noopener"><span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pine Script™</font></font></span></a><button class="pine-colorizer__copy-btn"><div class="pine-colorizer__tooltip"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">已复制</font></font></div></button></div><code class="monaco-editor-tv-pine-light"><span><span class="mtk9">//</span><span class="mtk9 mtkb">@version=</span><span class="mtk9">4</span></span><br><span><span class="mtk16">study</span><span class="mtk13">(</span><span class="mtk29">"My&nbsp;Script"</span><span class="mtk13">)</span></span><br><span><span class="mtk33">a</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">array.new_float</span><span class="mtk13">(</span><span class="mtk12">0</span><span class="mtk13">)</span></span><br><span><span class="mtk18">for</span><span class="mtk1">&nbsp;</span><span class="mtk33">i</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk12">0</span><span class="mtk1">&nbsp;</span><span class="mtk18">to</span><span class="mtk1">&nbsp;</span><span class="mtk12">5</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk16">array.push</span><span class="mtk13">(</span><span class="mtk33">a</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk11">close</span><span class="mtk13">[</span><span class="mtk33">i</span><span class="mtk13">]</span><span class="mtk1">&nbsp;</span><span class="mtk18">-</span><span class="mtk1">&nbsp;</span><span class="mtk11">open</span><span class="mtk13">[</span><span class="mtk33">i</span><span class="mtk13">])</span></span><br><span><span class="mtk16">plot</span><span class="mtk13">(</span><span class="mtk16">array.get</span><span class="mtk13">(</span><span class="mtk33">a</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">4</span><span class="mtk13">))</span></span><br></code></div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">以下函数现在接受序列长度参数。在我们的
</font></font><a href="https://www.tradingview.com/blog/en/pine-functions-support-dynamic-length-arguments-20554/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">博客</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">中了解有关此功能的更多信息：</font></font></p>
<ul>
<li><a href="https://www.tradingview.com/pine-script-reference/v4/#fun_alma"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">阿尔玛()</font></font></a></li>
<li><a href="https://www.tradingview.com/pine-script-reference/v4/#fun_change"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">改变（）</font></font></a></li>
<li><a href="https://www.tradingview.com/pine-script-reference/v4/#fun_highest"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">最高（）</font></font></a></li>
<li><a href="https://www.tradingview.com/pine-script-reference/v4/#fun_highestbars"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">最高条形图()</font></font></a></li>
<li><a href="https://www.tradingview.com/pine-script-reference/v4/#fun_linreg"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">线性回归（）</font></font></a></li>
<li><a href="https://www.tradingview.com/pine-script-reference/v4/#fun_lowest"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">最低（）</font></font></a></li>
<li><a href="https://www.tradingview.com/pine-script-reference/v4/#fun_lowestbars"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">最低条形图()</font></font></a></li>
<li><a href="https://www.tradingview.com/pine-script-reference/v4/#fun_mom"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">妈妈（）</font></font></a></li>
<li><a href="https://www.tradingview.com/pine-script-reference/v4/#fun_sma"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sma()</font></font></a></li>
<li><a href="https://www.tradingview.com/pine-script-reference/v4/#fun_sum"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和（）</font></font></a></li>
<li><a href="https://www.tradingview.com/pine-script-reference/v4/#fun_vwma"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">vwma（）</font></font></a></li>
<li><a href="https://www.tradingview.com/pine-script-reference/v4/#fun_wma"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">wma()</font></font></a></li>
</ul>
<div class="pine-colorizer not-content colorized" data-id="zm"><div class="pine-colorizer__header"><a class="pine-colorizer__title" href="https://tradingview.com/pine-script-docs/en/v5/Introduction.html" target="_blank" rel="noopener"><span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pine Script™</font></font></span></a><button class="pine-colorizer__copy-btn"><div class="pine-colorizer__tooltip"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">已复制</font></font></div></button></div><code class="monaco-editor-tv-pine-light"><span><span class="mtk9">//</span><span class="mtk9 mtkb">@version=</span><span class="mtk9">4</span></span><br><span><span class="mtk16">study</span><span class="mtk13">(</span><span class="mtk29">"My&nbsp;Script"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">overlay</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk18">true</span><span class="mtk13">)</span></span><br><span><span class="mtk33">length</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">input</span><span class="mtk13">(</span><span class="mtk12">10</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"Length"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk11">input.integer</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">minval</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk12">1</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">maxval</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk12">100</span><span class="mtk13">)</span></span><br><span><span class="mtk33">avgBar</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">avg</span><span class="mtk13">(</span><span class="mtk16">highestbars</span><span class="mtk13">(</span><span class="mtk33">length</span><span class="mtk13">)</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk16">lowestbars</span><span class="mtk13">(</span><span class="mtk33">length</span><span class="mtk13">))</span></span><br><span><span class="mtk33">float</span><span class="mtk1">&nbsp;</span><span class="mtk33">dynLen</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">nz</span><span class="mtk13">(</span><span class="mtk16">abs</span><span class="mtk13">(</span><span class="mtk33">avgBar</span><span class="mtk13">)</span><span class="mtk1">&nbsp;</span><span class="mtk18">+</span><span class="mtk1">&nbsp;</span><span class="mtk12">1</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">length</span><span class="mtk13">)</span></span><br><span><span class="mtk33">dynSma</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">sma</span><span class="mtk13">(</span><span class="mtk11">close</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk16">int</span><span class="mtk13">(</span><span class="mtk33">dynLen</span><span class="mtk13">))</span></span><br><span><span class="mtk16">plot</span><span class="mtk13">(</span><span class="mtk33">dynSma</span><span class="mtk13">)</span></span><br></code></div>
<h3 id="august-2020" class="md-heading"><a href="#august-2020"><font style="vertical-align: inherit;"><span class="fancy-wrap"><font style="vertical-align: inherit;">2020 年</font></span><font style="vertical-align: inherit;">8 月</font></font><span class="fancy-wrap"><font style="vertical-align: inherit;"></font><span class="icon icon-link" aria-hidden="true"><svg width="28" height="28" viewBox="0 0 28 28"><g fill="currentColor" clip-path="url(#a)"><path d="M14.908 5.558a5.326 5.326 0 1 1 7.533 7.533l-3.236 3.236-1.061-1.061 3.236-3.236a3.826 3.826 0 1 0-5.411-5.411l-3.236 3.236-1.06-1.06 3.235-3.237ZM5.56 14.907a5.326 5.326 0 0 0 7.532 7.533l3.236-3.236-1.061-1.061-3.236 3.236a3.826 3.826 0 1 1-5.411-5.411l3.236-3.236-1.061-1.06-3.236 3.235Z"></path><path d="m16.346 10.592-5.753 5.753 1.061 1.06 5.753-5.752-1.06-1.06Z"></path></g><defs><clipPath id="a"><path fill="#fff" d="M0 0h28v28H0z"></path></clipPath></defs></svg></span></span></a></h3>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">优化了脚本编译时间。脚本编译速度现在提高了 1.5 到 2 倍。</font></font></li>
</ul>
<h3 id="july-2020" class="md-heading"><a href="#july-2020"><font style="vertical-align: inherit;"><span class="fancy-wrap"><font style="vertical-align: inherit;">2020 年</font></span><font style="vertical-align: inherit;">7 月</font></font><span class="fancy-wrap"><font style="vertical-align: inherit;"></font><span class="icon icon-link" aria-hidden="true"><svg width="28" height="28" viewBox="0 0 28 28"><g fill="currentColor" clip-path="url(#a)"><path d="M14.908 5.558a5.326 5.326 0 1 1 7.533 7.533l-3.236 3.236-1.061-1.061 3.236-3.236a3.826 3.826 0 1 0-5.411-5.411l-3.236 3.236-1.06-1.06 3.235-3.237ZM5.56 14.907a5.326 5.326 0 0 0 7.532 7.533l3.236-3.236-1.061-1.061-3.236 3.236a3.826 3.826 0 1 1-5.411-5.411l3.236-3.236-1.061-1.06-3.236 3.235Z"></path><path d="m16.346 10.592-5.753 5.753 1.061 1.06 5.753-5.752-1.06-1.06Z"></path></g><defs><clipPath id="a"><path fill="#fff" d="M0 0h28v28H0z"></path></clipPath></defs></svg></span></span></a></h3>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">修复了一些小错误并进行了改进。</font></font></li>
</ul>
<h3 id="june-2020" class="md-heading"><a href="#june-2020"><font style="vertical-align: inherit;"><span class="fancy-wrap"><font style="vertical-align: inherit;">2020 年</font></span><font style="vertical-align: inherit;">6 月</font></font><span class="fancy-wrap"><font style="vertical-align: inherit;"></font><span class="icon icon-link" aria-hidden="true"><svg width="28" height="28" viewBox="0 0 28 28"><g fill="currentColor" clip-path="url(#a)"><path d="M14.908 5.558a5.326 5.326 0 1 1 7.533 7.533l-3.236 3.236-1.061-1.061 3.236-3.236a3.826 3.826 0 1 0-5.411-5.411l-3.236 3.236-1.06-1.06 3.235-3.237ZM5.56 14.907a5.326 5.326 0 0 0 7.532 7.533l3.236-3.236-1.061-1.061-3.236 3.236a3.826 3.826 0 1 1-5.411-5.411l3.236-3.236-1.061-1.06-3.236 3.235Z"></path><path d="m16.346 10.592-5.753 5.753 1.061 1.06 5.753-5.752-1.06-1.06Z"></path></g><defs><clipPath id="a"><path fill="#fff" d="M0 0h28v28H0z"></path></clipPath></defs></svg></span></span></a></h3>
<ul>
<li><font style="vertical-align: inherit;"></font><code dir="auto">resolution</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">函数中添加了</font><font style="vertical-align: inherit;">新参数</font></font><code dir="auto">study</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。现在您可以将 MTF 功能添加到脚本并决定指标运行的时间范围。</font></font></li>
</ul>
<p><img src="/pine-script-docs/_astro/Mtf.CuSZJR6J_1zhU1M.webp" alt="图像" width="365" height="399" loading="lazy" decoding="async"></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">请注意，您需要重新应用该指标才能显示[分辨率]参数。</font></font></p>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">该参数</font><font style="vertical-align: inherit;">随函数一起</font></font><code dir="auto">tooltip</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">添加到函数中</font><font style="vertical-align: inherit;">：</font></font><code dir="auto">label.new</code><font style="vertical-align: inherit;"></font><code dir="auto">label.set_tooltip</code><font style="vertical-align: inherit;"></font></li>
</ul>
<div class="pine-colorizer not-content colorized" data-id="5sr"><div class="pine-colorizer__header"><a class="pine-colorizer__title" href="https://tradingview.com/pine-script-docs/en/v5/Introduction.html" target="_blank" rel="noopener"><span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pine Script™</font></font></span></a><button class="pine-colorizer__copy-btn"><div class="pine-colorizer__tooltip"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">已复制</font></font></div></button></div><code class="monaco-editor-tv-pine-light"><span><span class="mtk9">//</span><span class="mtk9 mtkb">@version=</span><span class="mtk9">4</span></span><br><span><span class="mtk16">study</span><span class="mtk13">(</span><span class="mtk29">"My&nbsp;Script"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">overlay</span><span class="mtk18">=true</span><span class="mtk13">)</span></span><br><span><span class="mtk18">var</span><span class="mtk1">&nbsp;</span><span class="mtk33">l</span><span class="mtk18">=</span><span class="mtk16">label.new</span><span class="mtk13">(</span><span class="mtk11">bar_index</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk11">close</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">yloc</span><span class="mtk18">=</span><span class="mtk11">yloc.abovebar</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">text</span><span class="mtk18">=</span><span class="mtk29">"Label"</span><span class="mtk13">)</span></span><br><span><span class="mtk16">label.set_x</span><span class="mtk13">(</span><span class="mtk33">l</span><span class="mtk18">,</span><span class="mtk11">bar_index</span><span class="mtk13">)</span></span><br><span><span class="mtk16">label.set_tooltip</span><span class="mtk13">(</span><span class="mtk33">l</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"Label&nbsp;Tooltip"</span><span class="mtk13">)</span></span><br></code></div>
<p><img src="/pine-script-docs/_astro/Tooltip.6OxddeKb_xxgi6.webp" alt="图像" width="551" height="312" loading="lazy" decoding="async"></p>
<ul>
<li><font style="vertical-align: inherit;"></font><a href="https://www.tradingview.com/support/solutions/43000481368"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">增加了创建策略警报的</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">能力</font><font style="vertical-align: inherit;">。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">新功能
</font></font><a href="https://www.tradingview.com/pine-script-reference/v4/#fun_line%7Bdot%7Dget_price"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">line.get_price()</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
可用于确定线在某个条形图上所处的价格水平。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">新的</font></font><a href="https://www.tradingview.com/pine-script-reference/v4/#fun_label%7Bdot%7Dnew"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">标签样式</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
允许您将标签指针定位到任意方向。</font></font></li>
</ul>
<p><img src="/pine-script-docs/_astro/new_label_styles.CnpdeFiL_1DmAE3.webp" alt="图像" width="584" height="316" loading="lazy" decoding="async"></p>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">查找和替换已添加到 Pine Editor。要使用此功能，请按 CTRL+F（查找）或 CTRL+H（查找和替换）。</font></font></li>
</ul>
<p><img src="/pine-script-docs/_astro/FindReplace.COurJNjE_sFMux.webp" alt="图像" width="444" height="185" loading="lazy" decoding="async"></p>
<ul>
<li><code dir="auto">timezone</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">为时间函数添加了参数。现在您可以为</font><font style="vertical-align: inherit;">、</font></font><code dir="auto">second</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、</font></font><code dir="auto">minute</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、</font></font><code dir="auto">hour</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、</font></font><code dir="auto">year</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、</font></font><code dir="auto">month</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">函数
</font><font style="vertical-align: inherit;">指定时区：</font></font><code dir="auto">dayofmonth</code><font style="vertical-align: inherit;"></font><code dir="auto">dayofweek</code><font style="vertical-align: inherit;"></font></li>
</ul>
<div class="pine-colorizer not-content colorized" data-id="7c2"><div class="pine-colorizer__header"><a class="pine-colorizer__title" href="https://tradingview.com/pine-script-docs/en/v5/Introduction.html" target="_blank" rel="noopener"><span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pine Script™</font></font></span></a><button class="pine-colorizer__copy-btn"><div class="pine-colorizer__tooltip"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">已复制</font></font></div></button></div><code class="monaco-editor-tv-pine-light"><span><span class="mtk9">//</span><span class="mtk9 mtkb">@version=</span><span class="mtk9">4</span></span><br><span><span class="mtk16">study</span><span class="mtk13">(</span><span class="mtk29">"My&nbsp;Script"</span><span class="mtk13">)</span></span><br><span><span class="mtk16">plot</span><span class="mtk13">(</span><span class="mtk16">hour</span><span class="mtk13">(</span><span class="mtk12">1591012800000</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"GMT+1"</span><span class="mtk13">))</span></span><br></code></div>
<ul>
<li><code dir="auto">syminfo.basecurrency</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">变量已添加。返回当前符号的基础货币代码。对于 EURUSD 符号，返回 EUR。</font></font></li>
</ul>
<h3 id="may-2020" class="md-heading"><a href="#may-2020"><font style="vertical-align: inherit;"><span class="fancy-wrap"><font style="vertical-align: inherit;">2020 年</font></span><font style="vertical-align: inherit;">5 月</font></font><span class="fancy-wrap"><font style="vertical-align: inherit;"></font><span class="icon icon-link" aria-hidden="true"><svg width="28" height="28" viewBox="0 0 28 28"><g fill="currentColor" clip-path="url(#a)"><path d="M14.908 5.558a5.326 5.326 0 1 1 7.533 7.533l-3.236 3.236-1.061-1.061 3.236-3.236a3.826 3.826 0 1 0-5.411-5.411l-3.236 3.236-1.06-1.06 3.235-3.237ZM5.56 14.907a5.326 5.326 0 0 0 7.532 7.533l3.236-3.236-1.061-1.061-3.236 3.236a3.826 3.826 0 1 1-5.411-5.411l3.236-3.236-1.061-1.06-3.236 3.235Z"></path><path d="m16.346 10.592-5.753 5.753 1.061 1.06 5.753-5.752-1.06-1.06Z"></path></g><defs><clipPath id="a"><path fill="#fff" d="M0 0h28v28H0z"></path></clipPath></defs></svg></span></span></a></h3>
<ul>
<li><code dir="auto">else if</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">添加了声明</font></font></li>
<li><font style="vertical-align: inherit;"></font><code dir="auto">security()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">函数</font><font style="vertical-align: inherit;">的行为发生了改变：</font></font><code dir="auto">expression</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
参数可以是系列或元组。</font></font></li>
</ul>
<h3 id="april-2020" class="md-heading"><a href="#april-2020"><font style="vertical-align: inherit;"><span class="fancy-wrap"><font style="vertical-align: inherit;">2020 年</font></span><font style="vertical-align: inherit;">4 月</font></font><span class="fancy-wrap"><font style="vertical-align: inherit;"></font><span class="icon icon-link" aria-hidden="true"><svg width="28" height="28" viewBox="0 0 28 28"><g fill="currentColor" clip-path="url(#a)"><path d="M14.908 5.558a5.326 5.326 0 1 1 7.533 7.533l-3.236 3.236-1.061-1.061 3.236-3.236a3.826 3.826 0 1 0-5.411-5.411l-3.236 3.236-1.06-1.06 3.235-3.237ZM5.56 14.907a5.326 5.326 0 0 0 7.532 7.533l3.236-3.236-1.061-1.061-3.236 3.236a3.826 3.826 0 1 1-5.411-5.411l3.236-3.236-1.061-1.06-3.236 3.235Z"></path><path d="m16.346 10.592-5.753 5.753 1.061 1.06 5.753-5.752-1.06-1.06Z"></path></g><defs><clipPath id="a"><path fill="#fff" d="M0 0h28v28H0z"></path></clipPath></defs></svg></span></span></a></h3>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">增加了新功能：</font></font></p>
<ul>
<li><code dir="auto">quandl()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- 请求某个符号的 quandl 数据</font></font></li>
</ul>
<h3 id="march-2020" class="md-heading"><a href="#march-2020"><font style="vertical-align: inherit;"><span class="fancy-wrap"><font style="vertical-align: inherit;">2020 年</font></span><font style="vertical-align: inherit;">3 月</font></font><span class="fancy-wrap"><font style="vertical-align: inherit;"></font><span class="icon icon-link" aria-hidden="true"><svg width="28" height="28" viewBox="0 0 28 28"><g fill="currentColor" clip-path="url(#a)"><path d="M14.908 5.558a5.326 5.326 0 1 1 7.533 7.533l-3.236 3.236-1.061-1.061 3.236-3.236a3.826 3.826 0 1 0-5.411-5.411l-3.236 3.236-1.06-1.06 3.235-3.237ZM5.56 14.907a5.326 5.326 0 0 0 7.532 7.533l3.236-3.236-1.061-1.061-3.236 3.236a3.826 3.826 0 1 1-5.411-5.411l3.236-3.236-1.061-1.06-3.236 3.235Z"></path><path d="m16.346 10.592-5.753 5.753 1.061 1.06 5.753-5.752-1.06-1.06Z"></path></g><defs><clipPath id="a"><path fill="#fff" d="M0 0h28v28H0z"></path></clipPath></defs></svg></span></span></a></h3>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">增加了新功能：</font></font></p>
<ul>
<li><code dir="auto">financial()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- 请求某个代码的财务数据</font></font></li>
</ul>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">添加常用指标的新功能：</font></font></p>
<ul>
<li><code dir="auto">cmo()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- Chande 动量振荡器</font></font></li>
<li><code dir="auto">mfi()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- 资金流量指数</font></font></li>
<li><code dir="auto">bb()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- 布林线</font></font></li>
<li><code dir="auto">bbw()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- 布林带宽度</font></font></li>
<li><code dir="auto">kc()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- 肯特纳通道</font></font></li>
<li><code dir="auto">kcw()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- 肯特纳通道宽度</font></font></li>
<li><code dir="auto">dmi()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- 趋势指标/平均趋向指标</font></font></li>
<li><code dir="auto">wpr()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- 威廉姆斯 % R</font></font></li>
<li><code dir="auto">hma()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- 赫尔移动平均线</font></font></li>
<li><code dir="auto">supertrend()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- 超级趋势</font></font></li>
</ul>
<p><font style="vertical-align: inherit;"></font><a href="https://www.tradingview.com/support/folders/43000587044-i-d-like-to-know-more-about-values-in-the-strategy-tester-report/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">添加了策略测试器报告</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">中所有字段的详细描述</font><font style="vertical-align: inherit;">。</font></font></p>
<h3 id="february-2020" class="md-heading"><a href="#february-2020"><font style="vertical-align: inherit;"><span class="fancy-wrap"><font style="vertical-align: inherit;">2020 年</font></span><font style="vertical-align: inherit;">2 月</font></font><span class="fancy-wrap"><font style="vertical-align: inherit;"></font><span class="icon icon-link" aria-hidden="true"><svg width="28" height="28" viewBox="0 0 28 28"><g fill="currentColor" clip-path="url(#a)"><path d="M14.908 5.558a5.326 5.326 0 1 1 7.533 7.533l-3.236 3.236-1.061-1.061 3.236-3.236a3.826 3.826 0 1 0-5.411-5.411l-3.236 3.236-1.06-1.06 3.235-3.237ZM5.56 14.907a5.326 5.326 0 0 0 7.532 7.533l3.236-3.236-1.061-1.061-3.236 3.236a3.826 3.826 0 1 1-5.411-5.411l3.236-3.236-1.061-1.06-3.236 3.235Z"></path><path d="m16.346 10.592-5.753 5.753 1.061 1.06 5.753-5.752-1.06-1.06Z"></path></g><defs><clipPath id="a"><path fill="#fff" d="M0 0h28v28H0z"></path></clipPath></defs></svg></span></span></a></h3>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">添加了新的 Pine Script™ 指标 VWAP Anchored。现在您可以指定时间段：会话、月、周、年。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">修复了计算函数的一个问题</font></font><code dir="auto">percentrank</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。现在它可以返回零值，而之前由于计算错误，这种情况不会发生。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、
</font><font style="vertical-align: inherit;">和函数</font></font><code dir="auto">transparency</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">的</font><font style="vertical-align: inherit;">默认参数</font><font style="vertical-align: inherit;">现在为 0%。</font></font><code dir="auto">plot()</code><font style="vertical-align: inherit;"></font><code dir="auto">plotshape()</code><font style="vertical-align: inherit;"></font><code dir="auto">plotchar()</code><font style="vertical-align: inherit;"></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">对于函数</font></font><code dir="auto">plot()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、</font></font><code dir="auto">plotshape()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、</font></font><code dir="auto">plotchar()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、
 </font></font><code dir="auto">plotbar()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、</font></font><code dir="auto">plotcandle()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><code dir="auto">plotarrow()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">您可以设置
</font></font><code dir="auto">display</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">控制绘图显示的参数。可以为其分配以下值：
</font></font><ul>
<li><code dir="auto">display.none</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- 未显示情节</font></font></li>
<li><code dir="auto">display.all</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- 显示图表（默认）</font></font></li>
</ul>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">参数</font><font style="vertical-align: inherit;">随函数一起</font></font><code dir="auto">textalign</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">添加到函数中</font><font style="vertical-align: inherit;">。使用这些，您可以控制标签文本的对齐方式：</font></font><code dir="auto">label.new</code><font style="vertical-align: inherit;"></font><code dir="auto">label.set_textalign</code><font style="vertical-align: inherit;"></font></li>
</ul>
<div class="pine-colorizer not-content colorized" data-id="5n3"><div class="pine-colorizer__header"><a class="pine-colorizer__title" href="https://tradingview.com/pine-script-docs/en/v5/Introduction.html" target="_blank" rel="noopener"><span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pine Script™</font></font></span></a><button class="pine-colorizer__copy-btn"><div class="pine-colorizer__tooltip"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">已复制</font></font></div></button></div><code class="monaco-editor-tv-pine-light"><span><span class="mtk9">//</span><span class="mtk9 mtkb">@version=</span><span class="mtk9">4</span></span><br><span><span class="mtk16">study</span><span class="mtk13">(</span><span class="mtk29">"My&nbsp;Script"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">overlay</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk18">true</span><span class="mtk13">)</span></span><br><span><span class="mtk18">var</span><span class="mtk1">&nbsp;</span><span class="mtk33">l</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">label.new</span><span class="mtk13">(</span><span class="mtk11">bar_index</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk11">high</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">text</span><span class="mtk18">=</span><span class="mtk29">"Right\n&nbsp;aligned\n&nbsp;text"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">textalign</span><span class="mtk18">=</span><span class="mtk11">text.align_right</span><span class="mtk13">)</span></span><br><span><span class="mtk16">label.set_xy</span><span class="mtk13">(</span><span class="mtk33">l</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk11">bar_index</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk11">high</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk1">..&nbsp;</span><span class="mtk33">image</span><span class="mtk18">::</span><span class="mtk1">&nbsp;</span><span class="mtk33">images</span><span class="mtk18">/</span><span class="mtk33">ReleaseNotes</span><span class="mtk18">-</span><span class="mtk33">Label_text_align</span><span class="mtk1">.</span><span class="mtk33">png</span></span><br></code></div>
<h3 id="january-2020" class="md-heading"><a href="#january-2020"><font style="vertical-align: inherit;"><span class="fancy-wrap"><font style="vertical-align: inherit;">2020 年</font></span><font style="vertical-align: inherit;">1 月</font></font><span class="fancy-wrap"><font style="vertical-align: inherit;"></font><span class="icon icon-link" aria-hidden="true"><svg width="28" height="28" viewBox="0 0 28 28"><g fill="currentColor" clip-path="url(#a)"><path d="M14.908 5.558a5.326 5.326 0 1 1 7.533 7.533l-3.236 3.236-1.061-1.061 3.236-3.236a3.826 3.826 0 1 0-5.411-5.411l-3.236 3.236-1.06-1.06 3.235-3.237ZM5.56 14.907a5.326 5.326 0 0 0 7.532 7.533l3.236-3.236-1.061-1.061-3.236 3.236a3.826 3.826 0 1 1-5.411-5.411l3.236-3.236-1.061-1.06-3.236 3.235Z"></path><path d="m16.346 10.592-5.753 5.753 1.061 1.06 5.753-5.752-1.06-1.06Z"></path></g><defs><clipPath id="a"><path fill="#fff" d="M0 0h28v28H0z"></path></clipPath></defs></svg></span></span></a></h3>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">添加了新的内置变量：</font></font></p>
<ul>
<li><code dir="auto">iii</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- 日内强度指数</font></font></li>
<li><code dir="auto">wvad</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- 威廉姆斯变量累积/分配</font></font></li>
<li><code dir="auto">wad</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- 威廉姆斯累积/分配</font></font></li>
<li><code dir="auto">obv</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- 平衡交易量</font></font></li>
<li><code dir="auto">pvt</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- 价量趋势</font></font></li>
<li><code dir="auto">nvi</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- 负成交量指数</font></font></li>
<li><code dir="auto">pvi</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- 正成交量指数</font></font></li>
</ul>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">添加了以下新参数</font></font><code dir="auto">strategy.close()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：</font></font></p>
<ul>
<li><code dir="auto">qty</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- 退出交易的合约/股票/手数/单位数量</font></font></li>
<li><code dir="auto">qty_percent</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- 定义退出交易的合约/股票/手数/单位的百分比</font></font></li>
<li><code dir="auto">comment</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- 订单上的附加说明</font></font></li>
</ul>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">添加了新参数</font></font><code dir="auto">strategy.close_all</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：</font></font></p>
<ul>
<li><code dir="auto">comment</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- 订单上的附加说明</font></font></li>
</ul>
<h2 id="2019" class="md-heading"><a href="#2019"> <span class="fancy-wrap"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2019</font></font><span class="icon icon-link" aria-hidden="true"><svg width="28" height="28" viewBox="0 0 28 28"><g fill="currentColor" clip-path="url(#a)"><path d="M14.908 5.558a5.326 5.326 0 1 1 7.533 7.533l-3.236 3.236-1.061-1.061 3.236-3.236a3.826 3.826 0 1 0-5.411-5.411l-3.236 3.236-1.06-1.06 3.235-3.237ZM5.56 14.907a5.326 5.326 0 0 0 7.532 7.533l3.236-3.236-1.061-1.061-3.236 3.236a3.826 3.826 0 1 1-5.411-5.411l3.236-3.236-1.061-1.06-3.236 3.235Z"></path><path d="m16.346 10.592-5.753 5.753 1.061 1.06 5.753-5.752-1.06-1.06Z"></path></g><defs><clipPath id="a"><path fill="#fff" d="M0 0h28v28H0z"></path></clipPath></defs></svg></span></span></a></h2>
<h3 id="december-2019" class="md-heading"><a href="#december-2019"><font style="vertical-align: inherit;"><span class="fancy-wrap"><font style="vertical-align: inherit;">2019 年</font></span><font style="vertical-align: inherit;">12 月</font></font><span class="fancy-wrap"><font style="vertical-align: inherit;"></font><span class="icon icon-link" aria-hidden="true"><svg width="28" height="28" viewBox="0 0 28 28"><g fill="currentColor" clip-path="url(#a)"><path d="M14.908 5.558a5.326 5.326 0 1 1 7.533 7.533l-3.236 3.236-1.061-1.061 3.236-3.236a3.826 3.826 0 1 0-5.411-5.411l-3.236 3.236-1.06-1.06 3.235-3.237ZM5.56 14.907a5.326 5.326 0 0 0 7.532 7.533l3.236-3.236-1.061-1.061-3.236 3.236a3.826 3.826 0 1 1-5.411-5.411l3.236-3.236-1.061-1.06-3.236 3.235Z"></path><path d="m16.346 10.592-5.753 5.753 1.061 1.06 5.753-5.752-1.06-1.06Z"></path></g><defs><clipPath id="a"><path fill="#fff" d="M0 0h28v28H0z"></path></clipPath></defs></svg></span></span></a></h3>
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">添加了警告信息。</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例如，如果您没有为
</font></font><code dir="auto">strategy.exit</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- </font></font><code dir="auto">profit</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、</font></font><code dir="auto">limit</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、</font></font><code dir="auto">loss</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或</font></font><code dir="auto">stop</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">以下对之一指定退出参数：</font></font><code dir="auto">trail_offset</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><code dir="auto">trail_price</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/ </font></font><code dir="auto">trail_points</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- ，您将在 Pine Script™ 编辑器的控制台中看到一条警告消息。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"></font><code dir="auto">max</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">增加了、、函数</font><font style="vertical-align: inherit;">中的最大参数数量</font></font><code dir="auto">min</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><code dir="auto">avg</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
现在您可以在这些函数中使用最多 10 个参数。</font></font></p>
</li>
</ul>
<h3 id="october-2019" class="md-heading"><a href="#october-2019"><font style="vertical-align: inherit;"><span class="fancy-wrap"><font style="vertical-align: inherit;">2019 年</font></span><font style="vertical-align: inherit;">10 月</font></font><span class="fancy-wrap"><font style="vertical-align: inherit;"></font><span class="icon icon-link" aria-hidden="true"><svg width="28" height="28" viewBox="0 0 28 28"><g fill="currentColor" clip-path="url(#a)"><path d="M14.908 5.558a5.326 5.326 0 1 1 7.533 7.533l-3.236 3.236-1.061-1.061 3.236-3.236a3.826 3.826 0 1 0-5.411-5.411l-3.236 3.236-1.06-1.06 3.235-3.237ZM5.56 14.907a5.326 5.326 0 0 0 7.532 7.533l3.236-3.236-1.061-1.061-3.236 3.236a3.826 3.826 0 1 1-5.411-5.411l3.236-3.236-1.061-1.06-3.236 3.235Z"></path><path d="m16.346 10.592-5.753 5.753 1.061 1.06 5.753-5.752-1.06-1.06Z"></path></g><defs><clipPath id="a"><path fill="#fff" d="M0 0h28v28H0z"></path></clipPath></defs></svg></span></span></a></h3>
<ul>
<li><code dir="auto">plotchar()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">函数现在支持大多数 Unicode 符号：</font></font></li>
</ul>
<div class="pine-colorizer not-content colorized" data-id="3f4"><div class="pine-colorizer__header"><a class="pine-colorizer__title" href="https://tradingview.com/pine-script-docs/en/v5/Introduction.html" target="_blank" rel="noopener"><span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pine Script™</font></font></span></a><button class="pine-colorizer__copy-btn"><div class="pine-colorizer__tooltip"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">已复制</font></font></div></button></div><code class="monaco-editor-tv-pine-light"><span><span class="mtk9">//</span><span class="mtk9 mtkb">@version=</span><span class="mtk9">4</span></span><br><span><span class="mtk16">study</span><span class="mtk13">(</span><span class="mtk29">"My&nbsp;Script"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">overlay</span><span class="mtk18">=true</span><span class="mtk13">)</span></span><br><span><span class="mtk16">plotchar</span><span class="mtk13">(</span><span class="mtk11">open</span><span class="mtk1">&nbsp;</span><span class="mtk18">&gt;</span><span class="mtk1">&nbsp;</span><span class="mtk11">close</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">char</span><span class="mtk18">=</span><span class="mtk29">"🐻"</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span></span></span><br><span><span class="mtk1">..&nbsp;</span><span class="mtk33">image</span><span class="mtk18">::</span><span class="mtk1">&nbsp;</span><span class="mtk33">images</span><span class="mtk18">/</span><span class="mtk33">ReleaseNotes</span><span class="mtk18">-</span><span class="mtk33">Bears_in_plotchar</span><span class="mtk1">.</span><span class="mtk33">png</span></span><br></code></div>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">该函数的新</font></font><code dir="auto">bordercolor</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">参数</font></font><code dir="auto">plotcandle()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">允许您更改蜡烛边框的颜色：</font></font></li>
</ul>
<div class="pine-colorizer not-content colorized" data-id="78z"><div class="pine-colorizer__header"><a class="pine-colorizer__title" href="https://tradingview.com/pine-script-docs/en/v5/Introduction.html" target="_blank" rel="noopener"><span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pine Script™</font></font></span></a><button class="pine-colorizer__copy-btn"><div class="pine-colorizer__tooltip"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">已复制</font></font></div></button></div><code class="monaco-editor-tv-pine-light"><span><span class="mtk9">//</span><span class="mtk9 mtkb">@version=</span><span class="mtk9">4</span></span><br><span><span class="mtk16">study</span><span class="mtk13">(</span><span class="mtk29">"My&nbsp;Script"</span><span class="mtk13">)</span></span><br><span><span class="mtk16">plotcandle</span><span class="mtk13">(</span><span class="mtk11">open</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk11">high</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk11">low</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk11">close</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">title</span><span class="mtk18">=</span><span class="mtk29">'Title'</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">color</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk11">open</span><span class="mtk1">&nbsp;</span><span class="mtk18">&lt;</span><span class="mtk1">&nbsp;</span><span class="mtk11">close</span><span class="mtk1">&nbsp;</span><span class="mtk18">?</span><span class="mtk1">&nbsp;</span><span class="mtk11">color.green</span><span class="mtk1">&nbsp;</span><span class="mtk18">:</span><span class="mtk1">&nbsp;</span><span class="mtk11">color.red</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">wickcolor</span><span class="mtk18">=</span><span class="mtk11">color.black</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">bordercolor</span><span class="mtk18">=</span><span class="mtk11">color.orange</span><span class="mtk13">)</span></span><br></code></div>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">添加的新变量：
</font></font><ul>
<li><code dir="auto">syminfo.description</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- 返回当前符号的描述</font></font></li>
<li><code dir="auto">syminfo.currency</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- 返回当前符号的货币代码（EUR、USD 等）</font></font></li>
<li><code dir="auto">syminfo.type</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- 返回当前符号的类型（股票、期货、指数等）</font></font></li>
</ul>
</li>
</ul>
<h3 id="september-2019" class="md-heading"><a href="#september-2019"><font style="vertical-align: inherit;"><span class="fancy-wrap"><font style="vertical-align: inherit;">2019 年</font></span><font style="vertical-align: inherit;">9 月</font></font><span class="fancy-wrap"><font style="vertical-align: inherit;"></font><span class="icon icon-link" aria-hidden="true"><svg width="28" height="28" viewBox="0 0 28 28"><g fill="currentColor" clip-path="url(#a)"><path d="M14.908 5.558a5.326 5.326 0 1 1 7.533 7.533l-3.236 3.236-1.061-1.061 3.236-3.236a3.826 3.826 0 1 0-5.411-5.411l-3.236 3.236-1.06-1.06 3.235-3.237ZM5.56 14.907a5.326 5.326 0 0 0 7.532 7.533l3.236-3.236-1.061-1.061-3.236 3.236a3.826 3.826 0 1 1-5.411-5.411l3.236-3.236-1.061-1.06-3.236 3.235Z"></path><path d="m16.346 10.592-5.753 5.753 1.061 1.06 5.753-5.752-1.06-1.06Z"></path></g><defs><clipPath id="a"><path fill="#fff" d="M0 0h28v28H0z"></path></clipPath></defs></svg></span></span></a></h3>
<p><font style="vertical-align: inherit;"></font><code dir="auto">strategy</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">添加了函数</font><font style="vertical-align: inherit;">的新参数：</font></font></p>
<ul>
<li><code dir="auto">process_orders_on_close</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">允许经纪商模拟器在收盘时计算策略后尝试执行订单</font></font></li>
<li><code dir="auto">close_entries_rule</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">允许定义平仓的顺序</font></font></li>
</ul>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">进行了部分修复：</font></font></p>
<ul>
<li><code dir="auto">fill()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">函数现在可以正确使用</font></font><code dir="auto">na</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">作为</font></font><code dir="auto">color</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
参数值</font></font></li>
<li><code dir="auto">sign()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">函数现在可以正确计算文字和常量</font></font></li>
</ul>
<p><code dir="auto">str.replace_all(source, target, replacement)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">添加了函数。它将字符串</font></font><code dir="auto">target</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">中出现的每个字符串替换</font></font><code dir="auto">source</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">为</font></font><code dir="auto">replacement</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">字符串</font></font></p>
<h3 id="july-august-2019" class="md-heading"><a href="#july-august-2019"><font style="vertical-align: inherit;"><span class="fancy-wrap"><font style="vertical-align: inherit;">2019年</font></span><font style="vertical-align: inherit;">7月至8月</font></font><span class="fancy-wrap"><font style="vertical-align: inherit;"></font><span class="icon icon-link" aria-hidden="true"><svg width="28" height="28" viewBox="0 0 28 28"><g fill="currentColor" clip-path="url(#a)"><path d="M14.908 5.558a5.326 5.326 0 1 1 7.533 7.533l-3.236 3.236-1.061-1.061 3.236-3.236a3.826 3.826 0 1 0-5.411-5.411l-3.236 3.236-1.06-1.06 3.235-3.237ZM5.56 14.907a5.326 5.326 0 0 0 7.532 7.533l3.236-3.236-1.061-1.061-3.236 3.236a3.826 3.826 0 1 1-5.411-5.411l3.236-3.236-1.061-1.06-3.236 3.235Z"></path><path d="m16.346 10.592-5.753 5.753 1.061 1.06 5.753-5.752-1.06-1.06Z"></path></g><defs><clipPath id="a"><path fill="#fff" d="M0 0h28v28H0z"></path></clipPath></defs></svg></span></span></a></h3>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">添加的新变量：</font></font></p>
<ul>
<li><code dir="auto">timeframe.isseconds</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">当当前分辨率以秒为单位时返回 true</font></font></li>
<li><code dir="auto">timeframe.isminutes</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">当当前分辨率以分钟为单位时返回 true</font></font></li>
<li><code dir="auto">time_close</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">返回当前柱的收盘时间</font></font></li>
</ul>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">一些函数、变量和运算符的行为已经改变：</font></font></p>
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">该</font></font><code dir="auto">time</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">变量比以前针对更多特殊情况返回正确的开仓时间</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">该函数的</font><font style="vertical-align: inherit;">可选</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">秒</font></font></em><font style="vertical-align: inherit;"></font><code dir="auto">timestamp()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">参数允许您将时间设置为秒内</font></font></p>
</li>
<li>
<p><code dir="auto">security()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">功能：</font></font></p>
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">增加了在几秒钟内请求解决方案的可能性：</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1、5、15、30秒（图表分辨率应小于或等于要求的分辨率）</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">减少了其他一些分辨率下可以请求的最大值：</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1 至 1440 分钟</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1 至 365 天</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1 至 52 周</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1 至 12 个月</font></font></p>
</li>
</ul>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">对三元运算符分支求值的改变：</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在 Pine Script™ v3 中，在执行三元运算符期间，会计算其两个分支，因此当将此脚本添加到图表时，即使未调用 long() 函数，也会开立多头仓位：</font></font></p>
</li>
</ul>
<div class="pine-colorizer not-content colorized" data-id="47u"><div class="pine-colorizer__header"><a class="pine-colorizer__title" href="https://tradingview.com/pine-script-docs/en/v5/Introduction.html" target="_blank" rel="noopener"><span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pine Script™</font></font></span></a><button class="pine-colorizer__copy-btn"><div class="pine-colorizer__tooltip"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">已复制</font></font></div></button></div><code class="monaco-editor-tv-pine-light"><span><span class="mtk9">//</span><span class="mtk9 mtkb">@version=</span><span class="mtk9">3</span></span><br><span><span class="mtk16">strategy</span><span class="mtk13">(</span><span class="mtk33">title</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk29">"My&nbsp;Strategy"</span><span class="mtk13">)</span></span><br><span><span class="mtk15">long</span><span class="mtk13">()</span><span class="mtk1">&nbsp;</span><span class="mtk18">=&gt;</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk16">strategy.entry</span><span class="mtk13">(</span><span class="mtk29">"long"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">true</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">1</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">when</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk11">open</span><span class="mtk1">&nbsp;</span><span class="mtk18">&gt;</span><span class="mtk1">&nbsp;</span><span class="mtk11">high</span><span class="mtk13">[</span><span class="mtk12">1</span><span class="mtk13">])</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk12">1</span></span><br><span><span class="mtk33">c</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk12">0</span></span><br><span><span class="mtk33">c</span><span class="mtk1">&nbsp;</span><span class="mtk18">:=</span><span class="mtk1">&nbsp;</span><span class="mtk33">true</span><span class="mtk1">&nbsp;</span><span class="mtk18">?</span><span class="mtk1">&nbsp;</span><span class="mtk12">1</span><span class="mtk1">&nbsp;</span><span class="mtk18">:</span><span class="mtk1">&nbsp;</span><span class="mtk33">long</span><span class="mtk13">()</span></span><br><span><span class="mtk16">plot</span><span class="mtk13">(</span><span class="mtk33">c</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk33">Pine</span><span class="mtk1">&nbsp;</span><span class="mtk33">Script</span><span class="mtk1">™&nbsp;</span><span class="mtk33">v4</span><span class="mtk1">&nbsp;</span><span class="mtk33">contains</span><span class="mtk1">&nbsp;</span><span class="mtk33">built</span><span class="mtk18">-</span><span class="mtk33">in</span><span class="mtk1">&nbsp;</span><span class="mtk33">functions</span><span class="mtk1">&nbsp;</span><span class="mtk33">with</span><span class="mtk1">&nbsp;</span><span class="mtk33">side</span><span class="mtk1">&nbsp;</span><span class="mtk33">effects</span><span class="mtk1">&nbsp;</span><span class="mtk13">(</span><span class="mtk1">&nbsp;``</span><span class="mtk11">line</span><span class="mtk1">.</span><span class="mtk33">new</span><span class="mtk1">``&nbsp;</span><span class="mtk18">and</span><span class="mtk1">&nbsp;``</span><span class="mtk33">label</span><span class="mtk1">.</span><span class="mtk33">new</span><span class="mtk1">``&nbsp;</span><span class="mtk13">)</span><span class="mtk1">.&nbsp;</span><span class="mtk33">If</span><span class="mtk1">&nbsp;</span><span class="mtk33">calls</span><span class="mtk1">&nbsp;</span><span class="mtk18">to</span><span class="mtk1">&nbsp;</span><span class="mtk33">these</span><span class="mtk1">&nbsp;</span><span class="mtk33">functions</span><span class="mtk1">&nbsp;</span><span class="mtk33">are</span><span class="mtk1">&nbsp;</span><span class="mtk33">present</span><span class="mtk1">&nbsp;</span><span class="mtk33">in</span><span class="mtk1">&nbsp;</span><span class="mtk33">both</span><span class="mtk1">&nbsp;</span><span class="mtk33">branches</span><span class="mtk1">&nbsp;</span><span class="mtk33">of</span><span class="mtk1">&nbsp;</span><span class="mtk33">a</span><span class="mtk1">&nbsp;</span><span class="mtk33">ternary</span><span class="mtk1">&nbsp;</span><span class="mtk33">operator</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">both</span><span class="mtk1">&nbsp;</span><span class="mtk33">function</span><span class="mtk1">&nbsp;</span><span class="mtk33">calls</span><span class="mtk1">&nbsp;</span><span class="mtk33">would</span><span class="mtk1">&nbsp;</span><span class="mtk33">be</span><span class="mtk1">&nbsp;</span><span class="mtk33">executed</span><span class="mtk1">&nbsp;</span><span class="mtk33">following</span><span class="mtk1">&nbsp;</span><span class="mtk33">v3</span><span class="mtk1">&nbsp;</span><span class="mtk33">conventions</span><span class="mtk1">.&nbsp;</span><span class="mtk33">Thus</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">in</span><span class="mtk1">&nbsp;</span><span class="mtk33">Pine</span><span class="mtk1">&nbsp;</span><span class="mtk33">Script</span><span class="mtk1">™&nbsp;</span><span class="mtk33">v4</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">only</span><span class="mtk1">&nbsp;</span><span class="mtk33">the</span><span class="mtk1">&nbsp;</span><span class="mtk33">branch</span><span class="mtk1">&nbsp;</span><span class="mtk33">corresponding</span><span class="mtk1">&nbsp;</span><span class="mtk18">to</span><span class="mtk1">&nbsp;</span><span class="mtk33">the</span><span class="mtk1">&nbsp;</span><span class="mtk33">evaluated</span><span class="mtk1">&nbsp;</span><span class="mtk33">condition</span><span class="mtk1">&nbsp;</span><span class="mtk33">is</span><span class="mtk1">&nbsp;</span><span class="mtk33">calculated</span><span class="mtk1">.&nbsp;</span><span class="mtk33">While</span><span class="mtk1">&nbsp;</span><span class="mtk33">this</span><span class="mtk1">&nbsp;</span><span class="mtk33">provides</span><span class="mtk1">&nbsp;</span><span class="mtk33">a</span><span class="mtk1">&nbsp;</span><span class="mtk33">viable</span><span class="mtk1">&nbsp;</span><span class="mtk33">solution</span><span class="mtk1">&nbsp;</span><span class="mtk33">in</span><span class="mtk1">&nbsp;</span><span class="mtk33">some</span><span class="mtk1">&nbsp;</span><span class="mtk33">cases</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">it</span><span class="mtk1">&nbsp;</span><span class="mtk33">will</span><span class="mtk1">&nbsp;</span><span class="mtk33">modify</span><span class="mtk1">&nbsp;</span><span class="mtk33">the</span><span class="mtk1">&nbsp;</span><span class="mtk33">behavior</span><span class="mtk1">&nbsp;</span><span class="mtk33">of</span><span class="mtk1">&nbsp;</span><span class="mtk33">scripts</span><span class="mtk1">&nbsp;</span><span class="mtk33">which</span><span class="mtk1">&nbsp;</span><span class="mtk33">depended</span><span class="mtk1">&nbsp;</span><span class="mtk33">on</span><span class="mtk1">&nbsp;</span><span class="mtk33">the</span><span class="mtk1">&nbsp;</span><span class="mtk33">fact</span><span class="mtk1">&nbsp;</span><span class="mtk33">that</span><span class="mtk1">&nbsp;</span><span class="mtk33">both</span><span class="mtk1">&nbsp;</span><span class="mtk33">branches</span><span class="mtk1">&nbsp;</span><span class="mtk33">of</span><span class="mtk1">&nbsp;</span><span class="mtk33">a</span><span class="mtk1">&nbsp;</span><span class="mtk33">ternary</span><span class="mtk1">&nbsp;</span><span class="mtk33">were</span><span class="mtk1">&nbsp;</span><span class="mtk33">evaluated</span><span class="mtk1">.&nbsp;</span><span class="mtk33">The</span><span class="mtk1">&nbsp;</span><span class="mtk33">solution</span><span class="mtk1">&nbsp;</span><span class="mtk33">is</span><span class="mtk1">&nbsp;</span><span class="mtk18">to</span><span class="mtk1">&nbsp;</span><span class="mtk33">pre</span><span class="mtk18">-</span><span class="mtk33">evaluate</span><span class="mtk1">&nbsp;</span><span class="mtk33">expressions</span><span class="mtk1">&nbsp;</span><span class="mtk33">prior</span><span class="mtk1">&nbsp;</span><span class="mtk18">to</span><span class="mtk1">&nbsp;</span><span class="mtk33">the</span><span class="mtk1">&nbsp;</span><span class="mtk33">ternary</span><span class="mtk1">&nbsp;</span><span class="mtk33">operator</span><span class="mtk1">.&nbsp;</span><span class="mtk33">The</span><span class="mtk1">&nbsp;</span><span class="mtk33">conversion</span><span class="mtk1">&nbsp;</span><span class="mtk33">utility</span><span class="mtk1">&nbsp;</span><span class="mtk33">takes</span><span class="mtk1">&nbsp;</span><span class="mtk33">this</span><span class="mtk1">&nbsp;</span><span class="mtk33">requirement</span><span class="mtk1">&nbsp;</span><span class="mtk33">into</span><span class="mtk1">&nbsp;</span><span class="mtk33">account</span><span class="mtk1">&nbsp;</span><span class="mtk33">when</span><span class="mtk1">&nbsp;</span><span class="mtk33">converting</span><span class="mtk1">&nbsp;</span><span class="mtk33">scripts</span><span class="mtk1">&nbsp;</span><span class="mtk33">from</span><span class="mtk1">&nbsp;</span><span class="mtk33">v3</span><span class="mtk1">&nbsp;</span><span class="mtk18">to</span><span class="mtk1">&nbsp;</span><span class="mtk33">v4</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">so</span><span class="mtk1">&nbsp;</span><span class="mtk33">that</span><span class="mtk1">&nbsp;</span><span class="mtk33">script</span><span class="mtk1">&nbsp;</span><span class="mtk33">behavior</span><span class="mtk1">&nbsp;</span><span class="mtk33">will</span><span class="mtk1">&nbsp;</span><span class="mtk33">be</span><span class="mtk1">&nbsp;</span><span class="mtk33">identical</span><span class="mtk1">&nbsp;</span><span class="mtk33">in</span><span class="mtk1">&nbsp;</span><span class="mtk33">v3</span><span class="mtk1">&nbsp;</span><span class="mtk18">and</span><span class="mtk1">&nbsp;</span><span class="mtk33">v4</span><span class="mtk1">.</span></span><br></code></div>
<h3 id="june-2019" class="md-heading"><a href="#june-2019"><font style="vertical-align: inherit;"><span class="fancy-wrap"><font style="vertical-align: inherit;">2019 年</font></span><font style="vertical-align: inherit;">6 月</font></font><span class="fancy-wrap"><font style="vertical-align: inherit;"></font><span class="icon icon-link" aria-hidden="true"><svg width="28" height="28" viewBox="0 0 28 28"><g fill="currentColor" clip-path="url(#a)"><path d="M14.908 5.558a5.326 5.326 0 1 1 7.533 7.533l-3.236 3.236-1.061-1.061 3.236-3.236a3.826 3.826 0 1 0-5.411-5.411l-3.236 3.236-1.06-1.06 3.235-3.237ZM5.56 14.907a5.326 5.326 0 0 0 7.532 7.533l3.236-3.236-1.061-1.061-3.236 3.236a3.826 3.826 0 1 1-5.411-5.411l3.236-3.236-1.061-1.06-3.236 3.235Z"></path><path d="m16.346 10.592-5.753 5.753 1.061 1.06 5.753-5.752-1.06-1.06Z"></path></g><defs><clipPath id="a"><path fill="#fff" d="M0 0h28v28H0z"></path></clipPath></defs></svg></span></span></a></h3>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">支持绘制对象。添加了</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">标签</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">线条</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图</font></font></li>
<li><code dir="auto">var</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">一次性变量初始化的关键字</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">类型系统改进：
</font></font><ul>
<li><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">系列字符串</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">数据类型</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">显式类型转换函数</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">显式变量类型声明的语法</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">新的</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">输入</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">类型表格</font></font></li>
</ul>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">重命名内置程序和版本 3 到 4 的转换实用程序</font></font></li>
<li><code dir="auto">max_bars_back</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">控制系列变量内部历史缓冲区大小的函数</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pine Script™ 文档版本控制</font></font></li>
</ul>
<h2 id="2018" class="md-heading"><a href="#2018"> <span class="fancy-wrap"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2018</font></font><span class="icon icon-link" aria-hidden="true"><svg width="28" height="28" viewBox="0 0 28 28"><g fill="currentColor" clip-path="url(#a)"><path d="M14.908 5.558a5.326 5.326 0 1 1 7.533 7.533l-3.236 3.236-1.061-1.061 3.236-3.236a3.826 3.826 0 1 0-5.411-5.411l-3.236 3.236-1.06-1.06 3.235-3.237ZM5.56 14.907a5.326 5.326 0 0 0 7.532 7.533l3.236-3.236-1.061-1.061-3.236 3.236a3.826 3.826 0 1 1-5.411-5.411l3.236-3.236-1.061-1.06-3.236 3.235Z"></path><path d="m16.346 10.592-5.753 5.753 1.061 1.06 5.753-5.752-1.06-1.06Z"></path></g><defs><clipPath id="a"><path fill="#fff" d="M0 0h28v28H0z"></path></clipPath></defs></svg></span></span></a></h2>
<h3 id="october-2018" class="md-heading"><a href="#october-2018"><font style="vertical-align: inherit;"><span class="fancy-wrap"><font style="vertical-align: inherit;">2018 年</font></span><font style="vertical-align: inherit;">10 月</font></font><span class="fancy-wrap"><font style="vertical-align: inherit;"></font><span class="icon icon-link" aria-hidden="true"><svg width="28" height="28" viewBox="0 0 28 28"><g fill="currentColor" clip-path="url(#a)"><path d="M14.908 5.558a5.326 5.326 0 1 1 7.533 7.533l-3.236 3.236-1.061-1.061 3.236-3.236a3.826 3.826 0 1 0-5.411-5.411l-3.236 3.236-1.06-1.06 3.235-3.237ZM5.56 14.907a5.326 5.326 0 0 0 7.532 7.533l3.236-3.236-1.061-1.061-3.236 3.236a3.826 3.826 0 1 1-5.411-5.411l3.236-3.236-1.061-1.06-3.236 3.235Z"></path><path d="m16.346 10.592-5.753 5.753 1.061 1.06 5.753-5.752-1.06-1.06Z"></path></g><defs><clipPath id="a"><path fill="#fff" d="M0 0h28v28H0z"></path></clipPath></defs></svg></span></span></a></h3>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">为了增加整个社区可用的指标数量，现在只有高级用户才能发布仅限邀请的脚本。</font></font></li>
</ul>
<h3 id="april-2018" class="md-heading"><a href="#april-2018"><font style="vertical-align: inherit;"><span class="fancy-wrap"><font style="vertical-align: inherit;">2018 年</font></span><font style="vertical-align: inherit;">4 月</font></font><span class="fancy-wrap"><font style="vertical-align: inherit;"></font><span class="icon icon-link" aria-hidden="true"><svg width="28" height="28" viewBox="0 0 28 28"><g fill="currentColor" clip-path="url(#a)"><path d="M14.908 5.558a5.326 5.326 0 1 1 7.533 7.533l-3.236 3.236-1.061-1.061 3.236-3.236a3.826 3.826 0 1 0-5.411-5.411l-3.236 3.236-1.06-1.06 3.235-3.237ZM5.56 14.907a5.326 5.326 0 0 0 7.532 7.533l3.236-3.236-1.061-1.061-3.236 3.236a3.826 3.826 0 1 1-5.411-5.411l3.236-3.236-1.061-1.06-3.236 3.235Z"></path><path d="m16.346 10.592-5.753 5.753 1.061 1.06 5.753-5.752-1.06-1.06Z"></path></g><defs><clipPath id="a"><path fill="#fff" d="M0 0h28v28H0z"></path></clipPath></defs></svg></span></span></a></h3>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">通过重新制定最大亏损计算公式改进了策略测试器。</font></font></li>
</ul>
<h2 id="2017" class="md-heading"><a href="#2017"> <span class="fancy-wrap"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2017</font></font><span class="icon icon-link" aria-hidden="true"><svg width="28" height="28" viewBox="0 0 28 28"><g fill="currentColor" clip-path="url(#a)"><path d="M14.908 5.558a5.326 5.326 0 1 1 7.533 7.533l-3.236 3.236-1.061-1.061 3.236-3.236a3.826 3.826 0 1 0-5.411-5.411l-3.236 3.236-1.06-1.06 3.235-3.237ZM5.56 14.907a5.326 5.326 0 0 0 7.532 7.533l3.236-3.236-1.061-1.061-3.236 3.236a3.826 3.826 0 1 1-5.411-5.411l3.236-3.236-1.061-1.06-3.236 3.235Z"></path><path d="m16.346 10.592-5.753 5.753 1.061 1.06 5.753-5.752-1.06-1.06Z"></path></g><defs><clipPath id="a"><path fill="#fff" d="M0 0h28v28H0z"></path></clipPath></defs></svg></span></span></a></h2>
<h3 id="august-2017" class="md-heading"><a href="#august-2017"><font style="vertical-align: inherit;"><span class="fancy-wrap"><font style="vertical-align: inherit;">2017 年</font></span><font style="vertical-align: inherit;">8 月</font></font><span class="fancy-wrap"><font style="vertical-align: inherit;"></font><span class="icon icon-link" aria-hidden="true"><svg width="28" height="28" viewBox="0 0 28 28"><g fill="currentColor" clip-path="url(#a)"><path d="M14.908 5.558a5.326 5.326 0 1 1 7.533 7.533l-3.236 3.236-1.061-1.061 3.236-3.236a3.826 3.826 0 1 0-5.411-5.411l-3.236 3.236-1.06-1.06 3.235-3.237ZM5.56 14.907a5.326 5.326 0 0 0 7.532 7.533l3.236-3.236-1.061-1.061-3.236 3.236a3.826 3.826 0 1 1-5.411-5.411l3.236-3.236-1.061-1.06-3.236 3.235Z"></path><path d="m16.346 10.592-5.753 5.753 1.061 1.06 5.753-5.752-1.06-1.06Z"></path></g><defs><clipPath id="a"><path fill="#fff" d="M0 0h28v28H0z"></path></clipPath></defs></svg></span></span></a></h3>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用绘图类型函数中的新参数</font></font><code dir="auto">show_last</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，您可以限制绘图上显示的条形数。</font></font></li>
</ul>
<h3 id="june-2017" class="md-heading"><a href="#june-2017"><font style="vertical-align: inherit;"><span class="fancy-wrap"><font style="vertical-align: inherit;">2017 年</font></span><font style="vertical-align: inherit;">6 月</font></font><span class="fancy-wrap"><font style="vertical-align: inherit;"></font><span class="icon icon-link" aria-hidden="true"><svg width="28" height="28" viewBox="0 0 28 28"><g fill="currentColor" clip-path="url(#a)"><path d="M14.908 5.558a5.326 5.326 0 1 1 7.533 7.533l-3.236 3.236-1.061-1.061 3.236-3.236a3.826 3.826 0 1 0-5.411-5.411l-3.236 3.236-1.06-1.06 3.235-3.237ZM5.56 14.907a5.326 5.326 0 0 0 7.532 7.533l3.236-3.236-1.061-1.061-3.236 3.236a3.826 3.826 0 1 1-5.411-5.411l3.236-3.236-1.061-1.06-3.236 3.235Z"></path><path d="m16.346 10.592-5.753 5.753 1.061 1.06 5.753-5.752-1.06-1.06Z"></path></g><defs><clipPath id="a"><path fill="#fff" d="M0 0h28v28H0z"></path></clipPath></defs></svg></span></span></a></h3>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">脚本发布的一个重大改进：现在可以通过发布对话框中的更新按钮来更新脚本，而无需发布新脚本。</font></font></li>
</ul>
<h3 id="may-2017" class="md-heading"><a href="#may-2017"><font style="vertical-align: inherit;"><span class="fancy-wrap"><font style="vertical-align: inherit;">2017 年</font></span><font style="vertical-align: inherit;">5 月</font></font><span class="fancy-wrap"><font style="vertical-align: inherit;"></font><span class="icon icon-link" aria-hidden="true"><svg width="28" height="28" viewBox="0 0 28 28"><g fill="currentColor" clip-path="url(#a)"><path d="M14.908 5.558a5.326 5.326 0 1 1 7.533 7.533l-3.236 3.236-1.061-1.061 3.236-3.236a3.826 3.826 0 1 0-5.411-5.411l-3.236 3.236-1.06-1.06 3.235-3.237ZM5.56 14.907a5.326 5.326 0 0 0 7.532 7.533l3.236-3.236-1.061-1.061-3.236 3.236a3.826 3.826 0 1 1-5.411-5.411l3.236-3.236-1.061-1.06-3.236 3.235Z"></path><path d="m16.346 10.592-5.753 5.753 1.061 1.06 5.753-5.752-1.06-1.06Z"></path></g><defs><clipPath id="a"><path fill="#fff" d="M0 0h28v28H0z"></path></clipPath></defs></svg></span></span></a></h3>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">通过添加可在编译期间计算的新类型常量来扩展类型系统。</font></font></li>
</ul>
<h3 id="april-2017" class="md-heading"><a href="#april-2017"><font style="vertical-align: inherit;"><span class="fancy-wrap"><font style="vertical-align: inherit;">2017 年</font></span><font style="vertical-align: inherit;">4 月</font></font><span class="fancy-wrap"><font style="vertical-align: inherit;"></font><span class="icon icon-link" aria-hidden="true"><svg width="28" height="28" viewBox="0 0 28 28"><g fill="currentColor" clip-path="url(#a)"><path d="M14.908 5.558a5.326 5.326 0 1 1 7.533 7.533l-3.236 3.236-1.061-1.061 3.236-3.236a3.826 3.826 0 1 0-5.411-5.411l-3.236 3.236-1.06-1.06 3.235-3.237ZM5.56 14.907a5.326 5.326 0 0 0 7.532 7.533l3.236-3.236-1.061-1.061-3.236 3.236a3.826 3.826 0 1 1-5.411-5.411l3.236-3.236-1.061-1.06-3.236 3.235Z"></path><path d="m16.346 10.592-5.753 5.753 1.061 1.06 5.753-5.752-1.06-1.06Z"></path></g><defs><clipPath id="a"><path fill="#fff" d="M0 0h28v28H0z"></path></clipPath></defs></svg></span></span></a></h3>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">扩展了关键字参数功能：现在可以在所有内置函数中使用关键字参数。</font></font></li>
<li><font style="vertical-align: inherit;"></font><code dir="auto">barstate.isconfirmed</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">返回条形状态的变量列表中添加了</font><font style="vertical-align: inherit;">一个新变量。它允许您创建仅基于闭合条形计算的指标。</font></font></li>
<li><font style="vertical-align: inherit;"></font><code dir="auto">options</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">该函数的参数</font><font style="vertical-align: inherit;">创建</font></font><code dir="auto">input()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">一个输入，其中包含一组由脚本作者定义的选项。</font></font></li>
</ul>
<h3 id="march-2017" class="md-heading"><a href="#march-2017"><font style="vertical-align: inherit;"><span class="fancy-wrap"><font style="vertical-align: inherit;">2017 年</font></span><font style="vertical-align: inherit;">3 月</font></font><span class="fancy-wrap"><font style="vertical-align: inherit;"></font><span class="icon icon-link" aria-hidden="true"><svg width="28" height="28" viewBox="0 0 28 28"><g fill="currentColor" clip-path="url(#a)"><path d="M14.908 5.558a5.326 5.326 0 1 1 7.533 7.533l-3.236 3.236-1.061-1.061 3.236-3.236a3.826 3.826 0 1 0-5.411-5.411l-3.236 3.236-1.06-1.06 3.235-3.237ZM5.56 14.907a5.326 5.326 0 0 0 7.532 7.533l3.236-3.236-1.061-1.061-3.236 3.236a3.826 3.826 0 1 1-5.411-5.411l3.236-3.236-1.061-1.06-3.236 3.235Z"></path><path d="m16.346 10.592-5.753 5.753 1.061 1.06 5.753-5.752-1.06-1.06Z"></path></g><defs><clipPath id="a"><path fill="#fff" d="M0 0h28v28H0z"></path></clipPath></defs></svg></span></span></a></h3>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pine Script™ v3 现已发布！一些重要变化：
</font></font><ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">函数默认行为的更改</font></font><code dir="auto">security()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：默认情况下，它不再能够访问未来数据。这可以通过参数进行更改</font></font><code dir="auto">lookahead</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">布尔值到数值的隐式转换被数值（整数和浮点数）到布尔值的隐式转换所取代。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">自引用和前向引用变量已被删除。任何使用这些语言结构的 PineScript 代码都可以使用可变变量等效地重写。</font></font></li>
</ul>
</li>
</ul>
<h3 id="february-2017" class="md-heading"><a href="#february-2017"><font style="vertical-align: inherit;"><span class="fancy-wrap"><font style="vertical-align: inherit;">2017 年</font></span><font style="vertical-align: inherit;">2 月</font></font><span class="fancy-wrap"><font style="vertical-align: inherit;"></font><span class="icon icon-link" aria-hidden="true"><svg width="28" height="28" viewBox="0 0 28 28"><g fill="currentColor" clip-path="url(#a)"><path d="M14.908 5.558a5.326 5.326 0 1 1 7.533 7.533l-3.236 3.236-1.061-1.061 3.236-3.236a3.826 3.826 0 1 0-5.411-5.411l-3.236 3.236-1.06-1.06 3.235-3.237ZM5.56 14.907a5.326 5.326 0 0 0 7.532 7.533l3.236-3.236-1.061-1.061-3.236 3.236a3.826 3.826 0 1 1-5.411-5.411l3.236-3.236-1.061-1.06-3.236 3.235Z"></path><path d="m16.346 10.592-5.753 5.753 1.061 1.06 5.753-5.752-1.06-1.06Z"></path></g><defs><clipPath id="a"><path fill="#fff" d="M0 0h28v28H0z"></path></clipPath></defs></svg></span></span></a></h3>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">对策略测试器和策略报告的几项改进：
</font></font><ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">新的买入并持有股权图表——一种新的图表，可让您比较您的策略与“买入并持有”的表现，即，如果您刚刚购买了某种证券并持有它而不进行交易。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在绝对货币值中添加了百分比值。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">添加了“买入并持有回报”以根据最新价格显示买入并持有股权的最终价值。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">附加夏普比率——显示投资组合（证券）的相对有效性，该指标表示平均收益减去无风险收益除以投资收益的标准差。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">滑点让您可以模拟订单以比预期更差的价格成交的情况。它可以通过“属性”对话框或函数中的滑点参数进行设置
</font></font><code dir="auto">strategy()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">佣金允许您按订单价值的百分比、固定价格或每份合约为已下订单添加佣金。已支付佣金金额显示在已支付佣金字段中。佣金大小及其类型可通过“属性”对话框或通过函数中的 commission_type 和 commission_value 参数进行设置</font></font><code dir="auto">strategy()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></li>
</ul>
</li>
</ul>
<h2 id="2016" class="md-heading"><a href="#2016"> <span class="fancy-wrap"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2016</font></font><span class="icon icon-link" aria-hidden="true"><svg width="28" height="28" viewBox="0 0 28 28"><g fill="currentColor" clip-path="url(#a)"><path d="M14.908 5.558a5.326 5.326 0 1 1 7.533 7.533l-3.236 3.236-1.061-1.061 3.236-3.236a3.826 3.826 0 1 0-5.411-5.411l-3.236 3.236-1.06-1.06 3.235-3.237ZM5.56 14.907a5.326 5.326 0 0 0 7.532 7.533l3.236-3.236-1.061-1.061-3.236 3.236a3.826 3.826 0 1 1-5.411-5.411l3.236-3.236-1.061-1.06-3.236 3.235Z"></path><path d="m16.346 10.592-5.753 5.753 1.061 1.06 5.753-5.752-1.06-1.06Z"></path></g><defs><clipPath id="a"><path fill="#fff" d="M0 0h28v28H0z"></path></clipPath></defs></svg></span></span></a></h2>
<h3 id="december-2016" class="md-heading"><a href="#december-2016"><font style="vertical-align: inherit;"><span class="fancy-wrap"><font style="vertical-align: inherit;">2016 年</font></span><font style="vertical-align: inherit;">12 月</font></font><span class="fancy-wrap"><font style="vertical-align: inherit;"></font><span class="icon icon-link" aria-hidden="true"><svg width="28" height="28" viewBox="0 0 28 28"><g fill="currentColor" clip-path="url(#a)"><path d="M14.908 5.558a5.326 5.326 0 1 1 7.533 7.533l-3.236 3.236-1.061-1.061 3.236-3.236a3.826 3.826 0 1 0-5.411-5.411l-3.236 3.236-1.06-1.06 3.235-3.237ZM5.56 14.907a5.326 5.326 0 0 0 7.532 7.533l3.236-3.236-1.061-1.061-3.236 3.236a3.826 3.826 0 1 1-5.411-5.411l3.236-3.236-1.061-1.06-3.236 3.235Z"></path><path d="m16.346 10.592-5.753 5.753 1.061 1.06 5.753-5.752-1.06-1.06Z"></path></g><defs><clipPath id="a"><path fill="#fff" d="M0 0h28v28H0z"></path></clipPath></defs></svg></span></span></a></h3>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">添加了仅限邀请的脚本。仅限邀请的指示符在社区脚本中可见，但未经作者明确许可，任何人都不得使用它们，并且只有作者才能看到源代码。</font></font></li>
</ul>
<h3 id="october-2016" class="md-heading"><a href="#october-2016"><font style="vertical-align: inherit;"><span class="fancy-wrap"><font style="vertical-align: inherit;">2016 年</font></span><font style="vertical-align: inherit;">10 月</font></font><span class="fancy-wrap"><font style="vertical-align: inherit;"></font><span class="icon icon-link" aria-hidden="true"><svg width="28" height="28" viewBox="0 0 28 28"><g fill="currentColor" clip-path="url(#a)"><path d="M14.908 5.558a5.326 5.326 0 1 1 7.533 7.533l-3.236 3.236-1.061-1.061 3.236-3.236a3.826 3.826 0 1 0-5.411-5.411l-3.236 3.236-1.06-1.06 3.235-3.237ZM5.56 14.907a5.326 5.326 0 0 0 7.532 7.533l3.236-3.236-1.061-1.061-3.236 3.236a3.826 3.826 0 1 1-5.411-5.411l3.236-3.236-1.061-1.06-3.236 3.235Z"></path><path d="m16.346 10.592-5.753 5.753 1.061 1.06 5.753-5.752-1.06-1.06Z"></path></g><defs><clipPath id="a"><path fill="#fff" d="M0 0h28v28H0z"></path></clipPath></defs></svg></span></span></a></h3>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">引入指标修订。每次保存指标时，都会获得新的修订，并且可以轻松地从 Pine 编辑器切换到任何过去的修订。</font></font></li>
</ul>
<h3 id="september-2016" class="md-heading"><a href="#september-2016"><font style="vertical-align: inherit;"><span class="fancy-wrap"><font style="vertical-align: inherit;">2016 年</font></span><font style="vertical-align: inherit;">9 月</font></font><span class="fancy-wrap"><font style="vertical-align: inherit;"></font><span class="icon icon-link" aria-hidden="true"><svg width="28" height="28" viewBox="0 0 28 28"><g fill="currentColor" clip-path="url(#a)"><path d="M14.908 5.558a5.326 5.326 0 1 1 7.533 7.533l-3.236 3.236-1.061-1.061 3.236-3.236a3.826 3.826 0 1 0-5.411-5.411l-3.236 3.236-1.06-1.06 3.235-3.237ZM5.56 14.907a5.326 5.326 0 0 0 7.532 7.533l3.236-3.236-1.061-1.061-3.236 3.236a3.826 3.826 0 1 1-5.411-5.411l3.236-3.236-1.061-1.06-3.236 3.235Z"></path><path d="m16.346 10.592-5.753 5.753 1.061 1.06 5.753-5.752-1.06-1.06Z"></path></g><defs><clipPath id="a"><path fill="#fff" d="M0 0h28v28H0z"></path></clipPath></defs></svg></span></span></a></h3>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">现在可以发布带有受保护源代码的指标。这些指标在公共脚本库中可用，任何用户都可以使用它们，但只有作者可以看到源代码。</font></font></li>
</ul>
<h3 id="july-2016" class="md-heading"><a href="#july-2016"><font style="vertical-align: inherit;"><span class="fancy-wrap"><font style="vertical-align: inherit;">2016 年</font></span><font style="vertical-align: inherit;">7 月</font></font><span class="fancy-wrap"><font style="vertical-align: inherit;"></font><span class="icon icon-link" aria-hidden="true"><svg width="28" height="28" viewBox="0 0 28 28"><g fill="currentColor" clip-path="url(#a)"><path d="M14.908 5.558a5.326 5.326 0 1 1 7.533 7.533l-3.236 3.236-1.061-1.061 3.236-3.236a3.826 3.826 0 1 0-5.411-5.411l-3.236 3.236-1.06-1.06 3.235-3.237ZM5.56 14.907a5.326 5.326 0 0 0 7.532 7.533l3.236-3.236-1.061-1.061-3.236 3.236a3.826 3.826 0 1 1-5.411-5.411l3.236-3.236-1.061-1.06-3.236 3.235Z"></path><path d="m16.346 10.592-5.753 5.753 1.061 1.06 5.753-5.752-1.06-1.06Z"></path></g><defs><clipPath id="a"><path fill="#fff" d="M0 0h28v28H0z"></path></clipPath></defs></svg></span></span></a></h3>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">改进了函数的行为</font></font><code dir="auto">fill()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：一次调用现在可以支持几种不同的颜色。</font></font></li>
</ul>
<h3 id="march-2016" class="md-heading"><a href="#march-2016"><font style="vertical-align: inherit;"><span class="fancy-wrap"><font style="vertical-align: inherit;">2016 年</font></span><font style="vertical-align: inherit;">3 月</font></font><span class="fancy-wrap"><font style="vertical-align: inherit;"></font><span class="icon icon-link" aria-hidden="true"><svg width="28" height="28" viewBox="0 0 28 28"><g fill="currentColor" clip-path="url(#a)"><path d="M14.908 5.558a5.326 5.326 0 1 1 7.533 7.533l-3.236 3.236-1.061-1.061 3.236-3.236a3.826 3.826 0 1 0-5.411-5.411l-3.236 3.236-1.06-1.06 3.235-3.237ZM5.56 14.907a5.326 5.326 0 0 0 7.532 7.533l3.236-3.236-1.061-1.061-3.236 3.236a3.826 3.826 0 1 1-5.411-5.411l3.236-3.236-1.061-1.06-3.236 3.235Z"></path><path d="m16.346 10.592-5.753 5.753 1.061 1.06 5.753-5.752-1.06-1.06Z"></path></g><defs><clipPath id="a"><path fill="#fff" d="M0 0h28v28H0z"></path></clipPath></defs></svg></span></span></a></h3>
<ul>
<li><font style="vertical-align: inherit;"></font><code dir="auto">color.new()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
颜色类型变量现在有一个附加参数来设置默认透明度。可以使用函数设置透明度，也可以通过将 alpha 通道值添加到十六进制颜色代码来</font><font style="vertical-align: inherit;">设置透明度。</font></font></li>
</ul>
<h3 id="february-2016" class="md-heading"><a href="#february-2016"><font style="vertical-align: inherit;"><span class="fancy-wrap"><font style="vertical-align: inherit;">2016 年</font></span><font style="vertical-align: inherit;">2 月</font></font><span class="fancy-wrap"><font style="vertical-align: inherit;"></font><span class="icon icon-link" aria-hidden="true"><svg width="28" height="28" viewBox="0 0 28 28"><g fill="currentColor" clip-path="url(#a)"><path d="M14.908 5.558a5.326 5.326 0 1 1 7.533 7.533l-3.236 3.236-1.061-1.061 3.236-3.236a3.826 3.826 0 1 0-5.411-5.411l-3.236 3.236-1.06-1.06 3.235-3.237ZM5.56 14.907a5.326 5.326 0 0 0 7.532 7.533l3.236-3.236-1.061-1.061-3.236 3.236a3.826 3.826 0 1 1-5.411-5.411l3.236-3.236-1.061-1.06-3.236 3.235Z"></path><path d="m16.346 10.592-5.753 5.753 1.061 1.06 5.753-5.752-1.06-1.06Z"></path></g><defs><clipPath id="a"><path fill="#fff" d="M0 0h28v28H0z"></path></clipPath></defs></svg></span></span></a></h3>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">添加了</font></font><code dir="auto">for</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">循环和关键字</font></font><code dir="auto">break</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><code dir="auto">continue</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pine Script™ 现在支持可变变量！使用</font></font><code dir="auto">:=</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">运算符为已定义的变量分配新值。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">对策略进行了多项改进和错误修复。</font></font></li>
</ul>
<h3 id="january-2016" class="md-heading"><a href="#january-2016"><font style="vertical-align: inherit;"><span class="fancy-wrap"><font style="vertical-align: inherit;">2016 年</font></span><font style="vertical-align: inherit;">1 月</font></font><span class="fancy-wrap"><font style="vertical-align: inherit;"></font><span class="icon icon-link" aria-hidden="true"><svg width="28" height="28" viewBox="0 0 28 28"><g fill="currentColor" clip-path="url(#a)"><path d="M14.908 5.558a5.326 5.326 0 1 1 7.533 7.533l-3.236 3.236-1.061-1.061 3.236-3.236a3.826 3.826 0 1 0-5.411-5.411l-3.236 3.236-1.06-1.06 3.235-3.237ZM5.56 14.907a5.326 5.326 0 0 0 7.532 7.533l3.236-3.236-1.061-1.061-3.236 3.236a3.826 3.826 0 1 1-5.411-5.411l3.236-3.236-1.061-1.06-3.236 3.235Z"></path><path d="m16.346 10.592-5.753 5.753 1.061 1.06 5.753-5.752-1.06-1.06Z"></path></g><defs><clipPath id="a"><path fill="#fff" d="M0 0h28v28H0z"></path></clipPath></defs></svg></span></span></a></h3>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">新</font></font><code dir="auto">alertcondition()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">功能允许在基于 Pine Script™ 的指标中创建自定义警报条件。</font></font></li>
</ul>
<h2 id="2015" class="md-heading"><a href="#2015"> <span class="fancy-wrap"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2015</font></font><span class="icon icon-link" aria-hidden="true"><svg width="28" height="28" viewBox="0 0 28 28"><g fill="currentColor" clip-path="url(#a)"><path d="M14.908 5.558a5.326 5.326 0 1 1 7.533 7.533l-3.236 3.236-1.061-1.061 3.236-3.236a3.826 3.826 0 1 0-5.411-5.411l-3.236 3.236-1.06-1.06 3.235-3.237ZM5.56 14.907a5.326 5.326 0 0 0 7.532 7.533l3.236-3.236-1.061-1.061-3.236 3.236a3.826 3.826 0 1 1-5.411-5.411l3.236-3.236-1.061-1.06-3.236 3.235Z"></path><path d="m16.346 10.592-5.753 5.753 1.061 1.06 5.753-5.752-1.06-1.06Z"></path></g><defs><clipPath id="a"><path fill="#fff" d="M0 0h28v28H0z"></path></clipPath></defs></svg></span></span></a></h2>
<h3 id="october-2015" class="md-heading"><a href="#october-2015"><font style="vertical-align: inherit;"><span class="fancy-wrap"><font style="vertical-align: inherit;">2015 年</font></span><font style="vertical-align: inherit;">10 月</font></font><span class="fancy-wrap"><font style="vertical-align: inherit;"></font><span class="icon icon-link" aria-hidden="true"><svg width="28" height="28" viewBox="0 0 28 28"><g fill="currentColor" clip-path="url(#a)"><path d="M14.908 5.558a5.326 5.326 0 1 1 7.533 7.533l-3.236 3.236-1.061-1.061 3.236-3.236a3.826 3.826 0 1 0-5.411-5.411l-3.236 3.236-1.06-1.06 3.235-3.237ZM5.56 14.907a5.326 5.326 0 0 0 7.532 7.533l3.236-3.236-1.061-1.061-3.236 3.236a3.826 3.826 0 1 1-5.411-5.411l3.236-3.236-1.061-1.06-3.236 3.235Z"></path><path d="m16.346 10.592-5.753 5.753 1.061 1.06 5.753-5.752-1.06-1.06Z"></path></g><defs><clipPath id="a"><path fill="#fff" d="M0 0h28v28H0z"></path></clipPath></defs></svg></span></span></a></h3>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pine 已升级至 v2！新版 Pine Script™ 增加了对</font></font><code dir="auto">if</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">语句的支持，使编写更易读、更简洁的代码变得更加容易。</font></font></li>
</ul>
<h3 id="september-2015" class="md-heading"><a href="#september-2015"><font style="vertical-align: inherit;"><span class="fancy-wrap"><font style="vertical-align: inherit;">2015 年</font></span><font style="vertical-align: inherit;">9 月</font></font><span class="fancy-wrap"><font style="vertical-align: inherit;"></font><span class="icon icon-link" aria-hidden="true"><svg width="28" height="28" viewBox="0 0 28 28"><g fill="currentColor" clip-path="url(#a)"><path d="M14.908 5.558a5.326 5.326 0 1 1 7.533 7.533l-3.236 3.236-1.061-1.061 3.236-3.236a3.826 3.826 0 1 0-5.411-5.411l-3.236 3.236-1.06-1.06 3.235-3.237ZM5.56 14.907a5.326 5.326 0 0 0 7.532 7.533l3.236-3.236-1.061-1.061-3.236 3.236a3.826 3.826 0 1 1-5.411-5.411l3.236-3.236-1.061-1.06-3.236 3.235Z"></path><path d="m16.346 10.592-5.753 5.753 1.061 1.06 5.753-5.752-1.06-1.06Z"></path></g><defs><clipPath id="a"><path fill="#fff" d="M0 0h28v28H0z"></path></clipPath></defs></svg></span></span></a></h3>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">为 Pine Script™ 添加了回溯测试功能。现在可以创建交易策略，即可以发送、修改和取消买入或卖出订单的脚本。策略允许您根据算法执行回溯测试（根据历史数据模拟策略交易）和前向测试（根据实时数据模拟策略交易）。有关策略计算和订单执行的详细信息可以在新添加的策略测试器选项卡中查看。</font></font></li>
</ul>
<h3 id="july-2015" class="md-heading"><a href="#july-2015"><font style="vertical-align: inherit;"><span class="fancy-wrap"><font style="vertical-align: inherit;">2015 年</font></span><font style="vertical-align: inherit;">7 月</font></font><span class="fancy-wrap"><font style="vertical-align: inherit;"></font><span class="icon icon-link" aria-hidden="true"><svg width="28" height="28" viewBox="0 0 28 28"><g fill="currentColor" clip-path="url(#a)"><path d="M14.908 5.558a5.326 5.326 0 1 1 7.533 7.533l-3.236 3.236-1.061-1.061 3.236-3.236a3.826 3.826 0 1 0-5.411-5.411l-3.236 3.236-1.06-1.06 3.235-3.237ZM5.56 14.907a5.326 5.326 0 0 0 7.532 7.533l3.236-3.236-1.061-1.061-3.236 3.236a3.826 3.826 0 1 1-5.411-5.411l3.236-3.236-1.061-1.06-3.236 3.235Z"></path><path d="m16.346 10.592-5.753 5.753 1.061 1.06 5.753-5.752-1.06-1.06Z"></path></g><defs><clipPath id="a"><path fill="#fff" d="M0 0h28v28H0z"></path></clipPath></defs></svg></span></span></a></h3>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">新的</font></font><code dir="auto">editable</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">参数允许从指标设置中的样式菜单中隐藏绘图，这样就无法编辑其样式。该参数已添加到以下所有函数中：所有绘图类型</font><font style="vertical-align: inherit;">函数
</font></font><code dir="auto">barcolor()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、、、</font><font style="vertical-align: inherit;">和</font><font style="vertical-align: inherit;">。</font></font><code dir="auto">bgcolor()</code><font style="vertical-align: inherit;"></font><code dir="auto">hline()</code><font style="vertical-align: inherit;"></font><code dir="auto">fill()</code><font style="vertical-align: inherit;"></font></li>
</ul>
<h3 id="june-2015" class="md-heading"><a href="#june-2015"><font style="vertical-align: inherit;"><span class="fancy-wrap"><font style="vertical-align: inherit;">2015 年</font></span><font style="vertical-align: inherit;">6 月</font></font><span class="fancy-wrap"><font style="vertical-align: inherit;"></font><span class="icon icon-link" aria-hidden="true"><svg width="28" height="28" viewBox="0 0 28 28"><g fill="currentColor" clip-path="url(#a)"><path d="M14.908 5.558a5.326 5.326 0 1 1 7.533 7.533l-3.236 3.236-1.061-1.061 3.236-3.236a3.826 3.826 0 1 0-5.411-5.411l-3.236 3.236-1.06-1.06 3.235-3.237ZM5.56 14.907a5.326 5.326 0 0 0 7.532 7.533l3.236-3.236-1.061-1.061-3.236 3.236a3.826 3.826 0 1 1-5.411-5.411l3.236-3.236-1.061-1.06-3.236 3.235Z"></path><path d="m16.346 10.592-5.753 5.753 1.061 1.06 5.753-5.752-1.06-1.06Z"></path></g><defs><clipPath id="a"><path fill="#fff" d="M0 0h28v28H0z"></path></clipPath></defs></svg></span></span></a></h3>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">添加了两个新功能以使用 PineScipt 显示自定义条形集：
</font></font><code dir="auto">plotbar()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><code dir="auto">plotcandle()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></li>
</ul>
<h3 id="april-2015" class="md-heading"><a href="#april-2015"><font style="vertical-align: inherit;"><span class="fancy-wrap"><font style="vertical-align: inherit;">2015 年</font></span><font style="vertical-align: inherit;">4 月</font></font><span class="fancy-wrap"><font style="vertical-align: inherit;"></font><span class="icon icon-link" aria-hidden="true"><svg width="28" height="28" viewBox="0 0 28 28"><g fill="currentColor" clip-path="url(#a)"><path d="M14.908 5.558a5.326 5.326 0 1 1 7.533 7.533l-3.236 3.236-1.061-1.061 3.236-3.236a3.826 3.826 0 1 0-5.411-5.411l-3.236 3.236-1.06-1.06 3.235-3.237ZM5.56 14.907a5.326 5.326 0 0 0 7.532 7.533l3.236-3.236-1.061-1.061-3.236 3.236a3.826 3.826 0 1 1-5.411-5.411l3.236-3.236-1.061-1.06-3.236 3.235Z"></path><path d="m16.346 10.592-5.753 5.753 1.061 1.06 5.753-5.752-1.06-1.06Z"></path></g><defs><clipPath id="a"><path fill="#fff" d="M0 0h28v28H0z"></path></clipPath></defs></svg></span></span></a></h3>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">向函数添加了两个新形状</font></font><code dir="auto">plotshape()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：shape.labelup 和shape.labeldown。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PineScipt 编辑器已经改进并移至页面底部的新面板。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">为函数添加了一个新</font></font><code dir="auto">step</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">参数</font></font><code dir="auto">input()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，允许指定指标输入的步长。</font></font></li>
</ul>
<h3 id="march-2015" class="md-heading"><a href="#march-2015"><font style="vertical-align: inherit;"><span class="fancy-wrap"><font style="vertical-align: inherit;">2015 年</font></span><font style="vertical-align: inherit;">3 月</font></font><span class="fancy-wrap"><font style="vertical-align: inherit;"></font><span class="icon icon-link" aria-hidden="true"><svg width="28" height="28" viewBox="0 0 28 28"><g fill="currentColor" clip-path="url(#a)"><path d="M14.908 5.558a5.326 5.326 0 1 1 7.533 7.533l-3.236 3.236-1.061-1.061 3.236-3.236a3.826 3.826 0 1 0-5.411-5.411l-3.236 3.236-1.06-1.06 3.235-3.237ZM5.56 14.907a5.326 5.326 0 0 0 7.532 7.533l3.236-3.236-1.061-1.061-3.236 3.236a3.826 3.826 0 1 1-5.411-5.411l3.236-3.236-1.061-1.06-3.236 3.235Z"></path><path d="m16.346 10.592-5.753 5.753 1.061 1.06 5.753-5.752-1.06-1.06Z"></path></g><defs><clipPath id="a"><path fill="#fff" d="M0 0h28v28H0z"></path></clipPath></defs></svg></span></span></a></h3>
<ul>
<li><font style="vertical-align: inherit;"></font><code dir="auto">source</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">增加了对函数类型</font><font style="vertical-align: inherit;">输入的支持</font></font><code dir="auto">input()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
，允许从其设置中选择指标计算的数据源。</font></font></li>
</ul>
<h3 id="february-2015" class="md-heading"><a href="#february-2015"><font style="vertical-align: inherit;"><span class="fancy-wrap"><font style="vertical-align: inherit;">2015 年</font></span><font style="vertical-align: inherit;">2 月</font></font><span class="fancy-wrap"><font style="vertical-align: inherit;"></font><span class="icon icon-link" aria-hidden="true"><svg width="28" height="28" viewBox="0 0 28 28"><g fill="currentColor" clip-path="url(#a)"><path d="M14.908 5.558a5.326 5.326 0 1 1 7.533 7.533l-3.236 3.236-1.061-1.061 3.236-3.236a3.826 3.826 0 1 0-5.411-5.411l-3.236 3.236-1.06-1.06 3.235-3.237ZM5.56 14.907a5.326 5.326 0 0 0 7.532 7.533l3.236-3.236-1.061-1.061-3.236 3.236a3.826 3.826 0 1 1-5.411-5.411l3.236-3.236-1.061-1.06-3.236 3.235Z"></path><path d="m16.346 10.592-5.753 5.753 1.061 1.06 5.753-5.752-1.06-1.06Z"></path></g><defs><clipPath id="a"><path fill="#fff" d="M0 0h28v28H0z"></path></clipPath></defs></svg></span></span></a></h3>
<ul>
<li><font style="vertical-align: inherit;"></font><code dir="auto">text</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">向</font></font><code dir="auto">plotshape()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><code dir="auto">plotchar()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
函数</font><font style="vertical-align: inherit;">添加了新参数。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">为函数添加了四种新形状</font></font><code dir="auto">plotshape()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：shape.arrowup、shape.arrowdown、shape.square、shape.diamond。</font></font></li>
</ul>
<h2 id="2014" class="md-heading"><a href="#2014"> <span class="fancy-wrap"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2014</font></font><span class="icon icon-link" aria-hidden="true"><svg width="28" height="28" viewBox="0 0 28 28"><g fill="currentColor" clip-path="url(#a)"><path d="M14.908 5.558a5.326 5.326 0 1 1 7.533 7.533l-3.236 3.236-1.061-1.061 3.236-3.236a3.826 3.826 0 1 0-5.411-5.411l-3.236 3.236-1.06-1.06 3.235-3.237ZM5.56 14.907a5.326 5.326 0 0 0 7.532 7.533l3.236-3.236-1.061-1.061-3.236 3.236a3.826 3.826 0 1 1-5.411-5.411l3.236-3.236-1.061-1.06-3.236 3.235Z"></path><path d="m16.346 10.592-5.753 5.753 1.061 1.06 5.753-5.752-1.06-1.06Z"></path></g><defs><clipPath id="a"><path fill="#fff" d="M0 0h28v28H0z"></path></clipPath></defs></svg></span></span></a></h2>
<h3 id="august-2014" class="md-heading"><a href="#august-2014"><font style="vertical-align: inherit;"><span class="fancy-wrap"><font style="vertical-align: inherit;">2014 年</font></span><font style="vertical-align: inherit;">8 月</font></font><span class="fancy-wrap"><font style="vertical-align: inherit;"></font><span class="icon icon-link" aria-hidden="true"><svg width="28" height="28" viewBox="0 0 28 28"><g fill="currentColor" clip-path="url(#a)"><path d="M14.908 5.558a5.326 5.326 0 1 1 7.533 7.533l-3.236 3.236-1.061-1.061 3.236-3.236a3.826 3.826 0 1 0-5.411-5.411l-3.236 3.236-1.06-1.06 3.235-3.237ZM5.56 14.907a5.326 5.326 0 0 0 7.532 7.533l3.236-3.236-1.061-1.061-3.236 3.236a3.826 3.826 0 1 1-5.411-5.411l3.236-3.236-1.061-1.06-3.236 3.235Z"></path><path d="m16.346 10.592-5.753 5.753 1.061 1.06 5.753-5.752-1.06-1.06Z"></path></g><defs><clipPath id="a"><path fill="#fff" d="M0 0h28v28H0z"></path></clipPath></defs></svg></span></span></a></h3>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">改进了脚本共享功能，改变了指标菜单的布局，并将已发布的脚本与想法分开。</font></font></li>
</ul>
<h3 id="july-2014" class="md-heading"><a href="#july-2014"><font style="vertical-align: inherit;"><span class="fancy-wrap"><font style="vertical-align: inherit;">2014 年</font></span><font style="vertical-align: inherit;">7 月</font></font><span class="fancy-wrap"><font style="vertical-align: inherit;"></font><span class="icon icon-link" aria-hidden="true"><svg width="28" height="28" viewBox="0 0 28 28"><g fill="currentColor" clip-path="url(#a)"><path d="M14.908 5.558a5.326 5.326 0 1 1 7.533 7.533l-3.236 3.236-1.061-1.061 3.236-3.236a3.826 3.826 0 1 0-5.411-5.411l-3.236 3.236-1.06-1.06 3.235-3.237ZM5.56 14.907a5.326 5.326 0 0 0 7.532 7.533l3.236-3.236-1.061-1.061-3.236 3.236a3.826 3.826 0 1 1-5.411-5.411l3.236-3.236-1.061-1.06-3.236 3.235Z"></path><path d="m16.346 10.592-5.753 5.753 1.061 1.06 5.753-5.752-1.06-1.06Z"></path></g><defs><clipPath id="a"><path fill="#fff" d="M0 0h28v28H0z"></path></clipPath></defs></svg></span></span></a></h3>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">添加了三个新的绘图函数，、、</font></font><code dir="auto">plotshape()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><code dir="auto">plotchar()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
</font></font><code dir="auto">plotarrow()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">适用于需要在不画线的情况下突出显示图表上的特定条形图的情况。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">将 QUANDL 数据集成到 Pine Script™ 中。可以通过将 QUANDL 行情器传递给函数来访问数据</font></font><code dir="auto">security</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></li>
</ul>
<h3 id="june-2014" class="md-heading"><a href="#june-2014"><font style="vertical-align: inherit;"><span class="fancy-wrap"><font style="vertical-align: inherit;">2014 年</font></span><font style="vertical-align: inherit;">6 月</font></font><span class="fancy-wrap"><font style="vertical-align: inherit;"></font><span class="icon icon-link" aria-hidden="true"><svg width="28" height="28" viewBox="0 0 28 28"><g fill="currentColor" clip-path="url(#a)"><path d="M14.908 5.558a5.326 5.326 0 1 1 7.533 7.533l-3.236 3.236-1.061-1.061 3.236-3.236a3.826 3.826 0 1 0-5.411-5.411l-3.236 3.236-1.06-1.06 3.235-3.237ZM5.56 14.907a5.326 5.326 0 0 0 7.532 7.533l3.236-3.236-1.061-1.061-3.236 3.236a3.826 3.826 0 1 1-5.411-5.411l3.236-3.236-1.061-1.06-3.236 3.235Z"></path><path d="m16.346 10.592-5.753 5.753 1.061 1.06 5.753-5.752-1.06-1.06Z"></path></g><defs><clipPath id="a"><path fill="#fff" d="M0 0h28v28H0z"></path></clipPath></defs></svg></span></span></a></h3>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">添加了 Pine Script™ 共享，使程序员和交易者能够与 TradingView 社区的其他成员分享他们的脚本。</font></font></li>
</ul>
<h3 id="april-2014" class="md-heading"><a href="#april-2014"><font style="vertical-align: inherit;"><span class="fancy-wrap"><font style="vertical-align: inherit;">2014 年</font></span><font style="vertical-align: inherit;">4 月</font></font><span class="fancy-wrap"><font style="vertical-align: inherit;"></font><span class="icon icon-link" aria-hidden="true"><svg width="28" height="28" viewBox="0 0 28 28"><g fill="currentColor" clip-path="url(#a)"><path d="M14.908 5.558a5.326 5.326 0 1 1 7.533 7.533l-3.236 3.236-1.061-1.061 3.236-3.236a3.826 3.826 0 1 0-5.411-5.411l-3.236 3.236-1.06-1.06 3.235-3.237ZM5.56 14.907a5.326 5.326 0 0 0 7.532 7.533l3.236-3.236-1.061-1.061-3.236 3.236a3.826 3.826 0 1 1-5.411-5.411l3.236-3.236-1.061-1.06-3.236 3.235Z"></path><path d="m16.346 10.592-5.753 5.753 1.061 1.06 5.753-5.752-1.06-1.06Z"></path></g><defs><clipPath id="a"><path fill="#fff" d="M0 0h28v28H0z"></path></clipPath></defs></svg></span></span></a></h3>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">添加了换行功能。</font></font></li>
</ul>
<h3 id="february-2014" class="md-heading"><a href="#february-2014"><font style="vertical-align: inherit;"><span class="fancy-wrap"><font style="vertical-align: inherit;">2014 年</font></span><font style="vertical-align: inherit;">2 月</font></font><span class="fancy-wrap"><font style="vertical-align: inherit;"></font><span class="icon icon-link" aria-hidden="true"><svg width="28" height="28" viewBox="0 0 28 28"><g fill="currentColor" clip-path="url(#a)"><path d="M14.908 5.558a5.326 5.326 0 1 1 7.533 7.533l-3.236 3.236-1.061-1.061 3.236-3.236a3.826 3.826 0 1 0-5.411-5.411l-3.236 3.236-1.06-1.06 3.235-3.237ZM5.56 14.907a5.326 5.326 0 0 0 7.532 7.533l3.236-3.236-1.061-1.061-3.236 3.236a3.826 3.826 0 1 1-5.411-5.411l3.236-3.236-1.061-1.06-3.236 3.235Z"></path><path d="m16.346 10.592-5.753 5.753 1.061 1.06 5.753-5.752-1.06-1.06Z"></path></g><defs><clipPath id="a"><path fill="#fff" d="M0 0h28v28H0z"></path></clipPath></defs></svg></span></span></a></h3>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">增加了对输入的支持，允许用户通过属性窗口编辑指标输入，而无需编辑 Pine 脚本。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">添加了自引用变量。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">增加了对多行函数的支持。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">实现了类型转换机制，在需要时自动将常量和简单的浮点数和整数值转换为系列。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">增加了几个新功能并改进了现有功能：
</font></font><ul>
<li><code dir="auto">barssince()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并</font></font><code dir="auto">valuewhen()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">允许您更轻松地检查历史数据的情况。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">新</font></font><code dir="auto">barcolor()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">功能允许您根据特定条件的填充为条形指定颜色。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">与该函数类似</font></font><code dir="auto">barcolor()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，该</font></font><code dir="auto">bgcolor()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">函数改变背景的颜色。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">重新设计了该</font></font><code dir="auto">security()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">功能，进一步扩展了其功能。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">改进了该</font></font><code dir="auto">fill()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">功能，使得它可以在一个脚本中多次使用。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">添加了</font></font><code dir="auto">round()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">将浮点值四舍五入并将其转换为整数的函数。</font></font></li>
</ul>
</li>
</ul>
<h2 id="2013" class="md-heading"><a href="#2013"> <span class="fancy-wrap"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2013</font></font><span class="icon icon-link" aria-hidden="true"><svg width="28" height="28" viewBox="0 0 28 28"><g fill="currentColor" clip-path="url(#a)"><path d="M14.908 5.558a5.326 5.326 0 1 1 7.533 7.533l-3.236 3.236-1.061-1.061 3.236-3.236a3.826 3.826 0 1 0-5.411-5.411l-3.236 3.236-1.06-1.06 3.235-3.237ZM5.56 14.907a5.326 5.326 0 0 0 7.532 7.533l3.236-3.236-1.061-1.061-3.236 3.236a3.826 3.826 0 1 1-5.411-5.411l3.236-3.236-1.061-1.06-3.236 3.235Z"></path><path d="m16.346 10.592-5.753 5.753 1.061 1.06 5.753-5.752-1.06-1.06Z"></path></g><defs><clipPath id="a"><path fill="#fff" d="M0 0h28v28H0z"></path></clipPath></defs></svg></span></span></a></h2>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pine Script™ 的第一个版本于 12 月 13 日向所有 TradingView 用户推出，最初是作为公开测试版。</font></font></li>
</ul>      </div> <div class="pagination-buttons not-content" data-astro-cid-xgirumru=""> <a href="/pine-script-docs/error-messages" class="pagination-card" data-pagefind-ignore="" data-astro-cid-assl6cvf=""> <p data-astro-cid-assl6cvf=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">以前的</font></font></p> <h4 class="pagination-card-header" data-astro-cid-assl6cvf=""> <svg width="28" height="28" viewBox="0 0 28 28" data-astro-cid-assl6cvf="" data-icon="theme/arrow-back">  <use xlink:href="#ai:local:theme/arrow-back"></use>  </svg><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">错误消息  </font></font></h4> </a>  <a href="/pine-script-docs/migration-guides/to-pine-version-5" class="pagination-card" data-pagefind-ignore="" data-astro-cid-assl6cvf=""> <p data-astro-cid-assl6cvf=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">下一个</font></font></p> <h4 class="pagination-card-header" data-astro-cid-assl6cvf=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">  转至 Pine Script™ 版本 5</font></font><svg width="28" height="28" viewBox="0 0 28 28" data-astro-cid-assl6cvf="" data-icon="theme/arrow">  <symbol id="ai:local:theme/arrow"><path fill="none" stroke="var(--arrow-fill-color, #131722)" d="m11 8 6 6-6 6"></path></symbol><use xlink:href="#ai:local:theme/arrow"></use>  </svg> </h4> </a>  </div>  </main>   <div id="toc" data-pagefind-ignore="" data-astro-cid-oor6cujd=""><aside class="document-toc-container ml-4 w-48" data-astro-cid-oor6cujd=""><section data-astro-cid-oor6cujd=""><header data-astro-cid-oor6cujd=""><h2 class="toc-header" data-astro-cid-oor6cujd=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在本页</font></font></h2></header><ul class="" id="toc-entries" data-astro-cid-oor6cujd=""><a href="#release-notes" class="document-toc-link" data-astro-cid-oor6cujd=""><li class="l-2" data-current="" data-astro-cid-oor6cujd=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">发行说明</font></font></li></a><a href="#2024" class="document-toc-link" data-astro-cid-oor6cujd=""><li class="l-3" data-astro-cid-oor6cujd=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2024</font></font></li></a><a href="#june-2024" class="document-toc-link" data-astro-cid-oor6cujd=""><li class="l-4" data-astro-cid-oor6cujd=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2024 年 6 月</font></font></li></a><a href="#pine-script-enums" class="document-toc-link" data-astro-cid-oor6cujd=""><li class="l-5" data-astro-cid-oor6cujd=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pine Script™ 枚举</font></font></li></a><a href="#may-2024" class="document-toc-link" data-astro-cid-oor6cujd=""><li class="l-4" data-astro-cid-oor6cujd=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2024 年 5 月</font></font></li></a><a href="#pine-profiler" class="document-toc-link" data-astro-cid-oor6cujd=""><li class="l-5" data-astro-cid-oor6cujd=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">松木剖面仪</font></font></li></a><a href="#pine-editor-improvements" class="document-toc-link" data-astro-cid-oor6cujd=""><li class="l-5" data-astro-cid-oor6cujd=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pine 编辑器改进</font></font></li></a><a href="#april-2024" class="document-toc-link" data-astro-cid-oor6cujd=""><li class="l-4" data-astro-cid-oor6cujd=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2024 年 4 月</font></font></li></a><a href="#march-2024" class="document-toc-link" data-astro-cid-oor6cujd=""><li class="l-4" data-astro-cid-oor6cujd=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2024 年 3 月</font></font></li></a><a href="#february-2024" class="document-toc-link" data-astro-cid-oor6cujd=""><li class="l-4" data-astro-cid-oor6cujd=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2024 年 2 月</font></font></li></a><a href="#january-2024" class="document-toc-link" data-astro-cid-oor6cujd=""><li class="l-4" data-astro-cid-oor6cujd=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2024 年 1 月</font></font></li></a><a href="#2023" class="document-toc-link" data-astro-cid-oor6cujd=""><li class="l-3" data-astro-cid-oor6cujd=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2023</font></font></li></a><a href="#december-2023" class="document-toc-link" data-astro-cid-oor6cujd=""><li class="l-4" data-astro-cid-oor6cujd=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2023 年 12 月</font></font></li></a><a href="#november-2023" class="document-toc-link" data-astro-cid-oor6cujd=""><li class="l-4" data-astro-cid-oor6cujd=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2023 年 11 月</font></font></li></a><a href="#october-2023" class="document-toc-link" data-astro-cid-oor6cujd=""><li class="l-4" data-astro-cid-oor6cujd=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2023 年 10 月</font></font></li></a><a href="#pine-script-polylines" class="document-toc-link" data-astro-cid-oor6cujd=""><li class="l-5" data-astro-cid-oor6cujd=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pine Script™ 折线</font></font></li></a><a href="#september-2023" class="document-toc-link" data-astro-cid-oor6cujd=""><li class="l-4" data-astro-cid-oor6cujd=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2023 年 9 月</font></font></li></a><a href="#august-2023" class="document-toc-link" data-astro-cid-oor6cujd=""><li class="l-4" data-astro-cid-oor6cujd=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2023 年 8 月</font></font></li></a><a href="#pine-script-maps" class="document-toc-link" data-astro-cid-oor6cujd=""><li class="l-5" data-astro-cid-oor6cujd=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pine Script™ 地图</font></font></li></a><a href="#july-2023" class="document-toc-link" data-astro-cid-oor6cujd=""><li class="l-4" data-astro-cid-oor6cujd=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2023 年 7 月</font></font></li></a><a href="#june-2023" class="document-toc-link" data-astro-cid-oor6cujd=""><li class="l-4" data-astro-cid-oor6cujd=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2023 年 6 月</font></font></li></a><a href="#may-2023" class="document-toc-link" data-astro-cid-oor6cujd=""><li class="l-4" data-astro-cid-oor6cujd=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2023 年 5 月</font></font></li></a><a href="#april-2023" class="document-toc-link" data-astro-cid-oor6cujd=""><li class="l-4" data-astro-cid-oor6cujd=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2023 年 4 月</font></font></li></a><a href="#march-2023" class="document-toc-link" data-astro-cid-oor6cujd=""><li class="l-4" data-astro-cid-oor6cujd=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2023 年 3 月</font></font></li></a><a href="#february-2023" class="document-toc-link" data-astro-cid-oor6cujd=""><li class="l-4" data-astro-cid-oor6cujd=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2023 年 2 月</font></font></li></a><a href="#pine-script-methods" class="document-toc-link" data-astro-cid-oor6cujd=""><li class="l-5" data-astro-cid-oor6cujd=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pine Script™ 方法</font></font></li></a><a href="#january-2023" class="document-toc-link" data-astro-cid-oor6cujd=""><li class="l-4" data-astro-cid-oor6cujd=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2023 年 1 月</font></font></li></a><a href="#2022" class="document-toc-link" data-astro-cid-oor6cujd=""><li class="l-3" data-astro-cid-oor6cujd=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2022</font></font></li></a><a href="#december-2022" class="document-toc-link" data-astro-cid-oor6cujd=""><li class="l-4" data-astro-cid-oor6cujd=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2022 年 12 月</font></font></li></a><a href="#pine-objects" class="document-toc-link" data-astro-cid-oor6cujd=""><li class="l-5" data-astro-cid-oor6cujd=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">松木物品</font></font></li></a><a href="#november-2022" class="document-toc-link" data-astro-cid-oor6cujd=""><li class="l-4" data-astro-cid-oor6cujd=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2022 年 11 月</font></font></li></a><a href="#october-2022" class="document-toc-link" data-astro-cid-oor6cujd=""><li class="l-4" data-astro-cid-oor6cujd=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2022 年 10 月</font></font></li></a><a href="#september-2022" class="document-toc-link" data-astro-cid-oor6cujd=""><li class="l-4" data-astro-cid-oor6cujd=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2022 年 9 月</font></font></li></a><a href="#august-2022" class="document-toc-link" data-astro-cid-oor6cujd=""><li class="l-4" data-astro-cid-oor6cujd=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2022 年 8 月</font></font></li></a><a href="#july-2022" class="document-toc-link" data-astro-cid-oor6cujd=""><li class="l-4" data-astro-cid-oor6cujd=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2022 年 7 月</font></font></li></a><a href="#june-2022" class="document-toc-link" data-astro-cid-oor6cujd=""><li class="l-4" data-astro-cid-oor6cujd=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2022 年 6 月</font></font></li></a><a href="#may-2022" class="document-toc-link" data-astro-cid-oor6cujd=""><li class="l-4" data-astro-cid-oor6cujd=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2022 年 5 月</font></font></li></a><a href="#april-2022" class="document-toc-link" data-astro-cid-oor6cujd=""><li class="l-4" data-astro-cid-oor6cujd=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2022 年 4 月</font></font></li></a><a href="#march-2022" class="document-toc-link" data-astro-cid-oor6cujd=""><li class="l-4" data-astro-cid-oor6cujd=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2022 年 3 月</font></font></li></a><a href="#table-merging-and-cell-tooltips" class="document-toc-link" data-astro-cid-oor6cujd=""><li class="l-5" data-astro-cid-oor6cujd=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表格合并和单元格工具提示</font></font></li></a><a href="#february-2022" class="document-toc-link" data-astro-cid-oor6cujd=""><li class="l-4" data-astro-cid-oor6cujd=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2022 年 2 月</font></font></li></a><a href="#january-2022" class="document-toc-link" data-astro-cid-oor6cujd=""><li class="l-4" data-astro-cid-oor6cujd=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2022 年 1 月</font></font></li></a><a href="#2021" class="document-toc-link" data-astro-cid-oor6cujd=""><li class="l-3" data-astro-cid-oor6cujd=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2021</font></font></li></a><a href="#december-2021" class="document-toc-link" data-astro-cid-oor6cujd=""><li class="l-4" data-astro-cid-oor6cujd=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2021 年 12 月</font></font></li></a><a href="#linefills" class="document-toc-link" data-astro-cid-oor6cujd=""><li class="l-5" data-astro-cid-oor6cujd=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">线填充</font></font></li></a><a href="#new-functions-for-string-manipulation" class="document-toc-link" data-astro-cid-oor6cujd=""><li class="l-5" data-astro-cid-oor6cujd=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">字符串操作的新函数</font></font></li></a><a href="#textboxes" class="document-toc-link" data-astro-cid-oor6cujd=""><li class="l-5" data-astro-cid-oor6cujd=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">文本框</font></font></li></a><a href="#new-built-in-variables" class="document-toc-link" data-astro-cid-oor6cujd=""><li class="l-5" data-astro-cid-oor6cujd=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">新的内置变量</font></font></li></a><a href="#november-2021" class="document-toc-link" data-astro-cid-oor6cujd=""><li class="l-4" data-astro-cid-oor6cujd=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2021 年 11 月</font></font></li></a><a href="#forin" class="document-toc-link" data-astro-cid-oor6cujd=""><li class="l-5" data-astro-cid-oor6cujd=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">对于…在</font></font></li></a><a href="#function-overloads" class="document-toc-link" data-astro-cid-oor6cujd=""><li class="l-5" data-astro-cid-oor6cujd=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">函数重载</font></font></li></a><a href="#currency-conversion" class="document-toc-link" data-astro-cid-oor6cujd=""><li class="l-5" data-astro-cid-oor6cujd=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">货币转换</font></font></li></a><a href="#october-2021" class="document-toc-link" data-astro-cid-oor6cujd=""><li class="l-4" data-astro-cid-oor6cujd=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2021 年 10 月</font></font></li></a><a href="#new-features" class="document-toc-link" data-astro-cid-oor6cujd=""><li class="l-5" data-astro-cid-oor6cujd=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">新功能</font></font></li></a><a href="#changes" class="document-toc-link" data-astro-cid-oor6cujd=""><li class="l-5" data-astro-cid-oor6cujd=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">变化</font></font></li></a><a href="#september-2021" class="document-toc-link" data-astro-cid-oor6cujd=""><li class="l-4" data-astro-cid-oor6cujd=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2021 年 9 月</font></font></li></a><a href="#july-2021" class="document-toc-link" data-astro-cid-oor6cujd=""><li class="l-4" data-astro-cid-oor6cujd=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2021 年 7 月</font></font></li></a><a href="#june-2021" class="document-toc-link" data-astro-cid-oor6cujd=""><li class="l-4" data-astro-cid-oor6cujd=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2021 年 6 月</font></font></li></a><a href="#may-2021" class="document-toc-link" data-astro-cid-oor6cujd=""><li class="l-4" data-astro-cid-oor6cujd=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2021 年 5 月</font></font></li></a><a href="#april-2021" class="document-toc-link" data-astro-cid-oor6cujd=""><li class="l-4" data-astro-cid-oor6cujd=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2021 年 4 月</font></font></li></a><a href="#march-2021" class="document-toc-link" data-astro-cid-oor6cujd=""><li class="l-4" data-astro-cid-oor6cujd=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2021 年 3 月</font></font></li></a><a href="#february-2021" class="document-toc-link" data-astro-cid-oor6cujd=""><li class="l-4" data-astro-cid-oor6cujd=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2021 年 2 月</font></font></li></a><a href="#january-2021" class="document-toc-link" data-astro-cid-oor6cujd=""><li class="l-4" data-astro-cid-oor6cujd=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2021 年 1 月</font></font></li></a><a href="#2020" class="document-toc-link" data-astro-cid-oor6cujd=""><li class="l-3" data-astro-cid-oor6cujd=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2020</font></font></li></a><a href="#december-2020" class="document-toc-link" data-astro-cid-oor6cujd=""><li class="l-4" data-astro-cid-oor6cujd=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2020 年 12 月</font></font></li></a><a href="#november-2020" class="document-toc-link" data-astro-cid-oor6cujd=""><li class="l-4" data-astro-cid-oor6cujd=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2020 年 11 月</font></font></li></a><a href="#october-2020" class="document-toc-link" data-astro-cid-oor6cujd=""><li class="l-4" data-astro-cid-oor6cujd=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2020 年 10 月</font></font></li></a><a href="#september-2020" class="document-toc-link" data-astro-cid-oor6cujd=""><li class="l-4" data-astro-cid-oor6cujd=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2020 年 9 月</font></font></li></a><a href="#august-2020" class="document-toc-link" data-astro-cid-oor6cujd=""><li class="l-4" data-astro-cid-oor6cujd=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2020 年 8 月</font></font></li></a><a href="#july-2020" class="document-toc-link" data-astro-cid-oor6cujd=""><li class="l-4" data-astro-cid-oor6cujd=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2020 年 7 月</font></font></li></a><a href="#june-2020" class="document-toc-link" data-astro-cid-oor6cujd=""><li class="l-4" data-astro-cid-oor6cujd=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2020 年 6 月</font></font></li></a><a href="#may-2020" class="document-toc-link" data-astro-cid-oor6cujd=""><li class="l-4" data-astro-cid-oor6cujd=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2020 年 5 月</font></font></li></a><a href="#april-2020" class="document-toc-link" data-astro-cid-oor6cujd=""><li class="l-4" data-astro-cid-oor6cujd=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2020 年 4 月</font></font></li></a><a href="#march-2020" class="document-toc-link" data-astro-cid-oor6cujd=""><li class="l-4" data-astro-cid-oor6cujd=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2020 年 3 月</font></font></li></a><a href="#february-2020" class="document-toc-link" data-astro-cid-oor6cujd=""><li class="l-4" data-astro-cid-oor6cujd=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2020 年 2 月</font></font></li></a><a href="#january-2020" class="document-toc-link" data-astro-cid-oor6cujd=""><li class="l-4" data-astro-cid-oor6cujd=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2020 年 1 月</font></font></li></a><a href="#2019" class="document-toc-link" data-astro-cid-oor6cujd=""><li class="l-3" data-astro-cid-oor6cujd=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2019</font></font></li></a><a href="#december-2019" class="document-toc-link" data-astro-cid-oor6cujd=""><li class="l-4" data-astro-cid-oor6cujd=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2019 年 12 月</font></font></li></a><a href="#october-2019" class="document-toc-link" data-astro-cid-oor6cujd=""><li class="l-4" data-astro-cid-oor6cujd=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2019 年 10 月</font></font></li></a><a href="#september-2019" class="document-toc-link" data-astro-cid-oor6cujd=""><li class="l-4" data-astro-cid-oor6cujd=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2019 年 9 月</font></font></li></a><a href="#july-august-2019" class="document-toc-link" data-astro-cid-oor6cujd=""><li class="l-4" data-astro-cid-oor6cujd=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2019年7月至8月</font></font></li></a><a href="#june-2019" class="document-toc-link" data-astro-cid-oor6cujd=""><li class="l-4" data-astro-cid-oor6cujd=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2019 年 6 月</font></font></li></a><a href="#2018" class="document-toc-link" data-astro-cid-oor6cujd=""><li class="l-3" data-astro-cid-oor6cujd=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2018</font></font></li></a><a href="#october-2018" class="document-toc-link" data-astro-cid-oor6cujd=""><li class="l-4" data-astro-cid-oor6cujd=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2018 年 10 月</font></font></li></a><a href="#april-2018" class="document-toc-link" data-astro-cid-oor6cujd=""><li class="l-4" data-astro-cid-oor6cujd=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2018 年 4 月</font></font></li></a><a href="#2017" class="document-toc-link" data-astro-cid-oor6cujd=""><li class="l-3" data-astro-cid-oor6cujd=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2017</font></font></li></a><a href="#august-2017" class="document-toc-link" data-astro-cid-oor6cujd=""><li class="l-4" data-astro-cid-oor6cujd=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2017 年 8 月</font></font></li></a><a href="#june-2017" class="document-toc-link" data-astro-cid-oor6cujd=""><li class="l-4" data-astro-cid-oor6cujd=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2017 年 6 月</font></font></li></a><a href="#may-2017" class="document-toc-link" data-astro-cid-oor6cujd=""><li class="l-4" data-astro-cid-oor6cujd=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2017 年 5 月</font></font></li></a><a href="#april-2017" class="document-toc-link" data-astro-cid-oor6cujd=""><li class="l-4" data-astro-cid-oor6cujd=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2017 年 4 月</font></font></li></a><a href="#march-2017" class="document-toc-link" data-astro-cid-oor6cujd=""><li class="l-4" data-astro-cid-oor6cujd=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2017 年 3 月</font></font></li></a><a href="#february-2017" class="document-toc-link" data-astro-cid-oor6cujd=""><li class="l-4" data-astro-cid-oor6cujd=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2017 年 2 月</font></font></li></a><a href="#2016" class="document-toc-link" data-astro-cid-oor6cujd=""><li class="l-3" data-astro-cid-oor6cujd=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2016</font></font></li></a><a href="#december-2016" class="document-toc-link" data-astro-cid-oor6cujd=""><li class="l-4" data-astro-cid-oor6cujd=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2016 年 12 月</font></font></li></a><a href="#october-2016" class="document-toc-link" data-astro-cid-oor6cujd=""><li class="l-4" data-astro-cid-oor6cujd=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2016 年 10 月</font></font></li></a><a href="#september-2016" class="document-toc-link" data-astro-cid-oor6cujd=""><li class="l-4" data-astro-cid-oor6cujd=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2016 年 9 月</font></font></li></a><a href="#july-2016" class="document-toc-link" data-astro-cid-oor6cujd=""><li class="l-4" data-astro-cid-oor6cujd=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2016 年 7 月</font></font></li></a><a href="#march-2016" class="document-toc-link" data-astro-cid-oor6cujd=""><li class="l-4" data-astro-cid-oor6cujd=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2016 年 3 月</font></font></li></a><a href="#february-2016" class="document-toc-link" data-astro-cid-oor6cujd=""><li class="l-4" data-astro-cid-oor6cujd=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2016 年 2 月</font></font></li></a><a href="#january-2016" class="document-toc-link" data-astro-cid-oor6cujd=""><li class="l-4" data-astro-cid-oor6cujd=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2016 年 1 月</font></font></li></a><a href="#2015" class="document-toc-link" data-astro-cid-oor6cujd=""><li class="l-3" data-astro-cid-oor6cujd=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2015</font></font></li></a><a href="#october-2015" class="document-toc-link" data-astro-cid-oor6cujd=""><li class="l-4" data-astro-cid-oor6cujd=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2015 年 10 月</font></font></li></a><a href="#september-2015" class="document-toc-link" data-astro-cid-oor6cujd=""><li class="l-4" data-astro-cid-oor6cujd=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2015 年 9 月</font></font></li></a><a href="#july-2015" class="document-toc-link" data-astro-cid-oor6cujd=""><li class="l-4" data-astro-cid-oor6cujd=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2015 年 7 月</font></font></li></a><a href="#june-2015" class="document-toc-link" data-astro-cid-oor6cujd=""><li class="l-4" data-astro-cid-oor6cujd=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2015 年 6 月</font></font></li></a><a href="#april-2015" class="document-toc-link" data-astro-cid-oor6cujd=""><li class="l-4" data-astro-cid-oor6cujd=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2015 年 4 月</font></font></li></a><a href="#march-2015" class="document-toc-link" data-astro-cid-oor6cujd=""><li class="l-4" data-astro-cid-oor6cujd=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2015 年 3 月</font></font></li></a><a href="#february-2015" class="document-toc-link" data-astro-cid-oor6cujd=""><li class="l-4" data-astro-cid-oor6cujd=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2015 年 2 月</font></font></li></a><a href="#2014" class="document-toc-link" data-astro-cid-oor6cujd=""><li class="l-3" data-astro-cid-oor6cujd=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2014</font></font></li></a><a href="#august-2014" class="document-toc-link" data-astro-cid-oor6cujd=""><li class="l-4" data-astro-cid-oor6cujd=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2014 年 8 月</font></font></li></a><a href="#july-2014" class="document-toc-link" data-astro-cid-oor6cujd=""><li class="l-4" data-astro-cid-oor6cujd=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2014 年 7 月</font></font></li></a><a href="#june-2014" class="document-toc-link" data-astro-cid-oor6cujd=""><li class="l-4" data-astro-cid-oor6cujd=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2014 年 6 月</font></font></li></a><a href="#april-2014" class="document-toc-link" data-astro-cid-oor6cujd=""><li class="l-4" data-astro-cid-oor6cujd=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2014 年 4 月</font></font></li></a><a href="#february-2014" class="document-toc-link" data-astro-cid-oor6cujd="" aria-current="true"><li class="l-4" data-astro-cid-oor6cujd=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2014 年 2 月</font></font></li></a><a href="#2013" class="document-toc-link" data-astro-cid-oor6cujd=""><li class="l-3" data-astro-cid-oor6cujd=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2013</font></font></li></a></ul><a class="back-top" href="#top" data-astro-cid-oor6cujd=""><svg width="16" height="16" viewBox="0 0 16 16" data-astro-cid-oor6cujd="" data-icon="theme/back-top">  <symbol id="ai:local:theme/back-top"><path fill="currentColor" fill-rule="evenodd" d="M6.25 12.5A2.75 2.75 0 0 0 9 9.75V4.56L6.78 6.78a.75.75 0 0 1-1.06-1.06l3.5-3.5a.75.75 0 0 1 1.06 0l3.5 3.5a.75.75 0 0 1-1.06 1.06L10.5 4.56v5.19a4.25 4.25 0 0 1-8.5 0v-1a.75.75 0 0 1 1.5 0v1a2.75 2.75 0 0 0 2.75 2.75Z" clip-rule="evenodd"></path></symbol><use xlink:href="#ai:local:theme/back-top"></use>  </svg><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
回到顶部
</font></font></a></section></aside></div> </main> </div>            <script data-astro-rerun="" src="/pine-script-docs/static/pine-highlighter-v06.js" data-astro-exec=""></script><div id="goog-gt-tt" class="VIpgJd-yAWNEb-L7lbkb skiptranslate" style="border-radius: 12px; margin: 0 0 0 -23px; padding: 0; font-family: 'Google Sans', Arial, sans-serif;" data-id=""><div id="goog-gt-vt" class="VIpgJd-yAWNEb-hvhgNd"><div class=" VIpgJd-yAWNEb-hvhgNd-l4eHX-i3jM8c"><img src="https://fonts.gstatic.com/s/i/productlogos/translate/v14/24px.svg" width="24" height="24" alt=""></div><div class=" VIpgJd-yAWNEb-hvhgNd-k77Iif-i3jM8c"><div class="VIpgJd-yAWNEb-hvhgNd-IuizWc" dir="ltr">Original text</div><div id="goog-gt-original-text" class="VIpgJd-yAWNEb-nVMfcd-fmcmS VIpgJd-yAWNEb-hvhgNd-axAV1"></div></div><div class="VIpgJd-yAWNEb-hvhgNd-N7Eqid ltr"><div class="VIpgJd-yAWNEb-hvhgNd-N7Eqid-B7I4Od ltr" dir="ltr"><div class="VIpgJd-yAWNEb-hvhgNd-UTujCb">Rate this translation</div><div class="VIpgJd-yAWNEb-hvhgNd-eO9mKe">Your feedback will be used to help improve Google Translate</div></div><div class="VIpgJd-yAWNEb-hvhgNd-xgov5 ltr"><button id="goog-gt-thumbUpButton" type="button" class="VIpgJd-yAWNEb-hvhgNd-bgm6sf" title="Good translation" aria-label="Good translation" aria-pressed="false"><span id="goog-gt-thumbUpIcon"><svg width="24" height="24" viewBox="0 0 24 24" focusable="false" class="VIpgJd-yAWNEb-hvhgNd-THI6Vb NMm5M"><path d="M21 7h-6.31l.95-4.57.03-.32c0-.41-.17-.79-.44-1.06L14.17 0S7.08 6.85 7 7H2v13h16c.83 0 1.54-.5 1.84-1.22l3.02-7.05c.09-.23.14-.47.14-.73V9c0-1.1-.9-2-2-2zM7 18H4V9h3v9zm14-7l-3 7H9V8l4.34-4.34L12 9h9v2z"></path></svg></span><span id="goog-gt-thumbUpIconFilled"><svg width="24" height="24" viewBox="0 0 24 24" focusable="false" class="VIpgJd-yAWNEb-hvhgNd-THI6Vb NMm5M"><path d="M21 7h-6.31l.95-4.57.03-.32c0-.41-.17-.79-.44-1.06L14.17 0S7.08 6.85 7 7v13h11c.83 0 1.54-.5 1.84-1.22l3.02-7.05c.09-.23.14-.47.14-.73V9c0-1.1-.9-2-2-2zM5 7H1v13h4V7z"></path></svg></span></button><button id="goog-gt-thumbDownButton" type="button" class="VIpgJd-yAWNEb-hvhgNd-bgm6sf" title="Poor translation" aria-label="Poor translation" aria-pressed="false"><span id="goog-gt-thumbDownIcon"><svg width="24" height="24" viewBox="0 0 24 24" focusable="false" class="VIpgJd-yAWNEb-hvhgNd-THI6Vb NMm5M"><path d="M3 17h6.31l-.95 4.57-.03.32c0 .41.17.79.44 1.06L9.83 24s7.09-6.85 7.17-7h5V4H6c-.83 0-1.54.5-1.84 1.22l-3.02 7.05c-.09.23-.14.47-.14.73v2c0 1.1.9 2 2 2zM17 6h3v9h-3V6zM3 13l3-7h9v10l-4.34 4.34L12 15H3v-2z"></path></svg></span><span id="goog-gt-thumbDownIconFilled"><svg width="24" height="24" viewBox="0 0 24 24" focusable="false" class="VIpgJd-yAWNEb-hvhgNd-THI6Vb NMm5M"><path d="M3 17h6.31l-.95 4.57-.03.32c0 .41.17.79.44 1.06L9.83 24s7.09-6.85 7.17-7V4H6c-.83 0-1.54.5-1.84 1.22l-3.02 7.05c-.09.23-.14.47-.14.73v2c0 1.1.9 2 2 2zm16 0h4V4h-4v13z"></path></svg></span></button></div></div><div id="goog-gt-votingHiddenPane" class="VIpgJd-yAWNEb-hvhgNd-aXYTce"><form id="goog-gt-votingForm" action="//translate.googleapis.com/translate_voting?client=te_lib" method="post" target="votingFrame" class="VIpgJd-yAWNEb-hvhgNd-aXYTce"><input type="text" name="sl" id="goog-gt-votingInputSrcLang"><input type="text" name="tl" id="goog-gt-votingInputTrgLang"><input type="text" name="query" id="goog-gt-votingInputSrcText"><input type="text" name="gtrans" id="goog-gt-votingInputTrgText"><input type="text" name="vote" id="goog-gt-votingInputVote"></form><iframe name="votingFrame" frameborder="0"></iframe></div></div></div> </body></html>