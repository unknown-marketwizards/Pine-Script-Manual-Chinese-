<html lang="zh-CN" data-theme="light" class="translated-ltr"><head><script data-astro-exec="">
			const url = window.location.href;
			const expectedUrl = url.replace(
				/^https:\/\/(?!beta)(\w+\.)?tradingview\.com/,
				'https://www.tradingview.com',
			);
			if (url !== expectedUrl) {
				window.location.replace(expectedUrl);
			}
		</script><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="icon" href="/pine-script-docs/static/favicon.ico"><link rel="icon" type="image/svg+xml" href="/pine-script-docs/favicon.svg"><title>语言/类型系统</title><meta name="og:title" content="Language / Type system"><meta name="twitter:title" content="Language / Type system"><meta name="description" content="Everything you need to know about Pine Script™."><meta name="og:description" content="Everything you need to know about Pine Script™."><meta name="twitter:description" content="Everything you need to know about Pine Script™."><meta name="keywords" content="tradingview, pine, script, indicators, strategies"><meta name="og:image" content="/pine-script-docs/meta-image.png"><meta name="twitter:image" content="/pine-script-docs/meta-image.png"><meta name="og:image:width" content="1200"><meta name="og:image:height" content="630"><meta name="og:url" content="../../language/type-system/"><meta name="twitter:url" content="../../language/type-system/"><meta name="og:type" content="website"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:site" content="@TradingView"><link rel="canonical" href="../../language/type-system/"><link rel="sitemap" href="/pine-script-docs/sitemap-index.xml"><meta name="astro-view-transitions-enabled" content="true"><meta name="astro-view-transitions-fallback" content="none"><link rel="stylesheet" href="/pine-script-docs/_astro/index.jN9AZoBe.css">
<link rel="stylesheet" href="/pine-script-docs/_astro/index.C8b720yZ.css"><script type="module" src="/pine-script-docs/_astro/hoisted.D4iEV6y6.js" data-astro-exec=""></script><style type="text/css" media="screen">.monaco-editor-tv-pine-dark { 
    .mtk1 { color: #ffffff; }
    .mtk2 { color: #131722; }
    .mtk3 { color: #cc6666; }
    .mtk4 { color: #9cdcfe; }
    .mtk5 { color: #ce9178; }
    .mtk6 { color: #d4d4d4; }
    .mtk7 { color: #b5cea8; }
    .mtk8 { color: #608b4e; }
    .mtk9 { color: #787b86; }
    .mtk10 { color: #569cd6; }
    .mtk11 { color: #f77c80; }
    .mtk12 { color: #f57f17; }
    .mtk13 { color: #dcdcdc; }
    .mtk14 { color: #808080; }
    .mtk15 { color: #3179f5; }
    .mtk16 { color: #5b9cf6; }
    .mtk17 { color: #ba68c8; }
    .mtk18 { color: #42bda8; }
    .mtk19 { color: #f44747; }
    .mtk20 { color: #c586c0; }
    .mtk21 { color: #a79873; }
    .mtk22 { color: #dd6a6f; }
    .mtk23 { color: #5bb498; }
    .mtk24 { color: #909090; }
    .mtk25 { color: #778899; }
    .mtk26 { color: #ff00ff; }
    .mtk27 { color: #b46695; }
    .mtk28 { color: #388e3c; }
    .mtk29 { color: #ff0000; }
    .mtk30 { color: #4f76ac; }
    .mtk31 { color: #3dc9b0; }
    .mtk32 { color: #74b0df; }
    .mtk33 { color: #d1d4dc; }
    .mtk34 { color: #4864aa; }
    .mtki { font-style: italic; }
    .mtkb { font-weight: bold; }
    .mtku { text-decoration: underline; text-underline-position: under; }
    .mtks { text-decoration: line-through; }
    .mtks.mtku { text-decoration: underline line-through; text-underline-position: under; } }</style>
<style type="text/css" media="screen">.monaco-editor-tv-pine-light { 
.mtk1 { color: #131722; }
.mtk2 { color: #ffffff; }
.mtk3 { color: #808080; }
.mtk4 { color: #ff0000; }
.mtk5 { color: #0451a5; }
.mtk6 { color: #0000ff; }
.mtk7 { color: #098658; }
.mtk8 { color: #008000; }
.mtk9 { color: #9598a1; }
.mtk10 { color: #dd0000; }
.mtk11 { color: #cc2929; }
.mtk12 { color: #f57f17; }
.mtk13 { color: #000000; }
.mtk14 { color: #383838; }
.mtk15 { color: #0c3299; }
.mtk16 { color: #2962ff; }
.mtk17 { color: #8e24aa; }
.mtk18 { color: #22ab94; }
.mtk19 { color: #cd3131; }
.mtk20 { color: #863b00; }
.mtk21 { color: #af00db; }
.mtk22 { color: #800000; }
.mtk23 { color: #e00000; }
.mtk24 { color: #3030c0; }
.mtk25 { color: #666666; }
.mtk26 { color: #778899; }
.mtk27 { color: #c700c7; }
.mtk28 { color: #a31515; }
.mtk29 { color: #388e3c; }
.mtk30 { color: #4f76ac; }
.mtk31 { color: #008080; }
.mtk32 { color: #001188; }
.mtk33 { color: #2a2e39; }
.mtk34 { color: #4864aa; }
.mtki { font-style: italic; }
.mtkb { font-weight: bold; }
.mtku { text-decoration: underline; text-underline-position: under; }
.mtks { text-decoration: line-through; }
.mtks.mtku { text-decoration: underline line-through; text-underline-position: under; } }</style><link type="text/css" rel="stylesheet" charset="UTF-8" href="https://www.gstatic.com/_/translate_http/_/ss/k=translate_http.tr.26tY-h6gH9w.L.W.O/am=GAY/d=0/rs=AN8SPfrev-A3NvrBP0gNq8zXCqKY7IcBLA/m=el_main_css"></head> <body> <div id="search-content-blur" hidden=""></div> <script data-astro-exec="">
	/* eslint-disable @typescript-eslint/typedef */
	window.ThemeProvider = (() => {
		function getCurrent() {
			return (
				// eslint-disable-next-line no-restricted-syntax
				typeof localStorage !== 'undefined' &&
				localStorage.getItem('tv-docs-theme')
			);
		}
		const storedTheme = getCurrent();
		const theme =
			storedTheme ||
			(window.matchMedia('(prefers-color-scheme: light)').matches ?
				'light'
			:	'dark');
		document.documentElement.dataset.theme =
			theme === 'light' ? 'light' : 'dark';
		document.documentElement.classList.toggle(
			'theme-dark',
			theme === 'dark',
		); // add support for ui-lib themes
		document.documentElement.classList.toggle(
			'sl-theme-dark',
			theme === 'dark',
		); // add support for shoelace themes

		return {
			updatePickers(themeArg = storedTheme || 'auto') {
				let currentTheme = themeArg;
				if (currentTheme === 'unknown') {
					currentTheme = getCurrent() || 'auto';
				}
				document
					.querySelectorAll('docs-theme-select')
					.forEach((picker) => {
						const select = picker.querySelector('select');
						if (select) select.value = currentTheme;
						/** @type {HTMLTemplateElement | null} */
						const tmpl = document.querySelector(`#theme-icons`);
						const newIcon =
							tmpl &&
							tmpl.content.querySelector('.' + currentTheme);
						if (newIcon) {
							const oldIcon =
								picker.querySelector('svg.label-icon');
							if (oldIcon) {
								oldIcon.replaceChildren(
									...newIcon.cloneNode(true).childNodes,
								);
							}
						}
					});
			},
		};
	})();
	/* eslint-enable @typescript-eslint/typedef */
</script><template id="theme-icons"><svg width="16px" height="16px" viewBox="0 0 28 28" class="light" data-icon="theme/sun-28">  <symbol id="ai:local:theme/sun-28"><g fill="currentColor"><path d="M14 3h1.5v5H14V3Zm0 18h1.5v5H14v-5Zm12-5.5V14h-5v1.5h5ZM8 14v1.5H3V14h5Zm15.3-7-1-1-3.6 3.6 1.1 1 3.5-3.5ZM9.5 18.7l1.1 1.1-3.5 3.5-1-1 3.4-3.6ZM22 23.3l1-1-3.6-3.6-1 1.1 3.5 3.5ZM10.3 9.6l-1.1 1-3.5-3.5 1-1 3.6 3.5Z"></path><path fill-rule="evenodd" d="M19 14.5a4.5 4.5 0 1 1-9 0 4.5 4.5 0 0 1 9 0Zm-1.5 0a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z" clip-rule="evenodd"></path></g></symbol><use xlink:href="#ai:local:theme/sun-28"></use>  </svg><svg width="16px" height="16px" viewBox="0 0 28 28" class="dark" data-icon="theme/moon-28">  <symbol id="ai:local:theme/moon-28"><path fill="currentColor" fill-rule="evenodd" d="M21 7.02A9.23 9.23 0 0 0 15.2 5 9.1 9.1 0 0 0 6 14c0 4.97 4.12 9 9.2 9a9.33 9.33 0 0 0 5.8-2.02A7 7 0 0 1 14.36 14 7 7 0 0 1 21 7.02Zm-3.95-.3a7.91 7.91 0 0 0-1.85-.22A7.6 7.6 0 0 0 7.5 14a7.6 7.6 0 0 0 7.7 7.5 8 8 0 0 0 1.85-.22A8.46 8.46 0 0 1 12.86 14c0-3.1 1.69-5.8 4.19-7.28Z" clip-rule="evenodd"></path></symbol><use xlink:href="#ai:local:theme/moon-28"></use>  </svg><svg width="16px" height="16px" viewBox="0 0 28 28" class="auto" data-icon="theme/system-28">  <symbol id="ai:local:theme/system-28"><path fill="currentColor" d="M8 4h1v2H8V4Zm0 9v2h1v-2H8Zm6-3V9h-2v1h2ZM3 9v1h2V9H3Zm5.5 3a2.5 2.5 0 1 0 0-5 2.5 2.5 0 0 0 0 5Zm4.2-6-.7-.7-1.4 1.4.7.7L12.7 6ZM5 13.7l-.7-.7 1.4-1.4.7.7L5 13.7Zm7.7-.7-.7.7-1.4-1.4.7-.7 1.4 1.4ZM4.3 6l.7-.7 1.4 1.4-.7.7L4.3 6Zm3 17 14-14 .8.7L8 23.7l-.7-.7Zm17.2-.1a3.5 3.5 0 0 1-3.4-5.9H21a4 4 0 1 0 3.5 5.9Z"></path></symbol><use xlink:href="#ai:local:theme/system-28"></use>  </svg></template> <div class="backdrop" data-mobile-menu-backdrop="" data-astro-cid-h2irkosh=""></div> <div class="menu-container" data-astro-cid-h2irkosh=""> <div class="header" data-astro-cid-h2irkosh=""> <div class="header-group" data-astro-cid-h2irkosh="">    <docs-theme-select class="" data-astro-cid-3wpspbi7=""> <label style="--sl-select-width: 48px; --sl-label-icon-size: 28px;" data-astro-cid-lmznfliq=""> <span class="sr-only" data-astro-cid-lmznfliq=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">主题</font></font></span> <svg width="28" height="28" viewBox="0 0 28 28" class="icon label-icon" data-button="" data-round="" data-astro-cid-lmznfliq="" data-icon="theme/system-28">  <symbol id="ai:local:theme/sun-28"><g fill="currentColor"><path d="M14 3h1.5v5H14V3Zm0 18h1.5v5H14v-5Zm12-5.5V14h-5v1.5h5ZM8 14v1.5H3V14h5Zm15.3-7-1-1-3.6 3.6 1.1 1 3.5-3.5ZM9.5 18.7l1.1 1.1-3.5 3.5-1-1 3.4-3.6ZM22 23.3l1-1-3.6-3.6-1 1.1 3.5 3.5ZM10.3 9.6l-1.1 1-3.5-3.5 1-1 3.6 3.5Z"></path><path fill-rule="evenodd" d="M19 14.5a4.5 4.5 0 1 1-9 0 4.5 4.5 0 0 1 9 0Zm-1.5 0a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z" clip-rule="evenodd"></path></g></symbol><use xlink:href="#ai:local:theme/sun-28"></use>  </svg> <select value="auto" data-button="" data-astro-cid-lmznfliq=""> <option value="dark" data-astro-cid-lmznfliq=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;&nbsp;黑暗的&nbsp;&nbsp;</font></font></option><option value="light" data-astro-cid-lmznfliq=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;&nbsp;明亮&nbsp;&nbsp;</font></font></option><option value="auto" selected="true" data-astro-cid-lmznfliq=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;&nbsp;自动&nbsp;&nbsp;</font></font></option> </select>  </label>  </docs-theme-select>   <script data-astro-exec="">
	ThemeProvider.updatePickers('unknown');
</script>  </div> <div class="header-group" data-astro-cid-h2irkosh="">  <div class="not-content" style="stroke-width:2px" data-astro-cid-pkzv2hgs=""> <button id="mobile-menu-back-button" title="关闭菜单" data-astro-cid-pkzv2hgs="" class="not-content stvb-base stvb-pointer stvb-gray stvb-medium stvb-primary stvb-icon">  <svg width="28" height="28" viewBox="0 0 28 28" data-astro-cid-h2irkosh="" data-icon="theme/arrow-back">  <symbol id="ai:local:theme/arrow-back"><g fill="none"><g clip-path="url(#a)"><path stroke="var(--arrow-fill-color, #131722)" d="m17 20-6-6 6-6"></path></g><defs><clipPath id="a"><path fill="#fff" d="M28 28H0V0h28z"></path></clipPath></defs></g></symbol><use xlink:href="#ai:local:theme/arrow-back"></use>  </svg>  </button> </div>  </div> </div> <aside id="nav" class="keep-visible" style="--navbar-right-border-width: 0px" data-astro-cid-sa57sq6l=""> <div class="sidebar-viewport" data-astro-cid-sa57sq6l=""> <div class="sidebar" data-mobile="" data-astro-cid-sa57sq6l=""> <ul class="toc" aria-label="文档侧边栏" data-astro-cid-sa57sq6l=""> <li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/welcome" data-astro-cid-omxx3dey=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">欢迎使用 Pine Script™ v5</font></font></a></li><li class="item" data-astro-cid-omxx3dey=""><details data-astro-cid-omxx3dey=""><summary data-astro-cid-omxx3dey=""><div class="summary-link" data-astro-cid-omxx3dey=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">初识Pine Script™</font></font></div><div class="caret" data-astro-cid-omxx3dey=""><svg width="18" height="18" viewBox="0 0 24 24" class="icon" data-astro-cid-omxx3dey="" data-icon="theme/right-caret">  <use xlink:href="#ai:local:theme/right-caret"></use>  </svg></div></summary><ul class="children" data-astro-cid-omxx3dey=""><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/primer/first-steps" data-astro-cid-omxx3dey=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第一步</font></font></a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/primer/first-indicator" data-astro-cid-omxx3dey=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第一个指标</font></font></a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/primer/next-steps" data-astro-cid-omxx3dey=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">下一步</font></font></a></li></ul></details></li><li class="item" data-astro-cid-omxx3dey=""><details open="" data-is-parent="" data-astro-cid-omxx3dey=""><summary data-astro-cid-omxx3dey=""><div class="summary-link" data-astro-cid-omxx3dey=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">语言</font></font></div><div class="caret" data-astro-cid-omxx3dey=""><svg width="18" height="18" viewBox="0 0 24 24" class="icon" data-astro-cid-omxx3dey="" data-icon="theme/right-caret">  <use xlink:href="#ai:local:theme/right-caret"></use>  </svg></div></summary><ul class="children" data-astro-cid-omxx3dey=""><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/language/execution-model" data-astro-cid-omxx3dey=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">执行模型</font></font></a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/language/time-series" data-astro-cid-omxx3dey=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">时间序列</font></font></a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/language/script-structure" data-astro-cid-omxx3dey=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">脚本结构</font></font></a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/language/identifiers" data-astro-cid-omxx3dey=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">身份标识</font></font></a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/language/operators" data-astro-cid-omxx3dey=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">运算符</font></font></a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/language/variable-declarations" data-astro-cid-omxx3dey=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">变量声明</font></font></a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/language/conditional-structures" data-astro-cid-omxx3dey=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">条件结构</font></font></a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/language/loops" data-astro-cid-omxx3dey=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">循环</font></font></a></li><li class="item" data-current="" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/language/type-system" data-astro-cid-omxx3dey=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">类型系统</font></font></a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/language/built-ins" data-astro-cid-omxx3dey=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">内置</font></font></a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/language/user-defined-functions" data-astro-cid-omxx3dey=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">用户定义函数</font></font></a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/language/objects" data-astro-cid-omxx3dey=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">对象</font></font></a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/language/enums" data-astro-cid-omxx3dey=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">枚举</font></font></a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/language/methods" data-astro-cid-omxx3dey=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">方法</font></font></a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/language/arrays" data-astro-cid-omxx3dey=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">数组</font></font></a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/language/matrices" data-astro-cid-omxx3dey=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">矩阵</font></font></a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/language/maps" data-astro-cid-omxx3dey=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">地图</font></font></a></li></ul></details></li><li class="item" data-astro-cid-omxx3dey=""><details data-astro-cid-omxx3dey=""><summary data-astro-cid-omxx3dey=""><div class="summary-link" data-astro-cid-omxx3dey=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">概念</font></font></div><div class="caret" data-astro-cid-omxx3dey=""><svg width="18" height="18" viewBox="0 0 24 24" class="icon" data-astro-cid-omxx3dey="" data-icon="theme/right-caret">  <use xlink:href="#ai:local:theme/right-caret"></use>  </svg></div></summary><ul class="children" data-astro-cid-omxx3dey=""><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/concepts/alerts" data-astro-cid-omxx3dey=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">警报</font></font></a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/concepts/backgrounds" data-astro-cid-omxx3dey=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">背景</font></font></a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/concepts/bar-coloring" data-astro-cid-omxx3dey=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">条形图色彩</font></font></a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/concepts/bar-plotting" data-astro-cid-omxx3dey=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">条形图</font></font></a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/concepts/bar-states" data-astro-cid-omxx3dey=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">条形图状态</font></font></a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/concepts/chart-information" data-astro-cid-omxx3dey=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图表信息</font></font></a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/concepts/colors" data-astro-cid-omxx3dey=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">颜色</font></font></a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/concepts/fills" data-astro-cid-omxx3dey=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">填充</font></font></a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/concepts/inputs" data-astro-cid-omxx3dey=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">输入</font></font></a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/concepts/levels" data-astro-cid-omxx3dey=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">级别</font></font></a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/concepts/libraries" data-astro-cid-omxx3dey=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">库</font></font></a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/concepts/lines-and-boxes" data-astro-cid-omxx3dey=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">线条和盒子</font></font></a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/concepts/non-standard-charts-data" data-astro-cid-omxx3dey=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">非标准图表数据</font></font></a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/concepts/other-timeframes-and-data" data-astro-cid-omxx3dey=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">其他时间范围和数据</font></font></a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/concepts/plots" data-astro-cid-omxx3dey=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图</font></font></a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/concepts/repainting" data-astro-cid-omxx3dey=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">重新粉刷</font></font></a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/concepts/sessions" data-astro-cid-omxx3dey=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">会议</font></font></a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/concepts/strategies" data-astro-cid-omxx3dey=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">策略</font></font></a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/concepts/tables" data-astro-cid-omxx3dey=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表格</font></font></a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/concepts/text-and-shapes" data-astro-cid-omxx3dey=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">文本和形状</font></font></a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/concepts/time" data-astro-cid-omxx3dey=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">时间</font></font></a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/concepts/timeframes" data-astro-cid-omxx3dey=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">时间范围</font></font></a></li></ul></details></li><li class="item" data-astro-cid-omxx3dey=""><details data-astro-cid-omxx3dey=""><summary data-astro-cid-omxx3dey=""><div class="summary-link" data-astro-cid-omxx3dey=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">编写脚本</font></font></div><div class="caret" data-astro-cid-omxx3dey=""><svg width="18" height="18" viewBox="0 0 24 24" class="icon" data-astro-cid-omxx3dey="" data-icon="theme/right-caret">  <use xlink:href="#ai:local:theme/right-caret"></use>  </svg></div></summary><ul class="children" data-astro-cid-omxx3dey=""><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/writing/style-guide" data-astro-cid-omxx3dey=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">风格指南</font></font></a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/writing/debugging" data-astro-cid-omxx3dey=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">调试</font></font></a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/writing/profiling-and-optimization" data-astro-cid-omxx3dey=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">分析和优化</font></font></a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/writing/publishing" data-astro-cid-omxx3dey=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">发布脚本</font></font></a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/writing/limitations" data-astro-cid-omxx3dey=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">限制</font></font></a></li></ul></details></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/faq" data-astro-cid-omxx3dey=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">常问问题</font></font></a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/error-messages" data-astro-cid-omxx3dey=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">错误消息</font></font></a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/release-notes" data-astro-cid-omxx3dey=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">发行说明</font></font></a></li><li class="item" data-astro-cid-omxx3dey=""><details data-astro-cid-omxx3dey=""><summary data-astro-cid-omxx3dey=""><div class="summary-link" data-astro-cid-omxx3dey=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">迁移指南</font></font></div><div class="caret" data-astro-cid-omxx3dey=""><svg width="18" height="18" viewBox="0 0 24 24" class="icon" data-astro-cid-omxx3dey="" data-icon="theme/right-caret">  <use xlink:href="#ai:local:theme/right-caret"></use>  </svg></div></summary><ul class="children" data-astro-cid-omxx3dey=""><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/migration-guides/to-pine-version-5" data-astro-cid-omxx3dey=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">转至 Pine Script™ 版本 5</font></font></a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/migration-guides/to-pine-version-4" data-astro-cid-omxx3dey=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">转至 Pine Script™ 版本 4</font></font></a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/migration-guides/to-pine-version-3" data-astro-cid-omxx3dey=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">转至 Pine Script™ 版本 3</font></font></a></li></ul></details></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/where-can-i-get-more-information" data-astro-cid-omxx3dey=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在哪里可以获得更多信息？</font></font></a></li> </ul> <div class="toc-bottom" data-astro-cid-sa57sq6l=""></div> </div> </div> </aside>  </div>   <header class="header" data-astro-cid-d74r2unp=""> <nav role="navigation" aria-label="主导航" data-astro-cid-d74r2unp=""> <mobile-menu-button id="mobile-menu-button-wc" data-astro-cid-oojooh3d=""> <!-- Annoyingly I need to wrap this. TODO: improve this --> <div id="mobile-menu-button-header" data-astro-cid-oojooh3d=""> <div class="not-content" style="" data-astro-cid-pkzv2hgs=""> <button title="打开导航菜单" data-astro-cid-pkzv2hgs="" class="not-content stvb-base stvb-pointer stvb-gray stvb-medium stvb-secondary stvb-icon stvb-icon-force-color stvb-force-no-border">  <svg width="28" height="28" viewBox="0 0 24 24" data-astro-cid-oojooh3d="" data-icon="theme/bars">  <symbol id="ai:local:theme/bars"><path fill="currentColor" d="M3 8h18a1 1 0 1 0 0-2H3a1 1 0 0 0 0 2Zm18 8H3a1 1 0 0 0 0 2h18a1 1 0 0 0 0-2Zm0-5H3a1 1 0 0 0 0 2h18a1 1 0 0 0 0-2Z"></path></symbol><use xlink:href="#ai:local:theme/bars"></use>  </svg>  </button> </div>  </div> </mobile-menu-button>   <div data-hide-when-search="" data-astro-cid-d74r2unp=""> <div class="header-logo" data-astro-cid-tycb33lk=""> <a href="/pine-script-docs/" aria-label="主页按钮" data-astro-cid-tycb33lk=""> <div class="documentation-logo logo" data-astro-cid-tycb33lk=""><svg width="188" height="44" viewBox="0 0 188 44" fill="none" xmlns="http://www.w3.org/2000/svg">
<path fill-rule="evenodd" clip-rule="evenodd" d="M26.9989 28.0001L18.4281 20.7531L11.3382 23.2611C10.402 23.5923 9.60771 22.5041 10.2085 21.7134L21.0877 7.39502C21.4749 6.88536 22.2346 6.86567 22.6478 7.35459L34.7627 21.6923C35.1531 22.1543 35.0472 22.8544 34.5376 23.1802L26.9989 28.0001ZM32.4978 22.1105L27.1641 25.5207L19.7195 19.2258C19.1767 18.7669 18.4312 18.6305 17.7611 18.8676L13.8245 20.2602L21.9253 9.59841L32.4978 22.1105Z" fill="currentColor"></path>
<path d="M33.432 28.0842L38.3592 34.7471C38.7427 35.2657 38.3724 36 37.7274 36H6.27248C5.62746 36 5.25722 35.2657 5.64074 34.7471L10.8523 27.6996C10.9484 27.5697 11.0822 27.4725 11.2356 27.4214L17.6878 25.2707C17.9285 25.1904 18.1932 25.2314 18.3984 25.3806L26.2854 31.1166C26.5445 31.3051 26.8922 31.3173 27.1639 31.1475L32.3838 27.885C32.7316 27.6677 33.1881 27.7544 33.432 28.0842Z" fill="currentColor"></path>
<path d="M59.56 13.96C63.016 13.96 65.536 16.456 65.536 19.696C65.536 22.936 63.016 25.432 59.56 25.432H57.376V31H53.896V13.96H59.56ZM59.512 22.168C61.096 22.168 62.152 21.088 62.152 19.696C62.152 18.304 61.096 17.224 59.512 17.224H57.376V22.168H59.512ZM70.8636 14.944C70.8636 16.096 69.9276 17.032 68.7516 17.032C67.6236 17.032 66.6636 16.096 66.6636 14.944C66.6636 13.792 67.6236 12.856 68.7516 12.856C69.9276 12.856 70.8636 13.792 70.8636 14.944ZM67.1196 31V19H70.4076V31H67.1196ZM73.0849 31V19H76.3729V20.368C76.9969 19.408 78.2449 18.736 79.8049 18.736C82.7089 18.736 84.4369 20.848 84.4369 23.968V31H81.1489V24.52C81.1489 22.792 80.4049 21.736 79.0369 21.736C77.5249 21.736 76.3729 22.84 76.3729 25.144V31H73.0849ZM86.2041 25C86.2041 21.448 88.8681 18.736 92.5161 18.736C95.6601 18.736 98.4201 20.752 98.4201 24.64C98.4201 24.928 98.4201 25.264 98.3721 25.768H89.3961C89.5881 27.376 91.0041 28.264 92.5881 28.264C94.0761 28.264 95.1561 27.568 95.6841 26.752L98.1321 28.576C97.0281 30.184 95.0841 31.264 92.5641 31.264C88.9881 31.264 86.2041 28.792 86.2041 25ZM92.4201 21.448C91.1961 21.448 89.8281 22.072 89.5161 23.536H95.1321C94.8441 22.12 93.6441 21.448 92.4201 21.448ZM104.412 28.24L107.076 26.008C107.916 27.28 109.38 28.024 110.772 28.024C112.14 28.024 113.052 27.352 113.052 26.368C113.052 25.408 112.356 24.736 110.676 24.16L109.236 23.656C106.5 22.696 105.036 21.112 105.036 18.784C105.036 15.568 107.484 13.672 110.796 13.672C112.884 13.672 114.708 14.392 116.172 16.024L113.868 18.4C113.052 17.416 111.996 16.936 110.82 16.936C109.644 16.936 108.54 17.44 108.54 18.448C108.54 19.48 109.38 19.936 111.18 20.584L112.548 21.088C115.044 22 116.604 23.584 116.604 26.152C116.58 29.2 114.156 31.288 110.628 31.288C107.916 31.288 105.636 30.112 104.412 28.24ZM129.859 27.808C128.827 29.872 126.667 31.264 124.171 31.264C120.619 31.264 117.811 28.624 117.811 25C117.811 21.376 120.619 18.736 124.171 18.736C126.667 18.736 128.827 20.128 129.859 22.192L127.003 23.728C126.523 22.624 125.491 21.808 124.171 21.808C122.443 21.808 121.123 23.152 121.123 25C121.123 26.848 122.443 28.192 124.171 28.192C125.491 28.192 126.523 27.376 127.003 26.272L129.859 27.808ZM131.482 31V19H134.77V20.92C135.178 19.744 136.402 18.856 137.746 18.856C138.082 18.856 138.442 18.88 138.85 19V22.336C138.346 22.168 137.89 22.072 137.362 22.072C135.802 22.072 134.77 23.296 134.77 25.264V31H131.482ZM144.215 14.944C144.215 16.096 143.279 17.032 142.103 17.032C140.975 17.032 140.015 16.096 140.015 14.944C140.015 13.792 140.975 12.856 142.103 12.856C143.279 12.856 144.215 13.792 144.215 14.944ZM140.471 31V19H143.759V31H140.471ZM146.436 36.016V19H149.724V20.344C150.276 19.576 151.548 18.736 153.204 18.736C156.396 18.736 158.844 21.592 158.844 25C158.844 28.408 156.396 31.264 153.204 31.264C151.548 31.264 150.276 30.424 149.724 29.656V36.016H146.436ZM155.508 25C155.508 23.128 154.284 21.736 152.484 21.736C150.684 21.736 149.46 23.128 149.46 25C149.46 26.872 150.684 28.264 152.484 28.264C154.284 28.264 155.508 26.872 155.508 25ZM168.407 30.88C167.879 31.048 167.231 31.144 166.319 31.144C163.775 31.144 161.735 29.728 161.735 26.8V21.88H159.311V19H161.735V15.664H165.023V19H168.407V21.88H165.023V26.152C165.023 27.616 165.647 28.192 167.063 28.192C167.591 28.192 168.023 28.12 168.407 27.976V30.88ZM177.626 22.648V13.96H179.978L181.874 16.888L183.746 13.96H186.122V22.648H183.698V18.184L181.874 20.968L180.026 18.136V22.648H177.626ZM171.386 22.648V16.456H169.058V13.96H176.258V16.456H173.93V22.648H171.386Z" fill="currentColor"></path>
</svg>
</div> </a> </div>  </div> <div class="flex" data-astro-cid-d74r2unp=""></div> <div class="flex" data-astro-cid-d74r2unp=""> <div class="search-container" data-astro-cid-fg37foga=""> <div class="search-wrapper" data-astro-cid-fg37foga=""> <input class="search-input" type="text" placeholder="搜索文档" name="s" value="" data-astro-cid-fg37foga="" data-has-input-listener="true"> <svg width="28" height="28" viewBox="0 0 28 28" class="search-button" data-astro-cid-fg37foga="" data-icon="theme/search">  <symbol id="ai:local:theme/search"><path fill="currentColor" fill-rule="evenodd" d="M18.5 12.5a6 6 0 1 1-12 0 6 6 0 0 1 12 0Zm-1.25 5.8a7.5 7.5 0 1 1 1.06-1.06l4.22 4.23.53.53L22 23.06l-.53-.53-4.22-4.22Z" clip-rule="evenodd"></path></symbol><use xlink:href="#ai:local:theme/search"></use>  </svg> <button class="search-clear" type="button" title="重置" data-search-clear="" data-astro-cid-fg37foga=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">清除</font></font></button> <span class="divider" data-astro-cid-fg37foga=""></span> <button class="search-close" type="button" title="关闭" data-search-close="" data-astro-cid-fg37foga=""> <svg width="18" height="18" viewBox="0 0 18 18" data-astro-cid-fg37foga="" data-icon="theme/cross-18">  <use xlink:href="#ai:local:theme/cross-18"></use>  </svg> </button> </div> <div id="search-results-wrapper" data-astro-cid-fg37foga=""> <aside id="search-results" hidden="" data-astro-cid-fg37foga="" data-has-button-listener="true"> <!-- Don't use h1 because when built it will be used as the first heading on the page --> <div class="heading" data-astro-cid-fg37foga=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">搜索结果</font></font></div> <div id="search-results-contents" data-astro-cid-fg37foga=""></div> </aside> </div> </div>   </div> <ul class="links" data-astro-cid-d74r2unp="">  </ul> <div class="flex" data-astro-cid-d74r2unp=""></div> <div data-hide-when-search="" data-astro-cid-d74r2unp="">    </div> <button id="search-button" data-astro-cid-6zeqadij="" data-has-listener="true" style="display:none"> <svg width="28" height="28" viewBox="0 0 28 28" data-astro-cid-6zeqadij="" data-icon="theme/search">  <use xlink:href="#ai:local:theme/search"></use>  </svg> </button>  <script data-base-url="/pine-script-docs" data-astro-exec="">
	async function loadPageFind() {
		const base = document.currentScript.getAttribute('data-base-url');
		const pageFindBundleUrl = `${base}/pagefind/`;
		const pagefind = await import(`${pageFindBundleUrl}pagefind.js`);
		await pagefind.options({
			bundlePath: pageFindBundleUrl,
		});
		window.pagefind = pagefind;
	}
	loadPageFind().catch();
</script>  <docs-theme-select class="hide-with-breakpoint-568" data-astro-cid-3wpspbi7=""> <label style="--sl-select-width: 48px; --sl-label-icon-size: 28px;" data-astro-cid-lmznfliq=""> <span class="sr-only" data-astro-cid-lmznfliq=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">主题</font></font></span> <svg width="28" height="28" viewBox="0 0 28 28" class="icon label-icon" data-button="" data-round="" data-astro-cid-lmznfliq="" data-icon="theme/system-28">  <symbol id="ai:local:theme/sun-28"><g fill="currentColor"><path d="M14 3h1.5v5H14V3Zm0 18h1.5v5H14v-5Zm12-5.5V14h-5v1.5h5ZM8 14v1.5H3V14h5Zm15.3-7-1-1-3.6 3.6 1.1 1 3.5-3.5ZM9.5 18.7l1.1 1.1-3.5 3.5-1-1 3.4-3.6ZM22 23.3l1-1-3.6-3.6-1 1.1 3.5 3.5ZM10.3 9.6l-1.1 1-3.5-3.5 1-1 3.6 3.5Z"></path><path fill-rule="evenodd" d="M19 14.5a4.5 4.5 0 1 1-9 0 4.5 4.5 0 0 1 9 0Zm-1.5 0a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z" clip-rule="evenodd"></path></g></symbol><use xlink:href="#ai:local:theme/sun-28"></use>  </svg> <select value="auto" data-button="" data-astro-cid-lmznfliq=""> <option value="dark" data-astro-cid-lmznfliq=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;&nbsp;黑暗的&nbsp;&nbsp;</font></font></option><option value="light" data-astro-cid-lmznfliq=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;&nbsp;明亮&nbsp;&nbsp;</font></font></option><option value="auto" selected="true" data-astro-cid-lmznfliq=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;&nbsp;自动&nbsp;&nbsp;</font></font></option> </select>  </label>  </docs-theme-select>   <script data-astro-exec="">
	ThemeProvider.updatePickers('unknown');
</script>  </nav> </header>        <div id="image-lightbox" class="not-content" hidden="" data-astro-cid-kws7taxh=""> <div class="button-wrapper" data-astro-cid-kws7taxh=""> <div class="not-content" style="" data-astro-cid-pkzv2hgs=""> <button id="lightbox-close-button" title="关闭图片预览" data-astro-cid-pkzv2hgs="" class="not-content stvb-base stvb-pointer stvb-black stvb-medium stvb-secondary stvb-icon stvb-force-no-border">  <svg width="24" height="24" viewBox="0 0 18 18" data-astro-cid-kws7taxh="" data-icon="theme/cross-18">  <symbol id="ai:local:theme/cross-18"><g fill="none"><g clip-path="url(#a)"><path fill="currentColor" fill-rule="evenodd" d="M5.53 4.47 4.47 5.53 7.94 9l-3.47 3.47 1.06 1.06L9 10.06l3.47 3.47 1.06-1.06L10.06 9l3.47-3.47-1.06-1.06L9 7.94 5.53 4.47Z" clip-rule="evenodd"></path></g><defs><clipPath id="a"><path fill="#fff" d="M0 0h18v18H0z"></path></clipPath></defs></g></symbol><use xlink:href="#ai:local:theme/cross-18"></use>  </svg>  </button> </div>  </div> <img id="lightbox-image" src="" data-astro-cid-kws7taxh=""> </div>   <div id="page-container" data-astro-cid-xgirumru=""> <aside id="nav" class="" style="" data-astro-cid-sa57sq6l=""> <div class="sidebar-viewport" data-astro-cid-sa57sq6l=""> <div class="sidebar" data-astro-cid-sa57sq6l=""> <ul class="toc" aria-label="文档侧边栏" data-astro-cid-sa57sq6l=""> <li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/welcome" data-astro-cid-omxx3dey=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">欢迎使用 Pine Script™ v5</font></font></a></li><li class="item" data-astro-cid-omxx3dey=""><details data-astro-cid-omxx3dey=""><summary data-astro-cid-omxx3dey=""><div class="summary-link" data-astro-cid-omxx3dey=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">初识Pine Script™</font></font></div><div class="caret" data-astro-cid-omxx3dey=""><svg width="18" height="18" viewBox="0 0 24 24" class="icon" data-astro-cid-omxx3dey="" data-icon="theme/right-caret">  <symbol id="ai:local:theme/right-caret"><path fill="currentColor" d="m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z"></path></symbol><use xlink:href="#ai:local:theme/right-caret"></use>  </svg></div></summary><ul class="children" data-astro-cid-omxx3dey=""><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/primer/first-steps" data-astro-cid-omxx3dey=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第一步</font></font></a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/primer/first-indicator" data-astro-cid-omxx3dey=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第一个指标</font></font></a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/primer/next-steps" data-astro-cid-omxx3dey=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">下一步</font></font></a></li></ul></details></li><li class="item" data-astro-cid-omxx3dey=""><details open="" data-is-parent="" data-astro-cid-omxx3dey=""><summary data-astro-cid-omxx3dey=""><div class="summary-link" data-astro-cid-omxx3dey=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">语言</font></font></div><div class="caret" data-astro-cid-omxx3dey=""><svg width="18" height="18" viewBox="0 0 24 24" class="icon" data-astro-cid-omxx3dey="" data-icon="theme/right-caret">  <use xlink:href="#ai:local:theme/right-caret"></use>  </svg></div></summary><ul class="children" data-astro-cid-omxx3dey=""><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/language/execution-model" data-astro-cid-omxx3dey=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">执行模型</font></font></a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/language/time-series" data-astro-cid-omxx3dey=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">时间序列</font></font></a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/language/script-structure" data-astro-cid-omxx3dey=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">脚本结构</font></font></a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/language/identifiers" data-astro-cid-omxx3dey=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">身份标识</font></font></a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/language/operators" data-astro-cid-omxx3dey=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">运算符</font></font></a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/language/variable-declarations" data-astro-cid-omxx3dey=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">变量声明</font></font></a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/language/conditional-structures" data-astro-cid-omxx3dey=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">条件结构</font></font></a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/language/loops" data-astro-cid-omxx3dey=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">循环</font></font></a></li><li class="item" data-current="" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/language/type-system" data-astro-cid-omxx3dey=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">类型系统</font></font></a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/language/built-ins" data-astro-cid-omxx3dey=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">内置</font></font></a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/language/user-defined-functions" data-astro-cid-omxx3dey=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">用户定义函数</font></font></a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/language/objects" data-astro-cid-omxx3dey=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">对象</font></font></a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/language/enums" data-astro-cid-omxx3dey=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">枚举</font></font></a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/language/methods" data-astro-cid-omxx3dey=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">方法</font></font></a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/language/arrays" data-astro-cid-omxx3dey=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">数组</font></font></a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/language/matrices" data-astro-cid-omxx3dey=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">矩阵</font></font></a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/language/maps" data-astro-cid-omxx3dey=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">地图</font></font></a></li></ul></details></li><li class="item" data-astro-cid-omxx3dey=""><details data-astro-cid-omxx3dey=""><summary data-astro-cid-omxx3dey=""><div class="summary-link" data-astro-cid-omxx3dey=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">概念</font></font></div><div class="caret" data-astro-cid-omxx3dey=""><svg width="18" height="18" viewBox="0 0 24 24" class="icon" data-astro-cid-omxx3dey="" data-icon="theme/right-caret">  <use xlink:href="#ai:local:theme/right-caret"></use>  </svg></div></summary><ul class="children" data-astro-cid-omxx3dey=""><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/concepts/alerts" data-astro-cid-omxx3dey=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">警报</font></font></a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/concepts/backgrounds" data-astro-cid-omxx3dey=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">背景</font></font></a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/concepts/bar-coloring" data-astro-cid-omxx3dey=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">条形图色彩</font></font></a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/concepts/bar-plotting" data-astro-cid-omxx3dey=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">条形图</font></font></a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/concepts/bar-states" data-astro-cid-omxx3dey=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">条形图状态</font></font></a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/concepts/chart-information" data-astro-cid-omxx3dey=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图表信息</font></font></a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/concepts/colors" data-astro-cid-omxx3dey=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">颜色</font></font></a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/concepts/fills" data-astro-cid-omxx3dey=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">填充</font></font></a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/concepts/inputs" data-astro-cid-omxx3dey=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">输入</font></font></a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/concepts/levels" data-astro-cid-omxx3dey=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">级别</font></font></a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/concepts/libraries" data-astro-cid-omxx3dey=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">库</font></font></a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/concepts/lines-and-boxes" data-astro-cid-omxx3dey=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">线条和盒子</font></font></a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/concepts/non-standard-charts-data" data-astro-cid-omxx3dey=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">非标准图表数据</font></font></a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/concepts/other-timeframes-and-data" data-astro-cid-omxx3dey=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">其他时间范围和数据</font></font></a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/concepts/plots" data-astro-cid-omxx3dey=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图</font></font></a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/concepts/repainting" data-astro-cid-omxx3dey=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">重新粉刷</font></font></a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/concepts/sessions" data-astro-cid-omxx3dey=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">会议</font></font></a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/concepts/strategies" data-astro-cid-omxx3dey=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">策略</font></font></a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/concepts/tables" data-astro-cid-omxx3dey=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表格</font></font></a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/concepts/text-and-shapes" data-astro-cid-omxx3dey=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">文本和形状</font></font></a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/concepts/time" data-astro-cid-omxx3dey=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">时间</font></font></a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/concepts/timeframes" data-astro-cid-omxx3dey=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">时间范围</font></font></a></li></ul></details></li><li class="item" data-astro-cid-omxx3dey=""><details data-astro-cid-omxx3dey=""><summary data-astro-cid-omxx3dey=""><div class="summary-link" data-astro-cid-omxx3dey=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">编写脚本</font></font></div><div class="caret" data-astro-cid-omxx3dey=""><svg width="18" height="18" viewBox="0 0 24 24" class="icon" data-astro-cid-omxx3dey="" data-icon="theme/right-caret">  <use xlink:href="#ai:local:theme/right-caret"></use>  </svg></div></summary><ul class="children" data-astro-cid-omxx3dey=""><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/writing/style-guide" data-astro-cid-omxx3dey=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">风格指南</font></font></a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/writing/debugging" data-astro-cid-omxx3dey=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">调试</font></font></a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/writing/profiling-and-optimization" data-astro-cid-omxx3dey=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">分析和优化</font></font></a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/writing/publishing" data-astro-cid-omxx3dey=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">发布脚本</font></font></a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/writing/limitations" data-astro-cid-omxx3dey=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">限制</font></font></a></li></ul></details></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/faq" data-astro-cid-omxx3dey=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">常问问题</font></font></a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/error-messages" data-astro-cid-omxx3dey=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">错误消息</font></font></a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/release-notes" data-astro-cid-omxx3dey=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">发行说明</font></font></a></li><li class="item" data-astro-cid-omxx3dey=""><details data-astro-cid-omxx3dey=""><summary data-astro-cid-omxx3dey=""><div class="summary-link" data-astro-cid-omxx3dey=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">迁移指南</font></font></div><div class="caret" data-astro-cid-omxx3dey=""><svg width="18" height="18" viewBox="0 0 24 24" class="icon" data-astro-cid-omxx3dey="" data-icon="theme/right-caret">  <use xlink:href="#ai:local:theme/right-caret"></use>  </svg></div></summary><ul class="children" data-astro-cid-omxx3dey=""><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/migration-guides/to-pine-version-5" data-astro-cid-omxx3dey=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">转至 Pine Script™ 版本 5</font></font></a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/migration-guides/to-pine-version-4" data-astro-cid-omxx3dey=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">转至 Pine Script™ 版本 4</font></font></a></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/migration-guides/to-pine-version-3" data-astro-cid-omxx3dey=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">转至 Pine Script™ 版本 3</font></font></a></li></ul></details></li><li class="item" data-astro-cid-omxx3dey=""><a class="page-link" href="/pine-script-docs/where-can-i-get-more-information" data-astro-cid-omxx3dey=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在哪里可以获得更多信息？</font></font></a></li> </ul> <div class="toc-bottom" data-astro-cid-sa57sq6l=""></div> </div> </div> </aside>  <main class="main-pane" data-page-type="md" data-astro-cid-xgirumru=""> <a id="top" data-astro-cid-xgirumru=""></a> <main class="content" data-toc-shown="" data-astro-cid-ju3wuhkz="">  <div class="content-width" data-astro-cid-xgirumru=""> <div class="breadcrumbs" data-pagefind-ignore="" data-astro-cid-wlavna2o=""> <a href="/pine-script-docs" aria-label="返回文档主页。" data-astro-cid-wlavna2o=""> <span data-astro-cid-wlavna2o=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">用户手册</font></font></span>  </a>  <span class="divider" data-astro-cid-wlavna2o=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/</font></font></span> <a href="/pine-script-docs/language/execution-model" data-astro-cid-wlavna2o=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">语言</font></font></a> <span class="divider" data-astro-cid-wlavna2o=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/</font></font></span> <span class="current-item" data-astro-cid-wlavna2o=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">类型系统</font></font></span> </div>     </div> <div id="slot-container" data-astro-cid-xgirumru="">  <h1 id="type-system" class="md-heading"><a href="#type-system"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">类型</font></font><span class="fancy-wrap"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">系统</font></font><span class="icon icon-link" aria-hidden="true"><svg width="28" height="28" viewBox="0 0 28 28"><g fill="currentColor" clip-path="url(#a)"><path d="M14.908 5.558a5.326 5.326 0 1 1 7.533 7.533l-3.236 3.236-1.061-1.061 3.236-3.236a3.826 3.826 0 1 0-5.411-5.411l-3.236 3.236-1.06-1.06 3.235-3.237ZM5.56 14.907a5.326 5.326 0 0 0 7.532 7.533l3.236-3.236-1.061-1.061-3.236 3.236a3.826 3.826 0 1 1-5.411-5.411l3.236-3.236-1.061-1.06-3.236 3.235Z"></path><path d="m16.346 10.592-5.753 5.753 1.061 1.06 5.753-5.752-1.06-1.06Z"></path></g><defs><clipPath id="a"><path fill="#fff" d="M0 0h28v28H0z"></path></clipPath></defs></svg></span></span></a></h1>
<h2 id="introduction" class="md-heading"><a href="#introduction"> <span class="fancy-wrap"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">介绍</font></font><span class="icon icon-link" aria-hidden="true"><svg width="28" height="28" viewBox="0 0 28 28"><g fill="currentColor" clip-path="url(#a)"><path d="M14.908 5.558a5.326 5.326 0 1 1 7.533 7.533l-3.236 3.236-1.061-1.061 3.236-3.236a3.826 3.826 0 1 0-5.411-5.411l-3.236 3.236-1.06-1.06 3.235-3.237ZM5.56 14.907a5.326 5.326 0 0 0 7.532 7.533l3.236-3.236-1.061-1.061-3.236 3.236a3.826 3.826 0 1 1-5.411-5.411l3.236-3.236-1.061-1.06-3.236 3.235Z"></path><path d="m16.346 10.592-5.753 5.753 1.061 1.06 5.753-5.752-1.06-1.06Z"></path></g><defs><clipPath id="a"><path fill="#fff" d="M0 0h28v28H0z"></path></clipPath></defs></svg></span></span></a></h2>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pine Script™ 类型系统决定了脚本值与各种函数和操作的兼容性。虽然可以在不了解类型系统的情况下编写简单的脚本，但对类型系统的合理理解对于达到语言熟练程度是必不可少的，而对其细微之处的深入了解可以让程序员充分发挥其潜力。</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pine Script™ 使用</font></font><a href="/pine-script-docs/language/type-system#types"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">类型</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">对所有值进行分类，并使用</font></font><a href="/pine-script-docs/language/type-system#qualifiers"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">限定符</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">来确定值和引用是常量、在第一次脚本执行时建立还是在执行过程中动态变化。该系统适用于所有 Pine 值和引用，包括文字、变量、表达式、函数返回和函数参数。</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">类型系统与 Pine 的
</font></font><a href="/pine-script-docs/language/execution-model"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">执行模型</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
</font></font><a href="/pine-script-docs/language/time-series"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">时间序列</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">概念紧密相关。理解这三者对于充分利用 Pine Script™ 的强大功能至关重要。</font></font></p>
<aside aria-label="注意！" class="tv-informer not-content" style="--informer-header-color:#FF9800;--informer-back-color-light:#FFF3E0;--informer-back-color-dark:#33261A"><div class="tv-informer-icon"><svg viewBox="0 0 18 18" width="18" height="18"><path fill-rule="evenodd" d="M9 17A8 8 0 1 0 9 1a8 8 0 0 0 0 16ZM9 4c-.79 0-1.38.7-1.25 1.48l.67 4.03a.59.59 0 0 0 1.16 0l.67-4.03A1.27 1.27 0 0 0 9 4Zm0 8a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z" fill="currentColor"></path></svg></div><div class="tv-informer-content"><p><span class="tv-informer-header"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">注意！</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">为了简洁起见，我们经常使用“类型”来指代“合格类型”。</font></font></p></div></aside>
<h2 id="qualifiers" class="md-heading"><a href="#qualifiers"> <span class="fancy-wrap"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">资格赛</font></font><span class="icon icon-link" aria-hidden="true"><svg width="28" height="28" viewBox="0 0 28 28"><g fill="currentColor" clip-path="url(#a)"><path d="M14.908 5.558a5.326 5.326 0 1 1 7.533 7.533l-3.236 3.236-1.061-1.061 3.236-3.236a3.826 3.826 0 1 0-5.411-5.411l-3.236 3.236-1.06-1.06 3.235-3.237ZM5.56 14.907a5.326 5.326 0 0 0 7.532 7.533l3.236-3.236-1.061-1.061-3.236 3.236a3.826 3.826 0 1 1-5.411-5.411l3.236-3.236-1.061-1.06-3.236 3.235Z"></path><path d="m16.346 10.592-5.753 5.753 1.061 1.06 5.753-5.752-1.06-1.06Z"></path></g><defs><clipPath id="a"><path fill="#fff" d="M0 0h28v28H0z"></path></clipPath></defs></svg></span></span></a></h2>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pine Script™</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">限定符</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">识别脚本何时可以访问值：</font></font></p>
<ul>
<li><font style="vertical-align: inherit;"></font><a href="/pine-script-docs/language/type-system#const"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">限定为const 的</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值和引用
</font><font style="vertical-align: inherit;">是在编译时建立的（即，在 Pine 编辑器中保存脚本或将其添加到图表时）。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">符合
</font></font><a href="/pine-script-docs/language/type-system#input"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">输入</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">条件的值是在输入时确定的（即，根据用户输入确认值时，主要从“设置/输入”选项卡）。</font></font></li>
<li><font style="vertical-align: inherit;"></font><a href="/pine-script-docs/language/type-system#simple"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">简单的</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值
</font><font style="vertical-align: inherit;">是在零条处（即第一次脚本执行）建立的。</font></font></li>
<li><font style="vertical-align: inherit;"></font><a href="/pine-script-docs/language/type-system#series"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">符合系列</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">要求的值
</font><font style="vertical-align: inherit;">可以在整个脚本执行过程中发生变化。</font></font></li>
</ul>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pine Script™ 根据以下层次结构确定类型限定符的主导地位：</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">const &lt; input &lt; simple &lt; series</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，其中 “const” 是</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">最弱的</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">限定符，而 “series” 是</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">最强的</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。限定符层次结构转化为以下规则：只要变量、函数或操作与特定的限定类型兼容，
</font><font style="vertical-align: inherit;">则也允许使用具有</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">较弱限定符的值。</font></font></em><font style="vertical-align: inherit;"></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">脚本始终根据
其计算中的</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">主导限定符</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">限定其表达式的返回类型。例如，评估涉及“输入”和“系列”值的表达式将返回一个被限定为“系列”的值。此外，脚本</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">无法将</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值的限定符更改为</font><font style="vertical-align: inherit;">层次结构中</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">较低的限定符。如果某个值获得了</font></font></em><font style="vertical-align: inherit;"></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">更强的</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">限定符（例如，最初推断为“简单”的值在脚本执行过程中后来变为“系列”），则该状态是不可逆的。</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">需要注意的是，“series”值是唯一</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可以</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在脚本执行过程中发生变化的值，包括来自各种内置函数（例如
</font></font><a href="https://www.tradingview.com/pine-script-reference/v5/#var_close"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">close</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
和
</font></font><a href="https://www.tradingview.com/pine-script-reference/v5/#var_volume"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">volume</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ）的值，以及涉及“series”值的表达式的结果。所有限定为“const”、“input”或“simple”的值在所有脚本执行过程中都保持一致。</font></font></p>
<h3 id="const" class="md-heading"><a href="#const"> <span class="fancy-wrap"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">常量</font></font><span class="icon icon-link" aria-hidden="true"><svg width="28" height="28" viewBox="0 0 28 28"><g fill="currentColor" clip-path="url(#a)"><path d="M14.908 5.558a5.326 5.326 0 1 1 7.533 7.533l-3.236 3.236-1.061-1.061 3.236-3.236a3.826 3.826 0 1 0-5.411-5.411l-3.236 3.236-1.06-1.06 3.235-3.237ZM5.56 14.907a5.326 5.326 0 0 0 7.532 7.533l3.236-3.236-1.061-1.061-3.236 3.236a3.826 3.826 0 1 1-5.411-5.411l3.236-3.236-1.061-1.06-3.236 3.235Z"></path><path d="m16.346 10.592-5.753 5.753 1.061 1.06 5.753-5.752-1.06-1.06Z"></path></g><defs><clipPath id="a"><path fill="#fff" d="M0 0h28v28H0z"></path></clipPath></defs></svg></span></span></a></h3>
<p><font style="vertical-align: inherit;"></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">被限定为“const”的值或引用在编译时</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（即脚本开始执行之前）
</font><font style="vertical-align: inherit;">建立。编译最初发生在将脚本保存在 Pine Editor 中时，这不需要它在图表上运行。带有“const”限定符的值或引用在脚本执行之间</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">永远不会改变</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，即使在第一次执行时也不会改变。</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">所有</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">文字</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值以及仅涉及“const”限定值的表达式返回的结果都会自动采用“const”限定符。</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">以下是一些文字值的示例：</font></font></p>
<ul>
<li><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">文字</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">int </font><font style="vertical-align: inherit;">：</font></font><code dir="auto">1</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，，</font></font><code dir="auto">-1</code><font style="vertical-align: inherit;"></font><code dir="auto">42</code></li>
<li><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">文字浮点数</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">: </font></font><code dir="auto">1.</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, </font></font><code dir="auto">1.0</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, </font></font><code dir="auto">3.14</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, </font></font><code dir="auto">6.02E-23</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">,</font></font><code dir="auto">3e8</code></li>
<li><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">文字布尔值</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：</font></font><code dir="auto">true</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><code dir="auto">false</code></li>
<li><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">字面颜色</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：</font></font><code dir="auto">#FF55C6</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><code dir="auto">#FF55C6ff</code></li>
<li><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">文字</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">字符串</font><font style="vertical-align: inherit;">：</font></font><code dir="auto">"A text literal"</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，，
</font></font><code dir="auto">"Embedded single quotes 'text'"</code><font style="vertical-align: inherit;"></font><code dir="auto">'Embedded double quotes "text"'</code></li>
</ul>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">我们的</font></font><a href="/pine-script-docs/writing/style-guide"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">样式指南</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
建议使用大写 SNAKE_CASE 命名“const”变量以提高可读性。虽然不是必需的，但也可以在声明“const”变量时使用
</font></font><a href="https://www.tradingview.com/pine-script-reference/v5/#kw_var"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">var</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
关键字，以便脚本仅在</font><font style="vertical-align: inherit;">数据集的
</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第一条</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">上初始化它们。有关更多信息，请参阅我们的用户手册的</font></font><a href="/pine-script-docs/language/variable-declarations#var"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">此部分。</font></font></a><font style="vertical-align: inherit;"></font></p>
<p><font style="vertical-align: inherit;"></font><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_indicator"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">下面是在indicator()</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
和
</font></font><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_plot"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">plot()</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">函数中使用“const”值的示例
</font><font style="vertical-align: inherit;">
，它们都需要“const string”限定类型的值作为其</font></font><code dir="auto">title</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">参数：</font></font></p>
<div class="pine-colorizer not-content colorized" data-id="fh"><div class="pine-colorizer__header"><a class="pine-colorizer__title" href="https://tradingview.com/pine-script-docs/en/v5/Introduction.html" target="_blank" rel="noopener"><span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pine Script™</font></font></span></a><button class="pine-colorizer__copy-btn"><div class="pine-colorizer__tooltip"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">已复制</font></font></div></button></div><code class="monaco-editor-tv-pine-light"><span><span class="mtk9">//</span><span class="mtk9 mtkb">@version=</span><span class="mtk9">5</span></span><br><span><span></span></span><br><span><span class="mtk9">//&nbsp;The&nbsp;following&nbsp;global&nbsp;variables&nbsp;are&nbsp;all&nbsp;of&nbsp;the&nbsp;"</span><span class="mtk9">const&nbsp;string"&nbsp;qualified&nbsp;type:</span></span><br><span><span></span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;The&nbsp;title&nbsp;of&nbsp;the&nbsp;indicator.</span></span><br><span><span class="mtk33">INDICATOR_TITLE</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk29">"const&nbsp;demo"</span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;The&nbsp;title&nbsp;of&nbsp;the&nbsp;first&nbsp;plot.</span></span><br><span><span class="mtk18">var</span><span class="mtk1">&nbsp;</span><span class="mtk33">PLOT1_TITLE</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk29">"High"</span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;The&nbsp;title&nbsp;of&nbsp;the&nbsp;second&nbsp;plot.</span></span><br><span><span class="mtk18 mtkb">const</span><span class="mtk1">&nbsp;</span><span class="mtk18 mtkb">string</span><span class="mtk1">&nbsp;</span><span class="mtk33">PLOT2_TITLE</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk29">"Low"</span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;The&nbsp;title&nbsp;of&nbsp;the&nbsp;third&nbsp;plot.</span></span><br><span><span class="mtk33">PLOT3_TITLE</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk29">"Midpoint&nbsp;between&nbsp;"</span><span class="mtk1">&nbsp;</span><span class="mtk18">+</span><span class="mtk1">&nbsp;</span><span class="mtk33">PLOT1_TITLE</span><span class="mtk1">&nbsp;</span><span class="mtk18">+</span><span class="mtk1">&nbsp;</span><span class="mtk29">"&nbsp;and&nbsp;"</span><span class="mtk1">&nbsp;</span><span class="mtk18">+</span><span class="mtk1">&nbsp;</span><span class="mtk33">PLOT2_TITLE</span></span><br><span><span></span></span><br><span><span class="mtk16">indicator</span><span class="mtk13">(</span><span class="mtk33">INDICATOR_TITLE</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">overlay</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk11">true</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk16">plot</span><span class="mtk13">(</span><span class="mtk11">high</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">PLOT1_TITLE</span><span class="mtk13">)</span></span><br><span><span class="mtk16">plot</span><span class="mtk13">(</span><span class="mtk11">low</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">PLOT2_TITLE</span><span class="mtk13">)</span></span><br><span><span class="mtk16">plot</span><span class="mtk13">(</span><span class="mtk11">hl2</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">PLOT3_TITLE</span><span class="mtk13">)</span></span><br></code></div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">以下示例将引发编译错误，因为它使用了
</font></font><a href="https://www.tradingview.com/pine-script-reference/v5/#var_syminfo.ticker"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">syminfo.ticker</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，它返回一个“简单”值，因为它依赖于仅在脚本第一次执行后才可访问的图表信息：</font></font></p>
<div class="pine-colorizer not-content colorized" data-id="lz"><div class="pine-colorizer__header"><a class="pine-colorizer__title" href="https://tradingview.com/pine-script-docs/en/v5/Introduction.html" target="_blank" rel="noopener"><span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pine Script™</font></font></span></a><button class="pine-colorizer__copy-btn"><div class="pine-colorizer__tooltip"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">已复制</font></font></div></button></div><code class="monaco-editor-tv-pine-light"><span><span class="mtk9">//</span><span class="mtk9 mtkb">@version=</span><span class="mtk9">5</span></span><br><span><span></span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;The&nbsp;title&nbsp;in&nbsp;the&nbsp;`indicator()`&nbsp;call.</span></span><br><span><span class="mtk18">var</span><span class="mtk1">&nbsp;</span><span class="mtk33">NAME</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk29">"My&nbsp;indicator&nbsp;for&nbsp;"</span><span class="mtk1">&nbsp;</span><span class="mtk18">+</span><span class="mtk1">&nbsp;</span><span class="mtk11">syminfo.ticker</span></span><br><span><span></span></span><br><span><span class="mtk16">indicator</span><span class="mtk13">(</span><span class="mtk33">NAME</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">""</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk11">true</span><span class="mtk13">)</span><span class="mtk1">&nbsp;</span><span class="mtk9">//&nbsp;Causes&nbsp;an&nbsp;error&nbsp;because&nbsp;`NAME`&nbsp;is&nbsp;qualified&nbsp;as&nbsp;</span><span class="mtk9">a&nbsp;"simple&nbsp;string".</span></span><br><span><span class="mtk16">plot</span><span class="mtk13">(</span><span class="mtk11">close</span><span class="mtk13">)</span></span><br></code></div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">const
</font><font style="vertical-align: inherit;">
关键字允许使用常
</font><em><font style="vertical-align: inherit;">量值赋值</font></em><font style="vertical-align: inherit;">来声明变量和参数。使用此关键字声明变量会指示脚本禁止对其使用</font></font><a href="https://www.tradingview.com/pine-script-reference/v5/#type_const"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">重新</font></font></a><font style="vertical-align: inherit;"><em><font style="vertical-align: inherit;">赋值</font></em><font style="vertical-align: inherit;">和</font><em><font style="vertical-align: inherit;">复合赋值</font></em><font style="vertical-align: inherit;">
操作。例如，此脚本使用关键字声明变量，然后尝试使用加法赋值运算符 ( </font><a href="https://www.tradingview.com/pine-script-reference/v5/#op_+="><font style="vertical-align: inherit;">+=</font></a><font style="vertical-align: inherit;"> )为变量分配新的“浮点”值</font><font style="vertical-align: inherit;">，从而导致编译错误：</font></font><em><font style="vertical-align: inherit;"></font></em><font style="vertical-align: inherit;"></font><em><font style="vertical-align: inherit;"></font></em><font style="vertical-align: inherit;"></font><em><font style="vertical-align: inherit;"></font></em><font style="vertical-align: inherit;"></font><code dir="auto">myVar</code><font style="vertical-align: inherit;"></font><a href="https://www.tradingview.com/pine-script-reference/v5/#op_+="><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"></font></p>
<div class="pine-colorizer not-content colorized" data-id="7nm"><div class="pine-colorizer__header"><a class="pine-colorizer__title" href="https://tradingview.com/pine-script-docs/en/v5/Introduction.html" target="_blank" rel="noopener"><span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pine Script™</font></font></span></a><button class="pine-colorizer__copy-btn"><div class="pine-colorizer__tooltip"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">已复制</font></font></div></button></div><code class="monaco-editor-tv-pine-light"><span><span class="mtk9">//</span><span class="mtk9 mtkb">@version=</span><span class="mtk9">5</span></span><br><span><span class="mtk16">indicator</span><span class="mtk13">(</span><span class="mtk29">"Cannot&nbsp;reassign&nbsp;const&nbsp;demo"</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;A&nbsp;"float"&nbsp;variable&nbsp;declared&nbsp;as&nbsp;`const`,&nbsp;preventin</span><span class="mtk9">g&nbsp;reassignment.&nbsp;</span></span><br><span><span class="mtk18 mtkb">const</span><span class="mtk1">&nbsp;</span><span class="mtk18 mtkb">float</span><span class="mtk1">&nbsp;</span><span class="mtk33">myVar</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk12">0.0</span></span><br><span><span></span></span><br><span><span class="mtk33">myVar</span><span class="mtk1">&nbsp;</span><span class="mtk18">+=</span><span class="mtk1">&nbsp;</span><span class="mtk12">1.0</span><span class="mtk1">&nbsp;</span><span class="mtk9">//&nbsp;Causes&nbsp;an&nbsp;error.&nbsp;Reassignment&nbsp;and&nbsp;compound&nbsp;assi</span><span class="mtk9">gnments&nbsp;are&nbsp;not&nbsp;allowed&nbsp;on&nbsp;`const`&nbsp;variables.</span></span><br><span><span></span></span><br><span><span class="mtk16">plot</span><span class="mtk13">(</span><span class="mtk33">myVar</span><span class="mtk13">)</span></span><br></code></div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">需要注意的是，使用
</font></font><a href="https://www.tradingview.com/pine-script-reference/v5/#type_const"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">const</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
关键字声明变量会强制其保持对特定表达式返回值的常量引用，但这</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">不一定</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">定义所赋值的性质。例如，脚本可以声明一个
</font></font><a href="https://www.tradingview.com/pine-script-reference/v5/#type_const"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">const变量，该变量保持对返回</font></font></a><font style="vertical-align: inherit;"><em><font style="vertical-align: inherit;">特殊类型</font></em></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ID</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">的</font><font style="vertical-align: inherit;">
表达式的常量引用</font><font style="vertical-align: inherit;">。虽然脚本无法</font><em><font style="vertical-align: inherit;">重新分配</font></em><font style="vertical-align: inherit;">变量，但分配的 ID 是一个“系列”值：</font></font><em><font style="vertical-align: inherit;"></font></em><font style="vertical-align: inherit;"></font><em><font style="vertical-align: inherit;"></font></em><font style="vertical-align: inherit;"></font></p>
<div class="pine-colorizer not-content colorized" data-id="5d1"><div class="pine-colorizer__header"><a class="pine-colorizer__title" href="https://tradingview.com/pine-script-docs/en/v5/Introduction.html" target="_blank" rel="noopener"><span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pine Script™</font></font></span></a><button class="pine-colorizer__copy-btn"><div class="pine-colorizer__tooltip"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">已复制</font></font></div></button></div><code class="monaco-editor-tv-pine-light"><span><span class="mtk9">//</span><span class="mtk9 mtkb">@version=</span><span class="mtk9">5</span></span><br><span><span class="mtk16">indicator</span><span class="mtk13">(</span><span class="mtk29">"Constant&nbsp;reference&nbsp;to&nbsp;'series'&nbsp;ID&nbsp;demo"</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;A&nbsp;`label`&nbsp;variable&nbsp;declared&nbsp;as&nbsp;`const`,&nbsp;preventin</span><span class="mtk9">g&nbsp;reassignment.</span></span><br><span><span class="mtk9">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Although&nbsp;the&nbsp;reference&nbsp;is&nbsp;constant,&nbsp;th</span><span class="mtk9">e&nbsp;ID&nbsp;of&nbsp;the&nbsp;`label`&nbsp;is&nbsp;a&nbsp;"series"&nbsp;value.</span></span><br><span><span class="mtk18 mtkb">const</span><span class="mtk1">&nbsp;</span><span class="mtk18 mtkb">label</span><span class="mtk1">&nbsp;</span><span class="mtk33">myVar</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">label.new</span><span class="mtk13">(</span><span class="mtk11">bar_index</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk11">close</span><span class="mtk13">)</span></span><br></code></div>
<h3 id="input" class="md-heading"><a href="#input"> <span class="fancy-wrap"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">输入</font></font><span class="icon icon-link" aria-hidden="true"><svg width="28" height="28" viewBox="0 0 28 28"><g fill="currentColor" clip-path="url(#a)"><path d="M14.908 5.558a5.326 5.326 0 1 1 7.533 7.533l-3.236 3.236-1.061-1.061 3.236-3.236a3.826 3.826 0 1 0-5.411-5.411l-3.236 3.236-1.06-1.06 3.235-3.237ZM5.56 14.907a5.326 5.326 0 0 0 7.532 7.533l3.236-3.236-1.061-1.061-3.236 3.236a3.826 3.826 0 1 1-5.411-5.411l3.236-3.236-1.061-1.06-3.236 3.235Z"></path><path d="m16.346 10.592-5.753 5.753 1.061 1.06 5.753-5.752-1.06-1.06Z"></path></g><defs><clipPath id="a"><path fill="#fff" d="M0 0h28v28H0z"></path></clipPath></defs></svg></span></span></a></h3>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">大多数被限定为“输入”的值都是通过函数初始化后建立的</font></font><code dir="auto">input.*()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。这些函数产生的值可供用户在脚本设置的“输入”选项卡中修改。当更改此选项卡中的任何值时，脚本将从图表历史记录的开头</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">重新启动</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，以确保其输入在整个执行过程中保持一致。Pine 的一些内置变量（例如
</font></font><a href="https://www.tradingview.com/pine-script-reference/v5/#var_chart.bg_color"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">chart.bg_color）</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
也使用“输入”限定符，即使函数不返回它们，因为脚本在</font><em><font style="vertical-align: inherit;">输入时</font></em></font><code dir="auto">input.*()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">接收它们的值</font><font style="vertical-align: inherit;">。</font></font><em><font style="vertical-align: inherit;"></font></em><font style="vertical-align: inherit;"></font></p>
<aside aria-label="注意！" class="tv-informer not-content" style="--informer-header-color:#FF9800;--informer-back-color-light:#FFF3E0;--informer-back-color-dark:#33261A"><div class="tv-informer-icon"><svg viewBox="0 0 18 18" width="18" height="18"><path fill-rule="evenodd" d="M9 17A8 8 0 1 0 9 1a8 8 0 0 0 0 16ZM9 4c-.79 0-1.38.7-1.25 1.48l.67 4.03a.59.59 0 0 0 1.16 0l.67-4.03A1.27 1.27 0 0 0 9 4Zm0 8a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z" fill="currentColor"></path></svg></div><div class="tv-informer-content"><p><span class="tv-informer-header"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">注意！</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">input.source
 </font></font><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_input.source"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">()</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
和
</font></font><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_input.enum"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">input.enum()</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
函数是</font></font><code dir="auto">input.*()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">命名空间中的例外，因为它们</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">不</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
返回限定为“输入”的值。input.source
 </font></font><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_input.source"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">()</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
函数返回“series”值，因为内置变量（例如
</font></font><a href="https://www.tradingview.com/pine-script-reference/v5/#var_open"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">open</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
和
</font></font><a href="https://www.tradingview.com/pine-script-reference/v5/#var_close"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">close</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）以及来自另一个脚本绘图的值都具有“series”限定符。input.enum
 </font></font><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_input.enum"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">()函数返回“simple”结果，因为所有属于</font></font></a><font style="vertical-align: inherit;"></font><a href="/pine-script-docs/language/type-system#types"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">枚举</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
的值
</font><font style="vertical-align: inherit;">在第一次执行脚本时都可用。有关更多信息，请参阅本手册的
</font></font><a href="/pine-script-docs/concepts/inputs/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">输入</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">页面。</font></font></p></div></aside>
<p><font style="vertical-align: inherit;"></font><code dir="auto">sourceInput</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">以下脚本根据
</font></font><code dir="auto">symbolInput</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和上下文</font><font style="vertical-align: inherit;">绘制 a 的值</font></font><code dir="auto">timeframeInput</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
 </font></font><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_request.security"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">request.security()</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
调用在此脚本中有效，因为其</font></font><code dir="auto">symbol</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><code dir="auto">timeframe</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
参数允许“简单字符串”参数，这意味着它们也可以接受“输入字符串”值，因为“输入”限定符
</font><font style="vertical-align: inherit;">在层次结构中</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">较低：</font></font></em><font style="vertical-align: inherit;"></font></p>
<div class="pine-colorizer not-content colorized" data-id="3wu"><div class="pine-colorizer__header"><a class="pine-colorizer__title" href="https://tradingview.com/pine-script-docs/en/v5/Introduction.html" target="_blank" rel="noopener"><span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pine Script™</font></font></span></a><button class="pine-colorizer__copy-btn"><div class="pine-colorizer__tooltip"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">已复制</font></font></div></button></div><code class="monaco-editor-tv-pine-light"><span><span class="mtk9">//</span><span class="mtk9 mtkb">@version=</span><span class="mtk9">5</span></span><br><span><span class="mtk16">indicator</span><span class="mtk13">(</span><span class="mtk29">"input&nbsp;demo"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">overlay</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk11">true</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;The&nbsp;symbol&nbsp;to&nbsp;request&nbsp;data&nbsp;from.&nbsp;Qualified&nbsp;as&nbsp;"in</span><span class="mtk9">put&nbsp;string".</span></span><br><span><span class="mtk33">symbolInput</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">input.symbol</span><span class="mtk13">(</span><span class="mtk29">"AAPL"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"Symbol"</span><span class="mtk13">)</span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;The&nbsp;timeframe&nbsp;of&nbsp;the&nbsp;data&nbsp;request.&nbsp;Qualified&nbsp;as&nbsp;"</span><span class="mtk9">input&nbsp;string".</span></span><br><span><span class="mtk33">timeframeInput</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">input.timeframe</span><span class="mtk13">(</span><span class="mtk29">"D"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"Timeframe"</span><span class="mtk13">)</span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;The&nbsp;source&nbsp;of&nbsp;the&nbsp;calculation.&nbsp;Qualified&nbsp;as&nbsp;"seri</span><span class="mtk9">es&nbsp;float".</span></span><br><span><span class="mtk33">sourceInput</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">input.source</span><span class="mtk13">(</span><span class="mtk11">close</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"Source"</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;The&nbsp;`sourceInput`&nbsp;value&nbsp;from&nbsp;the&nbsp;requested&nbsp;contex</span><span class="mtk9">t.&nbsp;Qualified&nbsp;as&nbsp;"series&nbsp;float".</span></span><br><span><span class="mtk33">requestedSource</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">request.security</span><span class="mtk13">(</span><span class="mtk33">symbolInput</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">timeframeInput</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">sourceInput</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk16">plot</span><span class="mtk13">(</span><span class="mtk33">requestedSource</span><span class="mtk13">)</span></span><br></code></div>
<h3 id="simple" class="md-heading"><a href="#simple"> <span class="fancy-wrap"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">简单的</font></font><span class="icon icon-link" aria-hidden="true"><svg width="28" height="28" viewBox="0 0 28 28"><g fill="currentColor" clip-path="url(#a)"><path d="M14.908 5.558a5.326 5.326 0 1 1 7.533 7.533l-3.236 3.236-1.061-1.061 3.236-3.236a3.826 3.826 0 1 0-5.411-5.411l-3.236 3.236-1.06-1.06 3.235-3.237ZM5.56 14.907a5.326 5.326 0 0 0 7.532 7.533l3.236-3.236-1.061-1.061-3.236 3.236a3.826 3.826 0 1 1-5.411-5.411l3.236-3.236-1.061-1.06-3.236 3.235Z"></path><path d="m16.346 10.592-5.753 5.753 1.061 1.06 5.753-5.752-1.06-1.06Z"></path></g><defs><clipPath id="a"><path fill="#fff" d="M0 0h28v28H0z"></path></clipPath></defs></svg></span></span></a></h3>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">被认定为“简单”的值在第一次脚本执行时可用，并且在后续执行中保持一致。</font></font></p>
<p><font style="vertical-align: inherit;"></font><code dir="auto">simple</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">用户可以通过在声明中</font><font style="vertical-align: inherit;">包含关键字来明确定义接受“简单”值的变量和参数。</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">许多内置变量返回“简单”限定值，因为它们依赖于脚本在图表上开始运行时才能获得的信息。此外，许多内置函数需要不会随时间变化的“简单”参数。只要脚本允许“简单”值，它也可以接受限定为“输入”或“const”的值。</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">此脚本突出显示背景，以警告用户他们正在使用非标准图表类型。它使用
</font></font><a href="https://www.tradingview.com/pine-script-reference/v5/#var_chart.is_standard"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">chart.is_standard</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">的值
来计算</font></font><code dir="auto">isNonStandard</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">变量，然后使用该变量的值来计算</font></font><code dir="auto">warningColor</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">也引用“简单”值的变量。bgcolor </font><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_bgcolor"><font style="vertical-align: inherit;">()</font></a></font><code dir="auto">color</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">的参数
</font><font style="vertical-align: inherit;">
允许使用“系列颜色”参数，这意味着它也可以接受“简单颜色”值，因为“简单”在层次结构中较低：</font></font><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_bgcolor"><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"></font></p>
<div class="pine-colorizer not-content colorized" data-id="317"><div class="pine-colorizer__header"><a class="pine-colorizer__title" href="https://tradingview.com/pine-script-docs/en/v5/Introduction.html" target="_blank" rel="noopener"><span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pine Script™</font></font></span></a><button class="pine-colorizer__copy-btn"><div class="pine-colorizer__tooltip"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">已复制</font></font></div></button></div><code class="monaco-editor-tv-pine-light"><span><span class="mtk9">//</span><span class="mtk9 mtkb">@version=</span><span class="mtk9">5</span></span><br><span><span class="mtk16">indicator</span><span class="mtk13">(</span><span class="mtk29">"simple&nbsp;demo"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">overlay</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk11">true</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;Is&nbsp;`true`&nbsp;when&nbsp;the&nbsp;current&nbsp;chart&nbsp;is&nbsp;non-standard.</span><span class="mtk9">&nbsp;Qualified&nbsp;as&nbsp;"simple&nbsp;bool".</span></span><br><span><span class="mtk33">isNonStandard</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk18">not</span><span class="mtk1">&nbsp;</span><span class="mtk11">chart.is_standard</span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;Is&nbsp;orange&nbsp;when&nbsp;the&nbsp;the&nbsp;current&nbsp;chart&nbsp;is&nbsp;non-stand</span><span class="mtk9">ard.&nbsp;Qualified&nbsp;as&nbsp;"simple&nbsp;color".</span></span><br><span><span class="mtk18 mtkb">simple</span><span class="mtk1">&nbsp;</span><span class="mtk18 mtkb">color</span><span class="mtk1">&nbsp;</span><span class="mtk33">warningColor</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk33">isNonStandard</span><span class="mtk1">&nbsp;</span><span class="mtk18">?</span><span class="mtk1">&nbsp;</span><span class="mtk16">color.new</span><span class="mtk13">(</span><span class="mtk11">color.orange</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">70</span><span class="mtk13">)</span><span class="mtk1">&nbsp;</span><span class="mtk18">:</span><span class="mtk1">&nbsp;</span><span class="mtk11">na</span></span><br><span><span></span></span><br><span><span class="mtk9">//&nbsp;Colors&nbsp;the&nbsp;chart's&nbsp;background&nbsp;to&nbsp;warn&nbsp;that&nbsp;it's</span><span class="mtk9">&nbsp;a&nbsp;non-standard&nbsp;chart&nbsp;type.</span></span><br><span><span class="mtk16">bgcolor</span><span class="mtk13">(</span><span class="mtk33">warningColor</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">title</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk29">"Non-standard&nbsp;chart&nbsp;color"</span><span class="mtk13">)</span></span><br></code></div>
<h3 id="series" class="md-heading"><a href="#series"> <span class="fancy-wrap"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">系列</font></font><span class="icon icon-link" aria-hidden="true"><svg width="28" height="28" viewBox="0 0 28 28"><g fill="currentColor" clip-path="url(#a)"><path d="M14.908 5.558a5.326 5.326 0 1 1 7.533 7.533l-3.236 3.236-1.061-1.061 3.236-3.236a3.826 3.826 0 1 0-5.411-5.411l-3.236 3.236-1.06-1.06 3.235-3.237ZM5.56 14.907a5.326 5.326 0 0 0 7.532 7.533l3.236-3.236-1.061-1.061-3.236 3.236a3.826 3.826 0 1 1-5.411-5.411l3.236-3.236-1.061-1.06-3.236 3.235Z"></path><path d="m16.346 10.592-5.753 5.753 1.061 1.06 5.753-5.752-1.06-1.06Z"></path></g><defs><clipPath id="a"><path fill="#fff" d="M0 0h28v28H0z"></path></clipPath></defs></svg></span></span></a></h3>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">符合“系列”要求的值在脚本中提供了最大的灵活性，因为它们可以在执行过程中发生变化。</font></font></p>
<p><font style="vertical-align: inherit;"></font><code dir="auto">series</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">用户可以通过在声明中</font><font style="vertical-align: inherit;">包含关键字来明确定义接受“系列”值的变量和参数。</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">内置变量（例如
</font></font><a href="https://www.tradingview.com/pine-script-reference/v5/#var_open"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">open</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、
 </font></font><a href="https://www.tradingview.com/pine-script-reference/v5/#var_high"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">high</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、
 </font></font><a href="https://www.tradingview.com/pine-script-reference/v5/#var_low"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">low</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、
 </font></font><a href="https://www.tradingview.com/pine-script-reference/v5/#var_close"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">close</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、
 </font></font><a href="https://www.tradingview.com/pine-script-reference/v5/#var_volume"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">volume</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、
 </font></font><a href="https://www.tradingview.com/pine-script-reference/v5/#var_time"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">time</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
</font></font><a href="https://www.tradingview.com/pine-script-reference/v5/#var_bar_index"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">bar_index</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）以及使用此类内置变量的任何表达式的结果均被限定为“系列”。任何返回动态值的函数或操作的结果将始终是“系列”，使用历史引用运算符
</font></font><a href="https://www.tradingview.com/pine-script-reference/v5/#op_%5B%5D"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[]</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
访问历史值的结果也是如此。只要脚本允许“系列”值，它也会接受带有任何其他限定符的值，因为“系列”是层次结构中的</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">最高</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">限定符。</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">此脚本显示
</font><font style="vertical-align: inherit;">横线</font><font style="vertical-align: inherit;">
的</font></font><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_ta.highest"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">最高</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值
和
</font></font><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_ta.lowest"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">最低</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值。分配给</font><font style="vertical-align: inherit;">和</font><font style="vertical-align: inherit;">变量的值属于“系列浮点数”限定类型，因为它们可以在脚本执行过程中发生变化：</font></font><code dir="auto">sourceInput</code><font style="vertical-align: inherit;"></font><code dir="auto">lengthInput</code><font style="vertical-align: inherit;"></font><code dir="auto">highest</code><font style="vertical-align: inherit;"></font><code dir="auto">lowest</code><font style="vertical-align: inherit;"></font></p>
<div class="pine-colorizer not-content colorized" data-id="4de"><div class="pine-colorizer__header"><a class="pine-colorizer__title" href="https://tradingview.com/pine-script-docs/en/v5/Introduction.html" target="_blank" rel="noopener"><span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pine Script™</font></font></span></a><button class="pine-colorizer__copy-btn"><div class="pine-colorizer__tooltip"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">已复制</font></font></div></button></div><code class="monaco-editor-tv-pine-light"><span><span class="mtk9">//</span><span class="mtk9 mtkb">@version=</span><span class="mtk9">5</span></span><br><span><span class="mtk16">indicator</span><span class="mtk13">(</span><span class="mtk29">"series&nbsp;demo"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">overlay</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk11">true</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;The&nbsp;source&nbsp;value&nbsp;to&nbsp;calculate&nbsp;on.&nbsp;Qualified&nbsp;as&nbsp;"s</span><span class="mtk9">eries&nbsp;float".</span></span><br><span><span class="mtk18 mtkb">series</span><span class="mtk1">&nbsp;</span><span class="mtk18 mtkb">float</span><span class="mtk1">&nbsp;</span><span class="mtk33">sourceInput</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">input.source</span><span class="mtk13">(</span><span class="mtk11">close</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"Source"</span><span class="mtk13">)</span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;The&nbsp;number&nbsp;of&nbsp;bars&nbsp;in&nbsp;the&nbsp;calculation.&nbsp;Qualified&nbsp;</span><span class="mtk9">as&nbsp;"input&nbsp;int".</span></span><br><span><span class="mtk33">lengthInput</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">input.int</span><span class="mtk13">(</span><span class="mtk12">20</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"Length"</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;The&nbsp;highest&nbsp;`sourceInput`&nbsp;value&nbsp;over&nbsp;`lengthInput</span><span class="mtk9">`&nbsp;bars.&nbsp;Qualified&nbsp;as&nbsp;"series&nbsp;float".</span></span><br><span><span class="mtk18 mtkb">series</span><span class="mtk1">&nbsp;</span><span class="mtk18 mtkb">float</span><span class="mtk1">&nbsp;</span><span class="mtk33">highest</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">ta.highest</span><span class="mtk13">(</span><span class="mtk33">sourceInput</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">lengthInput</span><span class="mtk13">)</span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;The&nbsp;lowest&nbsp;`sourceInput`&nbsp;value&nbsp;over&nbsp;`lengthInput`</span><span class="mtk9">&nbsp;bars.&nbsp;Qualified&nbsp;as&nbsp;"series&nbsp;float".</span></span><br><span><span class="mtk33">lowest</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">ta.lowest</span><span class="mtk13">(</span><span class="mtk33">sourceInput</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">lengthInput</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk16">plot</span><span class="mtk13">(</span><span class="mtk33">highest</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"Highest&nbsp;source"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk11">color.green</span><span class="mtk13">)</span></span><br><span><span class="mtk16">plot</span><span class="mtk13">(</span><span class="mtk33">lowest</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"Lowest&nbsp;source"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk11">color.red</span><span class="mtk13">)</span></span><br></code></div>
<h2 id="types" class="md-heading"><a href="#types"> <span class="fancy-wrap"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">类型</font></font><span class="icon icon-link" aria-hidden="true"><svg width="28" height="28" viewBox="0 0 28 28"><g fill="currentColor" clip-path="url(#a)"><path d="M14.908 5.558a5.326 5.326 0 1 1 7.533 7.533l-3.236 3.236-1.061-1.061 3.236-3.236a3.826 3.826 0 1 0-5.411-5.411l-3.236 3.236-1.06-1.06 3.235-3.237ZM5.56 14.907a5.326 5.326 0 0 0 7.532 7.533l3.236-3.236-1.061-1.061-3.236 3.236a3.826 3.826 0 1 1-5.411-5.411l3.236-3.236-1.061-1.06-3.236 3.235Z"></path><path d="m16.346 10.592-5.753 5.753 1.061 1.06 5.753-5.752-1.06-1.06Z"></path></g><defs><clipPath id="a"><path fill="#fff" d="M0 0h28v28H0z"></path></clipPath></defs></svg></span></span></a></h2>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pine Script™</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">类型</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">对值进行分类并确定其兼容的功能和操作。它们包括：</font></font></p>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">基本类型：
 </font></font><a href="/pine-script-docs/language/type-system#int"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">int</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、
 </font></font><a href="/pine-script-docs/language/type-system#float"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">float</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、
 </font></font><a href="/pine-script-docs/language/type-system#bool"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">bool</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、
 </font></font><a href="/pine-script-docs/language/type-system#color"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">color</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><a href="/pine-script-docs/language/type-system#string"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">string</font></font></a></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">特殊类型：
 </font></font><a href="/pine-script-docs/language/type-system#plot-and-hline"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">plot</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、
 </font></font><a href="/pine-script-docs/language/type-system#plot-and-hline"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">hline</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、
 </font></font><a href="/pine-script-docs/language/type-system#drawing-types"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">line</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、
 </font></font><a href="/pine-script-docs/language/type-system#drawing-types"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">linefill</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、
 </font></font><a href="/pine-script-docs/language/type-system#drawing-types"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">box</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、
 </font></font><a href="/pine-script-docs/language/type-system#drawing-types"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">polyline</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、
 </font></font><a href="/pine-script-docs/language/type-system#drawing-types"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">label</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、
 </font></font><a href="/pine-script-docs/language/type-system#drawing-types"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">table</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、
 </font></font><a href="/pine-script-docs/language/type-system#chart-points"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">chart.point</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、
 </font></font><a href="/pine-script-docs/language/type-system#collections"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">array</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、
 </font></font><a href="/pine-script-docs/language/type-system#collections"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">matrix</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
</font></font><a href="/pine-script-docs/language/type-system#collections"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">map</font></font></a></li>
<li><a href="/pine-script-docs/language/type-system#user-defined-types"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">用户定义类型 (UDT)</font></font></a></li>
<li><a href="/pine-script-docs/language/type-system#enum-types"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">枚举</font></font></a></li>
<li><a href="/pine-script-docs/language/type-system#void"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">空白</font></font></a></li>
</ul>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">基本类型是指值的底层性质，例如，值 1 属于“int”类型，1.0 属于“float”类型，“AAPL”属于“string”类型，等等。特殊类型和用户定义类型使用引用特定类型对象的</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ID</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。例如，“label”类型的值包含一个 ID，该 ID 充当
指向“label”对象的</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">指针</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。“void”类型是指不返回可用值的函数或</font></font><a href="/pine-script-docs/language/methods"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">方法</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">的输出。</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pine Script™ 可以自动将某些类型的值转换为其他类型。自动转换规则为：</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">int → float → bool</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
</font><font style="vertical-align: inherit;">有关更多信息，请参阅本页的</font></font><a href="/pine-script-docs/language/type-system#type-casting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">类型转换部分。</font></font></a><font style="vertical-align: inherit;"></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在大多数情况下，Pine Script™ 可以自动确定值的类型。但是，我们也可以使用类型关键字来</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">明确指定类型，以提高可读性，并用于需要明确定义的代码（例如，声明分配给</font></font></em><font style="vertical-align: inherit;"></font><a href="https://www.tradingview.com/pine-script-reference/v5/#var_na"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">na 的</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">变量
</font><font style="vertical-align: inherit;">）。例如：</font></font></p>
<div class="pine-colorizer not-content colorized" data-id="6p6"><div class="pine-colorizer__header"><a class="pine-colorizer__title" href="https://tradingview.com/pine-script-docs/en/v5/Introduction.html" target="_blank" rel="noopener"><span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pine Script™</font></font></span></a><button class="pine-colorizer__copy-btn"><div class="pine-colorizer__tooltip"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">已复制</font></font></div></button></div><code class="monaco-editor-tv-pine-light"><span><span class="mtk9">//</span><span class="mtk9 mtkb">@version=</span><span class="mtk9">5</span></span><br><span><span class="mtk16">indicator</span><span class="mtk13">(</span><span class="mtk29">"Types&nbsp;demo"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">overlay</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk11">true</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;A&nbsp;value&nbsp;of&nbsp;the&nbsp;"const&nbsp;string"&nbsp;type&nbsp;for&nbsp;the&nbsp;`ma`&nbsp;p</span><span class="mtk9">lot's&nbsp;title.</span></span><br><span><span class="mtk18 mtkb">string</span><span class="mtk1">&nbsp;</span><span class="mtk33">MA_TITLE</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk29">"MA"</span></span><br><span><span></span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;A&nbsp;value&nbsp;of&nbsp;the&nbsp;"input&nbsp;int"&nbsp;type.&nbsp;Controls&nbsp;the&nbsp;len</span><span class="mtk9">gth&nbsp;of&nbsp;the&nbsp;average.</span></span><br><span><span class="mtk18 mtkb">int</span><span class="mtk1">&nbsp;</span><span class="mtk33">lengthInput</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">input.int</span><span class="mtk13">(</span><span class="mtk12">100</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"Length"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">minval</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk12">2</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;A&nbsp;"series&nbsp;float"&nbsp;value&nbsp;representing&nbsp;the&nbsp;last&nbsp;`clo</span><span class="mtk9">se`&nbsp;that&nbsp;crossed&nbsp;over&nbsp;the&nbsp;`ma`.</span></span><br><span><span class="mtk18">var</span><span class="mtk1">&nbsp;</span><span class="mtk18 mtkb">float</span><span class="mtk1">&nbsp;</span><span class="mtk33">crossValue</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk11">na</span></span><br><span><span></span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;A&nbsp;"series&nbsp;float"&nbsp;value&nbsp;representing&nbsp;the&nbsp;moving&nbsp;av</span><span class="mtk9">erage&nbsp;of&nbsp;`close`.</span></span><br><span><span class="mtk18 mtkb">float</span><span class="mtk1">&nbsp;</span><span class="mtk33">ma</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">ta.sma</span><span class="mtk13">(</span><span class="mtk11">close</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">lengthInput</span><span class="mtk13">)</span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;A&nbsp;"series&nbsp;bool"&nbsp;value&nbsp;that's&nbsp;`true`&nbsp;when&nbsp;the&nbsp;`clo</span><span class="mtk9">se`&nbsp;crosses&nbsp;over&nbsp;the&nbsp;`ma`.</span></span><br><span><span class="mtk18 mtkb">bool</span><span class="mtk1">&nbsp;</span><span class="mtk33">crossUp</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">ta.crossover</span><span class="mtk13">(</span><span class="mtk11">close</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">ma</span><span class="mtk13">)</span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;A&nbsp;"series&nbsp;color"&nbsp;value&nbsp;based&nbsp;on&nbsp;whether&nbsp;`close`&nbsp;i</span><span class="mtk9">s&nbsp;above&nbsp;or&nbsp;below&nbsp;its&nbsp;`ma`.</span></span><br><span><span class="mtk18 mtkb">color</span><span class="mtk1">&nbsp;</span><span class="mtk33">maColor</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk11">close</span><span class="mtk1">&nbsp;</span><span class="mtk18">&gt;</span><span class="mtk1">&nbsp;</span><span class="mtk33">ma</span><span class="mtk1">&nbsp;</span><span class="mtk18">?</span><span class="mtk1">&nbsp;</span><span class="mtk11">color.lime</span><span class="mtk1">&nbsp;</span><span class="mtk18">:</span><span class="mtk1">&nbsp;</span><span class="mtk11">color.fuchsia</span></span><br><span><span></span></span><br><span><span class="mtk9">//&nbsp;Update&nbsp;the&nbsp;`crossValue`.</span></span><br><span><span class="mtk18">if</span><span class="mtk1">&nbsp;</span><span class="mtk33">crossUp</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk33">crossValue</span><span class="mtk1">&nbsp;</span><span class="mtk18">:=</span><span class="mtk1">&nbsp;</span><span class="mtk11">close</span></span><br><span><span></span></span><br><span><span class="mtk16">plot</span><span class="mtk13">(</span><span class="mtk33">ma</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">MA_TITLE</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">maColor</span><span class="mtk13">)</span></span><br><span><span class="mtk16">plot</span><span class="mtk13">(</span><span class="mtk33">crossValue</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"Cross&nbsp;value"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">style</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk11">plot.style_circles</span><span class="mtk13">)</span></span><br><span><span class="mtk16">plotchar</span><span class="mtk13">(</span><span class="mtk33">crossUp</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"Cross&nbsp;Up"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"▲"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk11">location.belowbar</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">size</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk11">size.small</span><span class="mtk13">)</span></span><br></code></div>
<h3 id="int" class="md-heading"><a href="#int"> <span class="fancy-wrap"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">整数</font></font><span class="icon icon-link" aria-hidden="true"><svg width="28" height="28" viewBox="0 0 28 28"><g fill="currentColor" clip-path="url(#a)"><path d="M14.908 5.558a5.326 5.326 0 1 1 7.533 7.533l-3.236 3.236-1.061-1.061 3.236-3.236a3.826 3.826 0 1 0-5.411-5.411l-3.236 3.236-1.06-1.06 3.235-3.237ZM5.56 14.907a5.326 5.326 0 0 0 7.532 7.533l3.236-3.236-1.061-1.061-3.236 3.236a3.826 3.826 0 1 1-5.411-5.411l3.236-3.236-1.061-1.06-3.236 3.235Z"></path><path d="m16.346 10.592-5.753 5.753 1.061 1.06 5.753-5.752-1.06-1.06Z"></path></g><defs><clipPath id="a"><path fill="#fff" d="M0 0h28v28H0z"></path></clipPath></defs></svg></span></span></a></h3>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“int”类型的值表示整数，即没有任何小数的整数。</font></font></p>
<p><font style="vertical-align: inherit;"></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">整数文字是以十进制</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表示的数值</font><font style="vertical-align: inherit;">。例如：</font></font></p>
<div class="pine-colorizer not-content colorized" data-id="2e0"><div class="pine-colorizer__header"><a class="pine-colorizer__title" href="https://tradingview.com/pine-script-docs/en/v5/Introduction.html" target="_blank" rel="noopener"><span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pine Script™</font></font></span></a><button class="pine-colorizer__copy-btn"><div class="pine-colorizer__tooltip"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">已复制</font></font></div></button></div><code class="monaco-editor-tv-pine-light"><span><span class="mtk12">1</span></span><br><span><span class="mtk12">-1</span></span><br><span><span class="mtk12">750</span></span><br></code></div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">内置变量如
</font></font><a href="https://www.tradingview.com/pine-script-reference/v5/#var_bar_index"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">bar_index</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、
 </font></font><a href="https://www.tradingview.com/pine-script-reference/v5/#var_time"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">time</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、
 </font></font><a href="https://www.tradingview.com/pine-script-reference/v5/#var_timenow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">timenow</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、
 </font></font><a href="https://www.tradingview.com/pine-script-reference/v5/#var_dayofmonth"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dayofmonth</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
</font></font><a href="https://www.tradingview.com/pine-script-reference/v5/#var_strategy.wintrades"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">strategies.wintrades</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
均返回“int”类型的值。</font></font></p>
<h3 id="float" class="md-heading"><a href="#float"> <span class="fancy-wrap"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">漂浮</font></font><span class="icon icon-link" aria-hidden="true"><svg width="28" height="28" viewBox="0 0 28 28"><g fill="currentColor" clip-path="url(#a)"><path d="M14.908 5.558a5.326 5.326 0 1 1 7.533 7.533l-3.236 3.236-1.061-1.061 3.236-3.236a3.826 3.826 0 1 0-5.411-5.411l-3.236 3.236-1.06-1.06 3.235-3.237ZM5.56 14.907a5.326 5.326 0 0 0 7.532 7.533l3.236-3.236-1.061-1.061-3.236 3.236a3.826 3.826 0 1 1-5.411-5.411l3.236-3.236-1.061-1.06-3.236 3.235Z"></path><path d="m16.346 10.592-5.753 5.753 1.061 1.06 5.753-5.752-1.06-1.06Z"></path></g><defs><clipPath id="a"><path fill="#fff" d="M0 0h28v28H0z"></path></clipPath></defs></svg></span></span></a></h3>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“float”类型的值表示浮点数，即可以包含整数和小数的数字。</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">浮点文字是用</font></font><code dir="auto">.</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">分隔符书写的数值。它们也可能包含符号</font></font><code dir="auto">e</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或</font></font><code dir="auto">E</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（表示“10 的 X 次方”，其中 X 是</font></font><code dir="auto">e</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或</font></font><code dir="auto">E</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">符号后面的数字）。例如：</font></font></p>
<div class="pine-colorizer not-content colorized" data-id="2vr"><div class="pine-colorizer__header"><a class="pine-colorizer__title" href="https://tradingview.com/pine-script-docs/en/v5/Introduction.html" target="_blank" rel="noopener"><span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pine Script™</font></font></span></a><button class="pine-colorizer__copy-btn"><div class="pine-colorizer__tooltip"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">已复制</font></font></div></button></div><code class="monaco-editor-tv-pine-light"><span><span class="mtk12">3.14159</span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk9">//&nbsp;Rounded&nbsp;value&nbsp;of&nbsp;Pi&nbsp;(π)</span></span><br><span><span class="mtk18">-</span><span class="mtk1">&nbsp;</span><span class="mtk12">3.0</span></span><br><span><span class="mtk12">6.02e23</span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk9">//&nbsp;6.02&nbsp;*&nbsp;10^23&nbsp;(a&nbsp;very&nbsp;large&nbsp;value)</span></span><br><span><span class="mtk12">1.6e-19</span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk9">//&nbsp;1.6&nbsp;*&nbsp;10^-19&nbsp;(a&nbsp;very&nbsp;small&nbsp;value)</span></span><br></code></div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pine Script™ 中“浮点”值的内部精度为 1e-16。</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">内置变量如
</font></font><a href="https://www.tradingview.com/pine-script-reference/v5/#var_close"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">close</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、
 </font></font><a href="https://www.tradingview.com/pine-script-reference/v5/#var_hlcc4"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">hlcc4</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、
 </font></font><a href="https://www.tradingview.com/pine-script-reference/v5/#var_volume"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">volume</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、
 </font></font><a href="https://www.tradingview.com/pine-script-reference/v5/#var_ta.vwap"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ta.vwap</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
</font></font><a href="https://www.tradingview.com/pine-script-reference/v5/#var_strategy.position_size"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">strategies.position_size</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
均返回“float”类型的值。</font></font></p>
<h3 id="bool" class="md-heading"><a href="#bool"> <span class="fancy-wrap"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">布尔值</font></font><span class="icon icon-link" aria-hidden="true"><svg width="28" height="28" viewBox="0 0 28 28"><g fill="currentColor" clip-path="url(#a)"><path d="M14.908 5.558a5.326 5.326 0 1 1 7.533 7.533l-3.236 3.236-1.061-1.061 3.236-3.236a3.826 3.826 0 1 0-5.411-5.411l-3.236 3.236-1.06-1.06 3.235-3.237ZM5.56 14.907a5.326 5.326 0 0 0 7.532 7.533l3.236-3.236-1.061-1.061-3.236 3.236a3.826 3.826 0 1 1-5.411-5.411l3.236-3.236-1.061-1.06-3.236 3.235Z"></path><path d="m16.346 10.592-5.753 5.753 1.061 1.06 5.753-5.752-1.06-1.06Z"></path></g><defs><clipPath id="a"><path fill="#fff" d="M0 0h28v28H0z"></path></clipPath></defs></svg></span></span></a></h3>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“bool”类型的值表示比较或条件的真值，脚本可以在
</font></font><a href="/pine-script-docs/language/conditional-structures"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">条件结构</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和其他表达式中使用它。</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">只有两个文字代表布尔值：</font></font></p>
<div class="pine-colorizer not-content colorized" data-id="6ez"><div class="pine-colorizer__header"><a class="pine-colorizer__title" href="https://tradingview.com/pine-script-docs/en/v5/Introduction.html" target="_blank" rel="noopener"><span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pine Script™</font></font></span></a><button class="pine-colorizer__copy-btn"><div class="pine-colorizer__tooltip"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">已复制</font></font></div></button></div><code class="monaco-editor-tv-pine-light"><span><span class="mtk11">true</span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk9">//&nbsp;true&nbsp;value</span></span><br><span><span class="mtk11">false</span><span class="mtk1">&nbsp;&nbsp;&nbsp;</span><span class="mtk9">//&nbsp;false&nbsp;value</span></span><br></code></div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">当“bool”类型的表达式返回
</font></font><a href="https://www.tradingview.com/pine-script-reference/v5/#var_na"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">na</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">时，脚本会将其值视为</font></font><code dir="auto">false</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">评估条件语句和运算符时的值。</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">内置变量如
</font></font><a href="https://www.tradingview.com/pine-script-reference/v5/#var_barstate.isfirst"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">barstate.isfirst</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、
 </font></font><a href="https://www.tradingview.com/pine-script-reference/v5/#var_chart.is_heikinashi"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">chart.is_heikinashi</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、
 </font></font><a href="https://www.tradingview.com/pine-script-reference/v5/#var_session.ismarket"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">session.ismarket</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
</font></font><a href="https://www.tradingview.com/pine-script-reference/v5/#var_timeframe.isdaily"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">timeframe.isdaily</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
均返回“bool”类型的值。</font></font></p>
<h3 id="color" class="md-heading"><a href="#color"> <span class="fancy-wrap"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">颜色</font></font><span class="icon icon-link" aria-hidden="true"><svg width="28" height="28" viewBox="0 0 28 28"><g fill="currentColor" clip-path="url(#a)"><path d="M14.908 5.558a5.326 5.326 0 1 1 7.533 7.533l-3.236 3.236-1.061-1.061 3.236-3.236a3.826 3.826 0 1 0-5.411-5.411l-3.236 3.236-1.06-1.06 3.235-3.237ZM5.56 14.907a5.326 5.326 0 0 0 7.532 7.533l3.236-3.236-1.061-1.061-3.236 3.236a3.826 3.826 0 1 1-5.411-5.411l3.236-3.236-1.061-1.06-3.236 3.235Z"></path><path d="m16.346 10.592-5.753 5.753 1.061 1.06 5.753-5.752-1.06-1.06Z"></path></g><defs><clipPath id="a"><path fill="#fff" d="M0 0h28v28H0z"></path></clipPath></defs></svg></span></span></a></h3>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">颜色文字具有以下格式：</font></font><code dir="auto">#RRGGBB</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或</font></font><code dir="auto">#RRGGBBAA</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。字母对代表</font><font style="vertical-align: inherit;">和之间的</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">十六进制</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值</font><font style="vertical-align: inherit;">（十进制为 0 到 255），其中：</font></font><code dir="auto">00</code><font style="vertical-align: inherit;"></font><code dir="auto">FF</code><font style="vertical-align: inherit;"></font></p>
<ul>
<li><code dir="auto">RR</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、</font></font><code dir="auto">GG</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><code dir="auto">BB</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">对分别代表颜色的红色、绿色和蓝色成分的值。</font></font></li>
<li><code dir="auto">AA</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是颜色不透明度（或</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">alpha</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
分量）的可选值，其中</font></font><code dir="auto">00</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是不可见且</font></font><code dir="auto">FF</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">不透明的。当文字不包含</font></font><code dir="auto">AA</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">对时，脚本会将其视为完全不透明（与使用 相同</font></font><code dir="auto">FF</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">文字中的十六进制字母可以是大写或小写。</font></font></li>
</ul>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">这些是“颜色”文字的示例：</font></font></p>
<div class="pine-colorizer not-content colorized" data-id="6wy"><div class="pine-colorizer__header"><a class="pine-colorizer__title" href="https://tradingview.com/pine-script-docs/en/v5/Introduction.html" target="_blank" rel="noopener"><span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pine Script™</font></font></span></a><button class="pine-colorizer__copy-btn"><div class="pine-colorizer__tooltip"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">已复制</font></font></div></button></div><code class="monaco-editor-tv-pine-light"><span><span class="mtk11">#000000</span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk9">//&nbsp;black&nbsp;color</span></span><br><span><span class="mtk11">#FF0000</span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk9">//&nbsp;red&nbsp;color</span></span><br><span><span class="mtk11">#00FF00</span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk9">//&nbsp;green&nbsp;color</span></span><br><span><span class="mtk11">#0000FF</span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk9">//&nbsp;blue&nbsp;color</span></span><br><span><span class="mtk11">#FFFFFF</span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk9">//&nbsp;white&nbsp;color</span></span><br><span><span class="mtk11">#808080</span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk9">//&nbsp;gray&nbsp;color</span></span><br><span><span class="mtk11">#3ff7a0</span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk9">//&nbsp;some&nbsp;custom&nbsp;color</span></span><br><span><span class="mtk11">#FF000080</span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk9">//&nbsp;50%&nbsp;transparent&nbsp;red&nbsp;color</span></span><br><span><span class="mtk11">#FF0000ff</span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk9">//&nbsp;same&nbsp;as&nbsp;#FF0000,&nbsp;fully&nbsp;opaque&nbsp;red&nbsp;color</span></span><br><span><span class="mtk11">#FF000000</span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk9">//&nbsp;completely&nbsp;transparent&nbsp;red&nbsp;color</span></span><br></code></div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pine Script™ 还具有
</font></font><a href="/pine-script-docs/concepts/colors#constant-colors"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">内置颜色常量</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，包括
</font></font><a href="https://www.tradingview.com/pine-script-reference/v5/#const_color%7Bdot%7Dgreen"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">color.green</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、
 </font></font><a href="https://www.tradingview.com/pine-script-reference/v5/#const_color%7Bdot%7Dred"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">color.red</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、
 </font></font><a href="https://www.tradingview.com/pine-script-reference/v5/#const_color%7Bdot%7Dorange"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">color.orange</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、
 </font></font><a href="https://www.tradingview.com/pine-script-reference/v5/#const_color%7Bdot%7Dblue"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">color.blue</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
（函数中的默认颜色和</font><a href="/pine-script-docs/language/type-system#drawing-types"><font style="vertical-align: inherit;">绘图类型</font></a></font><code dir="auto">plot*()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">中的许多默认颜色相关属性
</font><font style="vertical-align: inherit;">）等。</font></font><a href="/pine-script-docs/language/type-system#drawing-types"><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用内置颜色常量时，可以通过
</font></font><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_color.new"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">color.new()</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
函数向其添加透明度信息。</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">请注意，在</font></font><code dir="auto">color.*()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
函数中指定红色、绿色或蓝色分量时，我们使用值介于 0 到 255 之间的“int”或“float”参数。指定透明度时，我们使用介于 0 到 100 之间的值，其中 0 表示完全不透明，100 表示完全透明。例如：</font></font></p>
<div class="pine-colorizer not-content colorized" data-id="69x"><div class="pine-colorizer__header"><a class="pine-colorizer__title" href="https://tradingview.com/pine-script-docs/en/v5/Introduction.html" target="_blank" rel="noopener"><span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pine Script™</font></font></span></a><button class="pine-colorizer__copy-btn"><div class="pine-colorizer__tooltip"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">已复制</font></font></div></button></div><code class="monaco-editor-tv-pine-light"><span><span class="mtk9">//</span><span class="mtk9 mtkb">@version=</span><span class="mtk9">5</span></span><br><span><span class="mtk16">indicator</span><span class="mtk13">(</span><span class="mtk29">"Shading&nbsp;the&nbsp;chart's&nbsp;background"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">overlay</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk11">true</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;A&nbsp;"const&nbsp;color"&nbsp;value&nbsp;representing&nbsp;the&nbsp;base&nbsp;for&nbsp;e</span><span class="mtk9">ach&nbsp;day's&nbsp;color.&nbsp;</span></span><br><span><span class="mtk18 mtkb">color</span><span class="mtk1">&nbsp;</span><span class="mtk33">BASE_COLOR</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">color.rgb</span><span class="mtk13">(</span><span class="mtk12">0</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">99</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">165</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;A&nbsp;"series&nbsp;int"&nbsp;value&nbsp;that&nbsp;modifies&nbsp;the&nbsp;transparen</span><span class="mtk9">cy&nbsp;of&nbsp;the&nbsp;`BASE_COLOR`&nbsp;in&nbsp;`color.new()`.</span></span><br><span><span class="mtk18 mtkb">int</span><span class="mtk1">&nbsp;</span><span class="mtk33">transparency</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk12">50</span><span class="mtk1">&nbsp;</span><span class="mtk18">+</span><span class="mtk1">&nbsp;</span><span class="mtk16">int</span><span class="mtk13">(</span><span class="mtk12">40</span><span class="mtk1">&nbsp;</span><span class="mtk18">*</span><span class="mtk1">&nbsp;</span><span class="mtk11">dayofweek</span><span class="mtk1">&nbsp;</span><span class="mtk18">/</span><span class="mtk1">&nbsp;</span><span class="mtk12">7</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk9">//&nbsp;Color&nbsp;the&nbsp;background&nbsp;using&nbsp;the&nbsp;modified&nbsp;`BASE_C</span><span class="mtk9">OLOR`.</span></span><br><span><span class="mtk16">bgcolor</span><span class="mtk13">(</span><span class="mtk16">color.new</span><span class="mtk13">(</span><span class="mtk33">BASE_COLOR</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">transparency</span><span class="mtk13">))</span></span><br></code></div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">有关在脚本中使用颜色的更多信息，请参阅用户手册中的</font></font><a href="/pine-script-docs/concepts/colors"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">颜色</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">页面。</font></font></p>
<h3 id="string" class="md-heading"><a href="#string"> <span class="fancy-wrap"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">细绳</font></font><span class="icon icon-link" aria-hidden="true"><svg width="28" height="28" viewBox="0 0 28 28"><g fill="currentColor" clip-path="url(#a)"><path d="M14.908 5.558a5.326 5.326 0 1 1 7.533 7.533l-3.236 3.236-1.061-1.061 3.236-3.236a3.826 3.826 0 1 0-5.411-5.411l-3.236 3.236-1.06-1.06 3.235-3.237ZM5.56 14.907a5.326 5.326 0 0 0 7.532 7.533l3.236-3.236-1.061-1.061-3.236 3.236a3.826 3.826 0 1 1-5.411-5.411l3.236-3.236-1.061-1.06-3.236 3.235Z"></path><path d="m16.346 10.592-5.753 5.753 1.061 1.06 5.753-5.752-1.06-1.06Z"></path></g><defs><clipPath id="a"><path fill="#fff" d="M0 0h28v28H0z"></path></clipPath></defs></svg></span></span></a></h3>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“字符串”类型的值表示字母、数字、符号、空格和其他字符的序列。</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pine 中的字符串文字是用单引号或双引号括起来的字符。例如：</font></font></p>
<div class="pine-colorizer not-content colorized" data-id="1b2"><div class="pine-colorizer__header"><a class="pine-colorizer__title" href="https://tradingview.com/pine-script-docs/en/v5/Introduction.html" target="_blank" rel="noopener"><span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pine Script™</font></font></span></a><button class="pine-colorizer__copy-btn"><div class="pine-colorizer__tooltip"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">已复制</font></font></div></button></div><code class="monaco-editor-tv-pine-light"><span><span class="mtk29">"This&nbsp;is&nbsp;a&nbsp;string&nbsp;literal&nbsp;using&nbsp;double&nbsp;quotes."</span></span><br><span><span class="mtk29">'This&nbsp;is&nbsp;a&nbsp;string&nbsp;literal&nbsp;using&nbsp;single&nbsp;quotes.'</span></span><br></code></div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在 Pine Script™ 中，单引号和双引号功能相同。双引号内的“字符串”可以包含任意数量的单引号，反之亦然：</font></font></p>
<div class="pine-colorizer not-content colorized" data-id="7od"><div class="pine-colorizer__header"><a class="pine-colorizer__title" href="https://tradingview.com/pine-script-docs/en/v5/Introduction.html" target="_blank" rel="noopener"><span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pine Script™</font></font></span></a><button class="pine-colorizer__copy-btn"><div class="pine-colorizer__tooltip"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">已复制</font></font></div></button></div><code class="monaco-editor-tv-pine-light"><span><span class="mtk29">"It's&nbsp;an&nbsp;example"</span></span><br><span><span class="mtk29">'The&nbsp;"Star"&nbsp;indicator'</span></span><br></code></div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">脚本可以使用反斜杠字符 ( )</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">转义</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“字符串”中的分隔符</font></font><code dir="auto">\</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。例如：</font></font></p>
<div class="pine-colorizer not-content colorized" data-id="kb"><div class="pine-colorizer__header"><a class="pine-colorizer__title" href="https://tradingview.com/pine-script-docs/en/v5/Introduction.html" target="_blank" rel="noopener"><span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pine Script™</font></font></span></a><button class="pine-colorizer__copy-btn"><div class="pine-colorizer__tooltip"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">已复制</font></font></div></button></div><code class="monaco-editor-tv-pine-light"><span><span class="mtk29">'It\'s&nbsp;an&nbsp;example'</span></span><br><span><span class="mtk29">"The&nbsp;\"Star\"&nbsp;indicator"</span></span><br></code></div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">我们可以创建包含换行符（ ）的“字符串”值，用于使用</font><font style="vertical-align: inherit;">和</font><a href="/pine-script-docs/language/type-system#drawing-types"><font style="vertical-align: inherit;">绘图类型</font></a><font style="vertical-align: inherit;">
的函数和对象
</font></font><code dir="auto">\n</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">显示多行文本</font><font style="vertical-align: inherit;">。例如：</font></font><code dir="auto">plot*()</code><font style="vertical-align: inherit;"></font><code dir="auto">log.*()</code><font style="vertical-align: inherit;"></font><a href="/pine-script-docs/language/type-system#drawing-types"><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"></font></p>
<div class="pine-colorizer not-content colorized" data-id="1z"><div class="pine-colorizer__header"><a class="pine-colorizer__title" href="https://tradingview.com/pine-script-docs/en/v5/Introduction.html" target="_blank" rel="noopener"><span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pine Script™</font></font></span></a><button class="pine-colorizer__copy-btn"><div class="pine-colorizer__tooltip"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">已复制</font></font></div></button></div><code class="monaco-editor-tv-pine-light"><span><span class="mtk29">"This\nString\nHas\nOne\nWord\nPer\nLine"</span></span><br></code></div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">我们可以使用
</font></font><a href="https://www.tradingview.com/pine-script-reference/v5/#op_+"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">+</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">运算符来连接“字符串”值：</font></font></p>
<div class="pine-colorizer not-content colorized" data-id="5dp"><div class="pine-colorizer__header"><a class="pine-colorizer__title" href="https://tradingview.com/pine-script-docs/en/v5/Introduction.html" target="_blank" rel="noopener"><span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pine Script™</font></font></span></a><button class="pine-colorizer__copy-btn"><div class="pine-colorizer__tooltip"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">已复制</font></font></div></button></div><code class="monaco-editor-tv-pine-light"><span><span class="mtk29">"This&nbsp;is&nbsp;a&nbsp;"</span><span class="mtk1">&nbsp;</span><span class="mtk18">+</span><span class="mtk1">&nbsp;</span><span class="mtk29">"concatenated&nbsp;string."</span></span><br></code></div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">命名空间中的内置函数</font></font><code dir="auto">str.*()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用专门的操作创建“字符串”值。例如，此脚本创建一个</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">格式化的字符串</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">来表示“浮点”价格值，并使用标签显示结果：</font></font></p>
<div class="pine-colorizer not-content colorized" data-id="3vu"><div class="pine-colorizer__header"><a class="pine-colorizer__title" href="https://tradingview.com/pine-script-docs/en/v5/Introduction.html" target="_blank" rel="noopener"><span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pine Script™</font></font></span></a><button class="pine-colorizer__copy-btn"><div class="pine-colorizer__tooltip"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">已复制</font></font></div></button></div><code class="monaco-editor-tv-pine-light"><span><span class="mtk9">//</span><span class="mtk9 mtkb">@version=</span><span class="mtk9">5</span></span><br><span><span class="mtk16">indicator</span><span class="mtk13">(</span><span class="mtk29">"Formatted&nbsp;string&nbsp;demo"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">overlay</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk11">true</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;A&nbsp;"series&nbsp;string"&nbsp;value&nbsp;representing&nbsp;the&nbsp;bar's&nbsp;OH</span><span class="mtk9">LC&nbsp;data.</span></span><br><span><span class="mtk18 mtkb">string</span><span class="mtk1">&nbsp;</span><span class="mtk33">ohlcString</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">str.format</span><span class="mtk13">(</span><span class="mtk29">"Open:&nbsp;{0}\nHigh:&nbsp;{1}\nLow:&nbsp;{2}\nClose:&nbsp;{3}"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk11">open</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk11">high</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk11">low</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk11">close</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk9">//&nbsp;Draw&nbsp;a&nbsp;label&nbsp;containing&nbsp;the&nbsp;`ohlcString`.</span></span><br><span><span class="mtk16">label.new</span><span class="mtk13">(</span><span class="mtk11">bar_index</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk11">high</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">ohlcString</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">textcolor</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk11">color.white</span><span class="mtk13">)</span></span><br></code></div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">有关从脚本显示“字符串”值的更多信息，</font><font style="vertical-align: inherit;">请参阅我们的用户手册中的
</font></font><a href="/pine-script-docs/concepts/text-and-shapes"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">文本和形状页面。</font></font></a><font style="vertical-align: inherit;"></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">内置变量（例如
</font></font><a href="https://www.tradingview.com/pine-script-reference/v5/#var_syminfo.tickerid"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">syminfo.tickerid</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、
 </font></font><a href="https://www.tradingview.com/pine-script-reference/v5/#var_syminfo.currency"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">syminfo.currency</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
</font></font><a href="https://www.tradingview.com/pine-script-reference/v5/#var_timeframe.period"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">timeframe.period）</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
返回“字符串”类型的值。</font></font></p>
<h3 id="plot-and-hline" class="md-heading"><a href="#plot-and-hline"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">绘图和</font></font><span class="fancy-wrap"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">线</font></font><span class="icon icon-link" aria-hidden="true"><svg width="28" height="28" viewBox="0 0 28 28"><g fill="currentColor" clip-path="url(#a)"><path d="M14.908 5.558a5.326 5.326 0 1 1 7.533 7.533l-3.236 3.236-1.061-1.061 3.236-3.236a3.826 3.826 0 1 0-5.411-5.411l-3.236 3.236-1.06-1.06 3.235-3.237ZM5.56 14.907a5.326 5.326 0 0 0 7.532 7.533l3.236-3.236-1.061-1.061-3.236 3.236a3.826 3.826 0 1 1-5.411-5.411l3.236-3.236-1.061-1.06-3.236 3.235Z"></path><path d="m16.346 10.592-5.753 5.753 1.061 1.06 5.753-5.752-1.06-1.06Z"></path></g><defs><clipPath id="a"><path fill="#fff" d="M0 0h28v28H0z"></path></clipPath></defs></svg></span></span></a></h3>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pine Script™ 的
</font></font><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_plot"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">plot()</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
和
</font></font><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_hline"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">hline()</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
函数返回分别引用“plot”和“hline”类型实例的 ID。这些类型在图表上显示计算值和水平线，并且可以将其 ID 分配给变量，以便与内置的
</font></font><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_fill"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">fill()</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
函数一起使用。</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例如，此脚本在图表上绘制两个 EMA，并使用 fill
 </font></font><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_fill"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">()</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
调用填充它们之间的空间：</font></font></p>
<div class="pine-colorizer not-content colorized" data-id="44f"><div class="pine-colorizer__header"><a class="pine-colorizer__title" href="https://tradingview.com/pine-script-docs/en/v5/Introduction.html" target="_blank" rel="noopener"><span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pine Script™</font></font></span></a><button class="pine-colorizer__copy-btn"><div class="pine-colorizer__tooltip"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">已复制</font></font></div></button></div><code class="monaco-editor-tv-pine-light"><span><span class="mtk9">//</span><span class="mtk9 mtkb">@version=</span><span class="mtk9">5</span></span><br><span><span class="mtk16">indicator</span><span class="mtk13">(</span><span class="mtk29">"plot&nbsp;fill&nbsp;demo"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">overlay</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk11">true</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;A&nbsp;"series&nbsp;float"&nbsp;value&nbsp;representing&nbsp;a&nbsp;10-bar&nbsp;EMA&nbsp;</span><span class="mtk9">of&nbsp;`close`.</span></span><br><span><span class="mtk18 mtkb">float</span><span class="mtk1">&nbsp;</span><span class="mtk33">emaFast</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">ta.ema</span><span class="mtk13">(</span><span class="mtk11">close</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">10</span><span class="mtk13">)</span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;A&nbsp;"series&nbsp;float"&nbsp;value&nbsp;representing&nbsp;a&nbsp;20-bar&nbsp;EMA&nbsp;</span><span class="mtk9">of&nbsp;`close`.</span></span><br><span><span class="mtk18 mtkb">float</span><span class="mtk1">&nbsp;</span><span class="mtk33">emaSlow</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">ta.ema</span><span class="mtk13">(</span><span class="mtk11">close</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">20</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;The&nbsp;plot&nbsp;of&nbsp;the&nbsp;`emaFast`&nbsp;value.</span></span><br><span><span class="mtk33">emaFastPlot</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">plot</span><span class="mtk13">(</span><span class="mtk33">emaFast</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"Fast&nbsp;EMA"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk11">color.orange</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">3</span><span class="mtk13">)</span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;The&nbsp;plot&nbsp;of&nbsp;the&nbsp;`emaSlow`&nbsp;value.</span></span><br><span><span class="mtk33">emaSlowPlot</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">plot</span><span class="mtk13">(</span><span class="mtk33">emaSlow</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"Slow&nbsp;EMA"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk11">color.gray</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">3</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk9">//&nbsp;Fill&nbsp;the&nbsp;space&nbsp;between&nbsp;the&nbsp;`emaFastPlot`&nbsp;and&nbsp;`e</span><span class="mtk9">maSlowPlot`.</span></span><br><span><span class="mtk16">fill</span><span class="mtk13">(</span><span class="mtk33">emaFastPlot</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">emaSlowPlot</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk16">color.new</span><span class="mtk13">(</span><span class="mtk11">color.purple</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">50</span><span class="mtk13">)</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"EMA&nbsp;Fill"</span><span class="mtk13">)</span></span><br></code></div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值得注意的是，与其他特殊类型不同，Pine 中没有
</font></font><code dir="auto">plot</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">or</font></font><code dir="auto">hline</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">关键字来明确声明变量的类型为“plot”或“hline”。</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">用户可以通过命名空间中的变量</font></font><code dir="auto">display.*</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><code dir="auto">plot*()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">函数的参数来控制其脚本的绘图显示位置。此外，一个脚本可以</font><font style="vertical-align: inherit;">通过
</font><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_input.source"><font style="vertical-align: inherit;">input.source()</font></a></font><code dir="auto">force_overlay</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">函数
将另一个脚本绘图中的值用作</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">外部输入（请参阅我们的用户手册中有关</font></font></em><font style="vertical-align: inherit;"><a href="/pine-script-docs/concepts/inputs#source-input"><font style="vertical-align: inherit;">源输入</font></a><font style="vertical-align: inherit;">
的部分
</font><font style="vertical-align: inherit;">）。</font></font><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_input.source"><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"></font><a href="/pine-script-docs/concepts/inputs#source-input"><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"></font></p>
<h3 id="drawing-types" class="md-heading"><a href="#drawing-types"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">绘图</font></font><span class="fancy-wrap"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">类型</font></font><span class="icon icon-link" aria-hidden="true"><svg width="28" height="28" viewBox="0 0 28 28"><g fill="currentColor" clip-path="url(#a)"><path d="M14.908 5.558a5.326 5.326 0 1 1 7.533 7.533l-3.236 3.236-1.061-1.061 3.236-3.236a3.826 3.826 0 1 0-5.411-5.411l-3.236 3.236-1.06-1.06 3.235-3.237ZM5.56 14.907a5.326 5.326 0 0 0 7.532 7.533l3.236-3.236-1.061-1.061-3.236 3.236a3.826 3.826 0 1 1-5.411-5.411l3.236-3.236-1.061-1.06-3.236 3.235Z"></path><path d="m16.346 10.592-5.753 5.753 1.061 1.06 5.753-5.752-1.06-1.06Z"></path></g><defs><clipPath id="a"><path fill="#fff" d="M0 0h28v28H0z"></path></clipPath></defs></svg></span></span></a></h3>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pine Script™ 绘图类型允许脚本在图表上创建自定义绘图。它们包括：
</font></font><a href="https://www.tradingview.com/pine-script-reference/v5/#type_line"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">线条</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、
</font></font><a href="https://www.tradingview.com/pine-script-reference/v5/#type_linefill"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">线条填充</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、
</font></font><a href="https://www.tradingview.com/pine-script-reference/v5/#type_box"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">框</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、
</font></font><a href="https://www.tradingview.com/pine-script-reference/v5/#type_polyline"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">折线</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、
</font></font><a href="https://www.tradingview.com/pine-script-reference/v5/#type_label"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">标签</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
</font></font><a href="https://www.tradingview.com/pine-script-reference/v5/#type_table"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表格</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">每种类型还具有一个命名空间，其中包含创建和管理绘图实例的所有内置函数。例如，以下</font></font><code dir="auto">*.new()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
构造函数在脚本中创建这些类型的新对象：
 </font></font><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_line.new"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">line.new()</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、
 </font></font><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_linefill.new"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">linefill.new()</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、
 </font></font><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_box.new"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">box.new()</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、
 </font></font><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_polyline.new"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">polyline.new()</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、
 </font></font><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_label.new"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">label.new()</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
</font></font><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_table.new"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">table.new()</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">这些函数中的每一个都会返回一个</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ID</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，该 ID 是唯一标识绘图对象的引用。ID 始终被限定为“系列”，这意味着它们的限定类型为“系列线”、“系列标签”等。绘图 ID 就像指针一样，因为每个 ID 都引用该绘图命名空间中所有函数中绘图的特定实例。例如，
 </font></font><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_line.new"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">line.new()调用返回的线的 ID 稍后会在使用</font></font></a><font style="vertical-align: inherit;"></font><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_line.delete"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">line.delete()</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
删除它时用于引用该特定对象
</font><font style="vertical-align: inherit;">。</font></font></p>
<h3 id="chart-points" class="md-heading"><a href="#chart-points"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图表</font></font><span class="fancy-wrap"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">要点</font></font><span class="icon icon-link" aria-hidden="true"><svg width="28" height="28" viewBox="0 0 28 28"><g fill="currentColor" clip-path="url(#a)"><path d="M14.908 5.558a5.326 5.326 0 1 1 7.533 7.533l-3.236 3.236-1.061-1.061 3.236-3.236a3.826 3.826 0 1 0-5.411-5.411l-3.236 3.236-1.06-1.06 3.235-3.237ZM5.56 14.907a5.326 5.326 0 0 0 7.532 7.533l3.236-3.236-1.061-1.061-3.236 3.236a3.826 3.826 0 1 1-5.411-5.411l3.236-3.236-1.061-1.06-3.236 3.235Z"></path><path d="m16.346 10.592-5.753 5.753 1.061 1.06 5.753-5.752-1.06-1.06Z"></path></g><defs><clipPath id="a"><path fill="#fff" d="M0 0h28v28H0z"></path></clipPath></defs></svg></span></span></a></h3>
<p><font style="vertical-align: inherit;"></font><a href="https://www.tradingview.com/pine-script-reference/v5/#type_chart.point"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图表点是代表图表上坐标的特殊类型。脚本使用chart.point</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">对象中的信息
来确定</font></font><a href="/pine-script-docs/concepts/lines-and-boxes#lines"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">线条</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、
</font></font><a href="/pine-script-docs/concepts/lines-and-boxes#boxes"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">框</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、
</font></font><a href="/pine-script-docs/concepts/lines-and-boxes#polylines"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">折线</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><a href="/pine-script-docs/concepts/text-and-shapes#labels"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">标签</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
在图表上的位置
</font><font style="vertical-align: inherit;">。</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">此类型的对象包含三个</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">字段</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：</font></font><code dir="auto">time</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、</font></font><code dir="auto">index</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
</font></font><code dir="auto">price</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。绘图实例是否使用</font><a href="https://www.tradingview.com/pine-script-reference/v5/#type_chart.point"><font style="vertical-align: inherit;">chart.point</font></a><font style="vertical-align: inherit;">中的
</font></font><code dir="auto">time</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或字段</font><font style="vertical-align: inherit;">
作为 x 坐标取决于绘图的</font><font style="vertical-align: inherit;">属性。</font></font><code dir="auto">price</code><font style="vertical-align: inherit;"></font><a href="https://www.tradingview.com/pine-script-reference/v5/#type_chart.point"><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"></font><code dir="auto">xloc</code><font style="vertical-align: inherit;"></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">我们可以使用以下任意函数在脚本中创建图表点：</font></font></p>
<ul>
<li><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_chart.point.new"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">chart.point.new()</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> -
</font><font style="vertical-align: inherit;">
使用指定的</font><font style="vertical-align: inherit;">、</font><font style="vertical-align: inherit;">和创建一个新的</font></font><a href="https://www.tradingview.com/pine-script-reference/v5/#type_chart.point"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">chart.point</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><code dir="auto">time</code><font style="vertical-align: inherit;"></font><code dir="auto">index</code><font style="vertical-align: inherit;"></font><code dir="auto">price</code><font style="vertical-align: inherit;"></font></li>
<li><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_chart.point.now"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">chart.point.now()</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - 创建
具有指定</font><font style="vertical-align: inherit;">y 坐标的</font><font style="vertical-align: inherit;">新
</font></font><a href="https://www.tradingview.com/pine-script-reference/v5/#type_chart.point"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">chart.point</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 。和</font><font style="vertical-align: inherit;">字段包含
</font><font style="vertical-align: inherit;">
函数执行的条形图的</font><a href="https://www.tradingview.com/pine-script-reference/v5/#var_time"><font style="vertical-align: inherit;">时间</font></a><font style="vertical-align: inherit;">
和
</font><a href="https://www.tradingview.com/pine-script-reference/v5/#var_bar_index"><font style="vertical-align: inherit;">bar_index 。</font></a></font><code dir="auto">price</code><font style="vertical-align: inherit;"></font><code dir="auto">time</code><font style="vertical-align: inherit;"></font><code dir="auto">index</code><font style="vertical-align: inherit;"></font><a href="https://www.tradingview.com/pine-script-reference/v5/#var_time"><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"></font><a href="https://www.tradingview.com/pine-script-reference/v5/#var_bar_index"><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"></font></li>
<li><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_chart.point.from_index"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">chart.point_from_index()</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - 创建一个
具有</font><font style="vertical-align: inherit;">x 坐标和</font><font style="vertical-align: inherit;">y 坐标的</font><font style="vertical-align: inherit;">新
</font></font><a href="https://www.tradingview.com/pine-script-reference/v5/#type_chart.point"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">chart.point</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 。
结果实例的字段为
</font><a href="https://www.tradingview.com/pine-script-reference/v5/#var_na"><font style="vertical-align: inherit;">na</font></a><font style="vertical-align: inherit;">，这意味着它不适用于使用</font><a href="https://www.tradingview.com/pine-script-reference/v5/#var_xloc.bar_time"><font style="vertical-align: inherit;">xloc.bar_time</font></a><font style="vertical-align: inherit;">
值的
绘图对象</font><font style="vertical-align: inherit;">。</font></font><code dir="auto">index</code><font style="vertical-align: inherit;"></font><code dir="auto">price</code><font style="vertical-align: inherit;"></font><code dir="auto">time</code><font style="vertical-align: inherit;"></font><a href="https://www.tradingview.com/pine-script-reference/v5/#var_na"><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"></font><code dir="auto">xloc</code><font style="vertical-align: inherit;"></font><a href="https://www.tradingview.com/pine-script-reference/v5/#var_xloc.bar_time"><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"></font></li>
<li><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_chart.point.from_time"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">chart.point.from_time()</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - 创建一个
具有</font><font style="vertical-align: inherit;">x 坐标和</font><font style="vertical-align: inherit;">y 坐标的</font><font style="vertical-align: inherit;">新
</font></font><a href="https://www.tradingview.com/pine-script-reference/v5/#type_chart.point"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">chart.point</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 。
结果实例的字段为
</font><a href="https://www.tradingview.com/pine-script-reference/v5/#var_na"><font style="vertical-align: inherit;">na</font></a><font style="vertical-align: inherit;">，这意味着它不适用于使用</font><a href="https://www.tradingview.com/pine-script-reference/v5/#var_xloc.bar_index"><font style="vertical-align: inherit;">xloc.bar_index</font></a><font style="vertical-align: inherit;">
值的
绘图对象</font><font style="vertical-align: inherit;">。</font></font><code dir="auto">time</code><font style="vertical-align: inherit;"></font><code dir="auto">price</code><font style="vertical-align: inherit;"></font><code dir="auto">index</code><font style="vertical-align: inherit;"></font><a href="https://www.tradingview.com/pine-script-reference/v5/#var_na"><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"></font><code dir="auto">xloc</code><font style="vertical-align: inherit;"></font><a href="https://www.tradingview.com/pine-script-reference/v5/#var_xloc.bar_index"><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"></font></li>
<li><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_chart.point.copy"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">chart.point.copy()</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - 创建一个新的
</font></font><a href="https://www.tradingview.com/pine-script-reference/v5/#type_chart.point"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">chart.point，</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">其中包含与函数调用中的</font><font style="vertical-align: inherit;">
相同的</font></font><code dir="auto">time</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、</font></font><code dir="auto">index</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><code dir="auto">price</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">信息
。</font></font><code dir="auto">id</code><font style="vertical-align: inherit;"></font></li>
</ul>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">此示例在每个图表条上绘制连接前一个条的
</font></font><a href="https://www.tradingview.com/pine-script-reference/v5/#var_high"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">最高点</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
和当前条的
</font></font><a href="https://www.tradingview.com/pine-script-reference/v5/#var_low"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">最低点</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">的线。它还在每条线的两个点处显示标签。线和标签从和</font></font><code dir="auto">firstPoint</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">变量
获取信息，这些变量引用使用</font><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_chart.point.from_index"><font style="vertical-align: inherit;">chart.point_from_index()</font></a><font style="vertical-align: inherit;">
和
</font><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_chart.point.now"><font style="vertical-align: inherit;">chart.point.now()</font></a></font><code dir="auto">secondPoint</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">创建的图表点
</font><font style="vertical-align: inherit;">：</font></font><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_chart.point.from_index"><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"></font><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_chart.point.now"><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"></font></p>
<div class="pine-colorizer not-content colorized" data-id="441"><div class="pine-colorizer__header"><a class="pine-colorizer__title" href="https://tradingview.com/pine-script-docs/en/v5/Introduction.html" target="_blank" rel="noopener"><span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pine Script™</font></font></span></a><button class="pine-colorizer__copy-btn"><div class="pine-colorizer__tooltip"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">已复制</font></font></div></button></div><code class="monaco-editor-tv-pine-light"><span><span class="mtk9">//</span><span class="mtk9 mtkb">@version=</span><span class="mtk9">5</span></span><br><span><span class="mtk16">indicator</span><span class="mtk13">(</span><span class="mtk29">"Chart&nbsp;points&nbsp;demo"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">overlay</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk11">true</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;A&nbsp;new&nbsp;`chart.point`&nbsp;at&nbsp;the&nbsp;previous&nbsp;`bar_index`&nbsp;a</span><span class="mtk9">nd&nbsp;`high`.</span></span><br><span><span class="mtk33">firstPoint</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">chart.point.from_index</span><span class="mtk13">(</span><span class="mtk11">bar_index</span><span class="mtk1">&nbsp;</span><span class="mtk18">-</span><span class="mtk1">&nbsp;</span><span class="mtk12">1</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk11">high</span><span class="mtk13">[</span><span class="mtk12">1</span><span class="mtk13">])</span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;A&nbsp;new&nbsp;`chart.point`&nbsp;at&nbsp;the&nbsp;current&nbsp;bar's&nbsp;`low`.</span></span><br><span><span class="mtk33">secondPoint</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">chart.point.now</span><span class="mtk13">(</span><span class="mtk11">low</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk9">//&nbsp;Draw&nbsp;a&nbsp;new&nbsp;line&nbsp;connecting&nbsp;coordinates&nbsp;from&nbsp;the</span><span class="mtk9">&nbsp;`firstPoint`&nbsp;and&nbsp;`secondPoint`.</span></span><br><span><span class="mtk9">//&nbsp;This&nbsp;line&nbsp;uses&nbsp;the&nbsp;`index`&nbsp;fields&nbsp;from&nbsp;the&nbsp;poin</span><span class="mtk9">ts&nbsp;as&nbsp;x-coordinates.</span></span><br><span><span class="mtk16">line.new</span><span class="mtk13">(</span><span class="mtk33">firstPoint</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">secondPoint</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">color</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk11">color.purple</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">width</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk12">3</span><span class="mtk13">)</span></span><br><span><span class="mtk9">//&nbsp;Draw&nbsp;a&nbsp;label&nbsp;at&nbsp;the&nbsp;`firstPoint`.&nbsp;Uses&nbsp;the&nbsp;poin</span><span class="mtk9">t's&nbsp;`index`&nbsp;field&nbsp;as&nbsp;its&nbsp;x-coordinate.</span></span><br><span><span class="mtk16">label.new</span><span class="mtk13">(</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk33">firstPoint</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk16">str.tostring</span><span class="mtk13">(</span><span class="mtk33">firstPoint</span><span class="mtk1">.</span><span class="mtk33">price</span><span class="mtk13">)</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">color</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk11">color.green</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk33">style</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk11">label.style_label_down</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">textcolor</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk11">color.white</span></span><br><span><span class="mtk1">&nbsp;</span><span class="mtk13">)</span></span><br><span><span class="mtk9">//&nbsp;Draw&nbsp;a&nbsp;label&nbsp;at&nbsp;the&nbsp;`secondPoint`.&nbsp;Uses&nbsp;the&nbsp;poi</span><span class="mtk9">nt's&nbsp;`index`&nbsp;field&nbsp;as&nbsp;its&nbsp;x-coordinate.</span></span><br><span><span class="mtk16">label.new</span><span class="mtk13">(</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk33">secondPoint</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk16">str.tostring</span><span class="mtk13">(</span><span class="mtk33">secondPoint</span><span class="mtk1">.</span><span class="mtk33">price</span><span class="mtk13">)</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">color</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk11">color.red</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk33">style</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk11">label.style_label_up</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">textcolor</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk11">color.white</span></span><br><span><span class="mtk1">&nbsp;</span><span class="mtk13">)</span></span><br></code></div>
<h3 id="collections" class="md-heading"><a href="#collections"> <span class="fancy-wrap"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">收藏</font></font><span class="icon icon-link" aria-hidden="true"><svg width="28" height="28" viewBox="0 0 28 28"><g fill="currentColor" clip-path="url(#a)"><path d="M14.908 5.558a5.326 5.326 0 1 1 7.533 7.533l-3.236 3.236-1.061-1.061 3.236-3.236a3.826 3.826 0 1 0-5.411-5.411l-3.236 3.236-1.06-1.06 3.235-3.237ZM5.56 14.907a5.326 5.326 0 0 0 7.532 7.533l3.236-3.236-1.061-1.061-3.236 3.236a3.826 3.826 0 1 1-5.411-5.411l3.236-3.236-1.061-1.06-3.236 3.235Z"></path><path d="m16.346 10.592-5.753 5.753 1.061 1.06 5.753-5.752-1.06-1.06Z"></path></g><defs><clipPath id="a"><path fill="#fff" d="M0 0h28v28H0z"></path></clipPath></defs></svg></span></span></a></h3>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pine Script™ 中的集合（</font></font><a href="/pine-script-docs/language/arrays/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">数组</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、</font></font><a href="/pine-script-docs/language/matrices/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">矩阵</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><a href="/pine-script-docs/language/maps/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">映射</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）使用引用 ID，与其他特殊类型（例如标签）非常相似。ID 的类型定义了集合将包含的</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">元素类型。在 Pine 中，我们通过将</font></font></em><font style="vertical-align: inherit;"></font><a href="/pine-script-docs/language/type-system#type-templates"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">类型模板</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">附加到
</font></font><a href="https://www.tradingview.com/pine-script-reference/v5/#type_array"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">数组</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、矩阵或</font><a href="https://www.tradingview.com/pine-script-reference/v5/#type_map"><font style="vertical-align: inherit;">映射</font></a><font style="vertical-align: inherit;">关键字来指定数组、
</font><font style="vertical-align: inherit;">矩阵
</font></font><a href="https://www.tradingview.com/pine-script-reference/v5/#type_matrix"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">映射类型
：</font></font><a href="https://www.tradingview.com/pine-script-reference/v5/#type_map"><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"></font></p>
<ul>
<li><code dir="auto">array&lt;int&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">定义一个包含“int”元素的数组。</font></font></li>
<li><code dir="auto">array&lt;label&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">定义一个包含“标签”ID 的数组。</font></font></li>
<li><code dir="auto">array&lt;UDT&gt;</code><font style="vertical-align: inherit;"></font><a href="/pine-script-docs/language/type-system#user-defined-types"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">定义一个包含引用用户定义类型 (UDT)</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">对象的 ID 的数组
</font><font style="vertical-align: inherit;">。</font></font></li>
<li><code dir="auto">matrix&lt;float&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">定义一个包含“浮点”元素的矩阵。</font></font></li>
<li><code dir="auto">matrix&lt;UDT&gt;</code><font style="vertical-align: inherit;"></font><a href="/pine-script-docs/language/type-system#user-defined-types"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">定义一个矩阵，其中包含引用用户定义类型 (UDT)</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">对象的 ID
 </font><font style="vertical-align: inherit;">。</font></font></li>
<li><code dir="auto">map&lt;string, float&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">定义一个包含“字符串”键和“浮点数”值的映射。</font></font></li>
<li><code dir="auto">map&lt;int, UDT&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">定义一个包含“int”键和
</font></font><a href="/pine-script-docs/language/type-system#user-defined-types"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">用户定义类型（UDT）</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">实例的 ID 作为值的映射。</font></font></li>
</ul>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例如，可以通过以下任一等效方式声明一个单个元素值为 10 的“int”数组：</font></font></p>
<div class="pine-colorizer not-content colorized" data-id="2ma"><div class="pine-colorizer__header"><a class="pine-colorizer__title" href="https://tradingview.com/pine-script-docs/en/v5/Introduction.html" target="_blank" rel="noopener"><span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pine Script™</font></font></span></a><button class="pine-colorizer__copy-btn"><div class="pine-colorizer__tooltip"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">已复制</font></font></div></button></div><code class="monaco-editor-tv-pine-light"><span><span class="mtk33">a1</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">array.new</span><span class="mtk13">&lt;</span><span class="mtk18 mtkb">int</span><span class="mtk13">&gt;(</span><span class="mtk12">1</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">10</span><span class="mtk13">)</span></span><br><span><span class="mtk18 mtkb">array</span><span class="mtk13">&lt;</span><span class="mtk18 mtkb">int</span><span class="mtk13">&gt;</span><span class="mtk1">&nbsp;</span><span class="mtk33">a2</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">array.new</span><span class="mtk13">&lt;</span><span class="mtk18 mtkb">int</span><span class="mtk13">&gt;(</span><span class="mtk12">1</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">10</span><span class="mtk13">)</span></span><br><span><span class="mtk33">a3</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">array.from</span><span class="mtk13">(</span><span class="mtk12">10</span><span class="mtk13">)</span></span><br><span><span class="mtk18 mtkb">array</span><span class="mtk13">&lt;</span><span class="mtk18 mtkb">int</span><span class="mtk13">&gt;</span><span class="mtk1">&nbsp;</span><span class="mtk33">a4</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">array.from</span><span class="mtk13">(</span><span class="mtk12">10</span><span class="mtk13">)</span></span><br></code></div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">注意：</font></font></p>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">该</font></font><code dir="auto">int[]</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">语法还可以指定“int”元素的数组，但不鼓励使用。没有等效的方法来以这种方式指定矩阵或映射的类型。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">数组存在特定类型的内置函数，例如
</font></font><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_array%7Bdot%7Dnew_int"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">array.new_int()</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，但更通用的</font></font><a href="https://www.tradingview.com/pine-script-reference/v5/#type_array"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">array.new&lt;type&gt;</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
形式更受欢迎，它将</font></font><code dir="auto">array.new&lt;int&gt;()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">创建一个“int”元素的数组。</font></font></li>
</ul>
<h3 id="user-defined-types" class="md-heading"><a href="#user-defined-types"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">用户定义</font></font><span class="fancy-wrap"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">类型</font></font><span class="icon icon-link" aria-hidden="true"><svg width="28" height="28" viewBox="0 0 28 28"><g fill="currentColor" clip-path="url(#a)"><path d="M14.908 5.558a5.326 5.326 0 1 1 7.533 7.533l-3.236 3.236-1.061-1.061 3.236-3.236a3.826 3.826 0 1 0-5.411-5.411l-3.236 3.236-1.06-1.06 3.235-3.237ZM5.56 14.907a5.326 5.326 0 0 0 7.532 7.533l3.236-3.236-1.061-1.061-3.236 3.236a3.826 3.826 0 1 1-5.411-5.411l3.236-3.236-1.061-1.06-3.236 3.235Z"></path><path d="m16.346 10.592-5.753 5.753 1.061 1.06 5.753-5.752-1.06-1.06Z"></path></g><defs><clipPath id="a"><path fill="#fff" d="M0 0h28v28H0z"></path></clipPath></defs></svg></span></span></a></h3>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">type
</font><font style="vertical-align: inherit;">
关键字允许创建</font><em><font style="vertical-align: inherit;">用户定义类型(UDT) </font></em></font><a href="https://www.tradingview.com/pine-script-reference/v5/#kw_type"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">脚本可以从中创建</font><a href="/pine-script-docs/language/objects"><font style="vertical-align: inherit;">对象</font></a><font style="vertical-align: inherit;">。UDT 是复合类型；它们包含任意数量的</font><em><font style="vertical-align: inherit;">字段</font></em><font style="vertical-align: inherit;">，这些字段可以是任何类型的字段，包括其他用户定义类型。</font></font><em><font style="vertical-align: inherit;"></font></em><font style="vertical-align: inherit;"></font><a href="/pine-script-docs/language/objects"><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"></font><em><font style="vertical-align: inherit;"></font></em><font style="vertical-align: inherit;"></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">声明用户定义类型的语法是：</font></font></p>
<div class="expressive-code not-content"><link rel="stylesheet" href="/pine-script-docs/_astro/ec.dtidy.css"><script type="module" src="/pine-script-docs/_astro/ec.8gcug.js" data-astro-exec=""></script><figure class="frame"><figcaption class="header"></figcaption><pre data-language="text"><code><div class="ec-line"><div class="code"><span style="--0:#e1e4e8;--1:#24292e">[export ]type &lt;UDT_identifier&gt;</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#e1e4e8;--1:#24292e">    </span></span><span style="--0:#e1e4e8;--1:#24292e">&lt;field_type&gt; &lt;field_name&gt;[ = &lt;value&gt;]</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#e1e4e8;--1:#24292e">    </span></span><span style="--0:#e1e4e8;--1:#24292e">...</span></div></div></code></pre></figure></div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在哪里：</font></font></p>
<ul>
<li><a href="https://www.tradingview.com/pine-script-reference/v5/#kw_export"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">export是</font></font></a><font style="vertical-align: inherit;"></font><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_library"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">库</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
脚本用来导出用户定义类型
</font><font style="vertical-align: inherit;">
的关键字
。要了解有关导出 UDT 的更多信息，请参阅我们的用户手册的</font></font><a href="/pine-script-docs/concepts/libraries#objects"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">库</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
页面。</font></font></li>
<li><code dir="auto">&lt;UDT_identifier&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是用户定义类型的名称。</font></font></li>
<li><code dir="auto">&lt;field_type&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是字段的类型。</font></font></li>
<li><code dir="auto">&lt;field_name&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是字段的名称。</font></font></li>
<li><code dir="auto">&lt;value&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是字段的可选默认值，脚本将在创建该 UDT 的新对象时将其分配给该字段。如果没有提供值，则字段的默认值为
</font></font><a href="https://www.tradingview.com/pine-script-reference/v5/#var_na"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">na 。与控制函数签名中参数默认值的规则相同的规则也适用于字段的默认值。例如，UDT 的默认值不能使用历史引用运算符</font></font></a><font style="vertical-align: inherit;"></font><a href="https://www.tradingview.com/pine-script-reference/v5/#op_%5B%5D"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[]</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或表达式的结果
</font><font style="vertical-align: inherit;">
。</font></font></li>
</ul>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">此示例声明了一个</font></font><code dir="auto">pivotPoint</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">带有“int”</font></font><code dir="auto">pivotTime</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
字段和“float”</font></font><code dir="auto">priceLevel</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">字段的 UDT，它们分别保存有关计算枢轴的时间和价格信息：</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">//@type 包含枢轴信息的用户定义类型。 //@field pivotTime 包含有关枢轴的时间信息。 //@field priceLevel 包含有关枢轴的价格信息。 type pivotPoint int pivotTime float priceLevel</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">用户定义类型支持</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">类型递归</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，即 UDT 的字段可以引用同一 UDT 的对象。在这里，我们</font></font><code dir="auto">nextPivot</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
在先前的</font></font><code dir="auto">pivotPoint</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">类型中添加了一个引用另一个
</font></font><code dir="auto">pivotPoint</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">实例的字段：</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">//@type 包含枢轴信息的用户定义类型。 //@field pivotTime 包含有关枢轴的时间信息。 //@field priceLevel 包含有关枢轴的价格信息。 //@field nextPivot</font></font><code dir="auto">pivotPoint</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">包含其他枢轴信息的实例。 type pivotPoint int pivotTime float priceLevel pivotPoint nextPivot</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">脚本可以使用两种内置方法来创建和复制 UDT：</font></font><code dir="auto">new()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
和</font></font><code dir="auto">copy()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。请参阅我们的用户手册中的
</font></font><a href="/pine-script-docs/language/objects"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">对象</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">页面，了解有关使用 UDT 的更多信息。</font></font></p>
<h3 id="enum-types" class="md-heading"><a href="#enum-types"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">枚举</font></font><span class="fancy-wrap"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">类型</font></font><span class="icon icon-link" aria-hidden="true"><svg width="28" height="28" viewBox="0 0 28 28"><g fill="currentColor" clip-path="url(#a)"><path d="M14.908 5.558a5.326 5.326 0 1 1 7.533 7.533l-3.236 3.236-1.061-1.061 3.236-3.236a3.826 3.826 0 1 0-5.411-5.411l-3.236 3.236-1.06-1.06 3.235-3.237ZM5.56 14.907a5.326 5.326 0 0 0 7.532 7.533l3.236-3.236-1.061-1.061-3.236 3.236a3.826 3.826 0 1 1-5.411-5.411l3.236-3.236-1.061-1.06-3.236 3.235Z"></path><path d="m16.346 10.592-5.753 5.753 1.061 1.06 5.753-5.752-1.06-1.06Z"></path></g><defs><clipPath id="a"><path fill="#fff" d="M0 0h28v28H0z"></path></clipPath></defs></svg></span></span></a></h3>
<p><font style="vertical-align: inherit;"></font><a href="https://www.tradingview.com/pine-script-reference/v5/#kw_enum"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">enum</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">关键字</font><font style="vertical-align: inherit;">允许创建</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">枚举</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，也称为</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">枚举</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">枚举类型</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">枚举类型</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。枚举是一种独特的类型构造，包含表示该类型</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">成员（即可能的值）的不同命名字段。枚举允许程序员控制变量、条件表达式和</font></font></em><font style="vertical-align: inherit;"></font><a href="/pine-script-docs/language/type-system#collections"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">集合</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">接受的值，并且它们有助于使用</font><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_input.enum"><font style="vertical-align: inherit;">input.enum()</font></a><font style="vertical-align: inherit;">函数方便地</font><font style="vertical-align: inherit;">创建下拉</font></font><a href="/pine-script-docs/concepts/inputs#enum-input"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">输入</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_input.enum"><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">声明枚举的语法如下：</font></font></p>
<div class="expressive-code not-content"><figure class="frame"><figcaption class="header"></figcaption><pre data-language="text"><code><div class="ec-line"><div class="code"><span style="--0:#e1e4e8;--1:#24292e">[export ]enum &lt;enumName&gt;</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#e1e4e8;--1:#24292e">    </span></span><span style="--0:#e1e4e8;--1:#24292e">&lt;field_1&gt;[ = &lt;title_1&gt;]</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#e1e4e8;--1:#24292e">    </span></span><span style="--0:#e1e4e8;--1:#24292e">&lt;field_2&gt;[ = &lt;title_2&gt;]</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#e1e4e8;--1:#24292e">    </span></span><span style="--0:#e1e4e8;--1:#24292e">...</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#e1e4e8;--1:#24292e">    </span></span><span style="--0:#e1e4e8;--1:#24292e">&lt;field_N&gt;[ = &lt;title_N&gt;]</span></div></div></code></pre></figure></div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在哪里：</font></font></p>
<ul>
<li><a href="https://www.tradingview.com/pine-script-reference/v5/#kw_export"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">export</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
是可选关键字，允许
</font></font><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_library"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">库</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
导出枚举以供其他脚本使用。请参阅
</font></font><a href="/pine-script-docs/concepts/libraries#enum-types"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">本节</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">以了解有关导出枚举类型的更多信息。</font></font></li>
<li><code dir="auto">&lt;enumName&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是枚举类型的名称。脚本可以在
</font></font><a href="/pine-script-docs/language/variable-declarations/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">变量声明</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
</font></font><a href="/pine-script-docs/language/type-system#type-templates"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">类型模板</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">中将枚举的名称用作类型关键字。</font></font></li>
<li><code dir="auto">&lt;field_*&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是枚举字段的名称，表示类型的命名成员（值） 。每个字段必须具有唯一名称，且该名称不与枚举中任何其他字段的名称或标题匹配。要检索枚举成员，请使用点符号语法（即</font><font style="vertical-align: inherit;">）</font></font><code dir="auto">enumName</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">引用其字段名称。</font></font><code dir="auto">enumName.fieldName</code><font style="vertical-align: inherit;"></font></li>
<li><code dir="auto">&lt;title_*&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是分配给字段的“常量字符串”标题。如果没有指定标题，则字段的标题是其名称的“字符串”表示。input.enum
 </font></font><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_input.enum"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">()</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
函数在脚本的“设置/输入”选项卡中的下拉列表中显示字段标题。用户还可以使用
</font></font><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_str.tostring"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">str.tostring()</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
函数检索字段的标题。与字段名称一样，每个字段的标题不得与枚举中任何其他字段的名称或标题匹配。</font></font></li>
</ul>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">此示例声明了一个</font></font><code dir="auto">maChoice</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">枚举。此声明中的每个字段代表枚举类型的不同成员</font></font><code dir="auto">maChoice</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：</font></font></p>
<div class="pine-colorizer not-content colorized" data-id="7jj"><div class="pine-colorizer__header"><a class="pine-colorizer__title" href="https://tradingview.com/pine-script-docs/en/v5/Introduction.html" target="_blank" rel="noopener"><span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pine Script™</font></font></span></a><button class="pine-colorizer__copy-btn"><div class="pine-colorizer__tooltip"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">已复制</font></font></div></button></div><code class="monaco-editor-tv-pine-light"><span><span class="mtk9">//</span><span class="mtk9 mtkb">@enum</span><span class="mtk9">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;An&nbsp;enumeration&nbsp;of&nbsp;named&nbsp;values&nbsp;for&nbsp;moving&nbsp;a</span><span class="mtk9">verage&nbsp;selection.</span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@field</span><span class="mtk9">&nbsp;sma&nbsp;&nbsp;Selects&nbsp;a&nbsp;Simple&nbsp;Moving&nbsp;Average.</span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@field</span><span class="mtk9">&nbsp;ema&nbsp;&nbsp;Selects&nbsp;an&nbsp;Exponential&nbsp;Moving&nbsp;Average.</span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@field</span><span class="mtk9">&nbsp;wma&nbsp;&nbsp;Selects&nbsp;a&nbsp;Weighted&nbsp;Moving&nbsp;Average.</span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@field</span><span class="mtk9">&nbsp;hma&nbsp;&nbsp;Selects&nbsp;a&nbsp;Hull&nbsp;Moving&nbsp;Average.</span></span><br><span><span class="mtk33">enum</span><span class="mtk1">&nbsp;</span><span class="mtk33">maChoice</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk33">sma</span><span class="mtk1">&nbsp;&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk29">"Simple&nbsp;Moving&nbsp;Average"</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk33">ema</span><span class="mtk1">&nbsp;&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk29">"Exponential&nbsp;Moving&nbsp;Average"</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk33">wma</span><span class="mtk1">&nbsp;&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk29">"Weighted&nbsp;Moving&nbsp;Average"</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk33">hma</span><span class="mtk1">&nbsp;&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk29">"Hull&nbsp;Moving&nbsp;Average"</span></span><br></code></div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">注意：</font></font></p>
<ul>
<li><font style="vertical-align: inherit;"></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">枚举的所有可能值在第一次</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">执行脚本时可用</font><font style="vertical-align: inherit;">
，并且在后续执行中不会改变。因此，它们自动采用
</font></font><a href="/pine-script-docs/language/type-system#simple"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">简单</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">限定符。</font></font></li>
</ul>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">下面的脚本使用</font><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_input.enum"><font style="vertical-align: inherit;">input.enum()</font></a></font><code dir="auto">maChoice</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">调用中的枚举
</font><font style="vertical-align: inherit;">在“设置/输入”选项卡中</font><font style="vertical-align: inherit;">
创建一个</font><em><font style="vertical-align: inherit;">下拉输入，该输入显示所有字段标题。该值表示与用户选择的标题相对应的枚举成员。该脚本使用</font></em><a href="https://www.tradingview.com/pine-script-reference/v5/#kw_switch"><font style="vertical-align: inherit;">switch</font></a><font style="vertical-align: inherit;">结构中的选定成员
</font><font style="vertical-align: inherit;">
来确定它计算的内置移动平均值：</font></font><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_input.enum"><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"></font><em><font style="vertical-align: inherit;"></font></em><font style="vertical-align: inherit;"></font><code dir="auto">maInput</code><font style="vertical-align: inherit;"></font><a href="https://www.tradingview.com/pine-script-reference/v5/#kw_switch"><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"></font></p>
<div class="pine-colorizer not-content colorized" data-id="5yn"><div class="pine-colorizer__header"><a class="pine-colorizer__title" href="https://tradingview.com/pine-script-docs/en/v5/Introduction.html" target="_blank" rel="noopener"><span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pine Script™</font></font></span></a><button class="pine-colorizer__copy-btn"><div class="pine-colorizer__tooltip"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">已复制</font></font></div></button></div><code class="monaco-editor-tv-pine-light"><span><span class="mtk9">//</span><span class="mtk9 mtkb">@version=</span><span class="mtk9">5</span></span><br><span><span class="mtk16">indicator</span><span class="mtk13">(</span><span class="mtk29">"Enum&nbsp;types&nbsp;demo"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">overlay</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk11">true</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@enum</span><span class="mtk9">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;An&nbsp;enumeration&nbsp;of&nbsp;named&nbsp;values&nbsp;for&nbsp;moving&nbsp;a</span><span class="mtk9">verage&nbsp;selection.</span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@field</span><span class="mtk9">&nbsp;sma&nbsp;&nbsp;Selects&nbsp;a&nbsp;Simple&nbsp;Moving&nbsp;Average.</span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@field</span><span class="mtk9">&nbsp;ema&nbsp;&nbsp;Selects&nbsp;an&nbsp;Exponential&nbsp;Moving&nbsp;Average.</span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@field</span><span class="mtk9">&nbsp;wma&nbsp;&nbsp;Selects&nbsp;a&nbsp;Weighted&nbsp;Moving&nbsp;Average.</span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@field</span><span class="mtk9">&nbsp;hma&nbsp;&nbsp;Selects&nbsp;a&nbsp;Hull&nbsp;Moving&nbsp;Average.</span></span><br><span><span class="mtk33">enum</span><span class="mtk1">&nbsp;</span><span class="mtk33">maChoice</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk33">sma</span><span class="mtk1">&nbsp;&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk29">"Simple&nbsp;Moving&nbsp;Average"</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk33">ema</span><span class="mtk1">&nbsp;&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk29">"Exponential&nbsp;Moving&nbsp;Average"</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk33">wma</span><span class="mtk1">&nbsp;&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk29">"Weighted&nbsp;Moving&nbsp;Average"</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk33">hma</span><span class="mtk1">&nbsp;&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk29">"Hull&nbsp;Moving&nbsp;Average"</span></span><br><span><span></span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;The&nbsp;`maChoice`&nbsp;member&nbsp;representing&nbsp;a&nbsp;selected&nbsp;mov</span><span class="mtk9">ing&nbsp;average&nbsp;name.</span></span><br><span><span class="mtk18 mtkb">maChoice</span><span class="mtk1">&nbsp;</span><span class="mtk33">maInput</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk33">input</span><span class="mtk1">.</span><span class="mtk15">enum</span><span class="mtk13">(</span><span class="mtk33">maChoice</span><span class="mtk1">.</span><span class="mtk33">sma</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"Moving&nbsp;average&nbsp;type"</span><span class="mtk13">)</span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;The&nbsp;length&nbsp;of&nbsp;the&nbsp;moving&nbsp;average.</span></span><br><span><span class="mtk18 mtkb">int</span><span class="mtk1">&nbsp;</span><span class="mtk33">lengthInput</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">input.int</span><span class="mtk13">(</span><span class="mtk12">20</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"Length"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">1</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">4999</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;The&nbsp;moving&nbsp;average&nbsp;selected&nbsp;by&nbsp;the&nbsp;`maInput`.&nbsp;</span></span><br><span><span class="mtk18 mtkb">float</span><span class="mtk1">&nbsp;</span><span class="mtk33">selectedMA</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk18">switch</span><span class="mtk1">&nbsp;</span><span class="mtk33">maInput</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk33">maChoice</span><span class="mtk1">.</span><span class="mtk33">sma</span><span class="mtk1">&nbsp;</span><span class="mtk18">=&gt;</span><span class="mtk1">&nbsp;</span><span class="mtk16">ta.sma</span><span class="mtk13">(</span><span class="mtk11">close</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">lengthInput</span><span class="mtk13">)</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk33">maChoice</span><span class="mtk1">.</span><span class="mtk33">ema</span><span class="mtk1">&nbsp;</span><span class="mtk18">=&gt;</span><span class="mtk1">&nbsp;</span><span class="mtk16">ta.ema</span><span class="mtk13">(</span><span class="mtk11">close</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">lengthInput</span><span class="mtk13">)</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk33">maChoice</span><span class="mtk1">.</span><span class="mtk33">wma</span><span class="mtk1">&nbsp;</span><span class="mtk18">=&gt;</span><span class="mtk1">&nbsp;</span><span class="mtk16">ta.wma</span><span class="mtk13">(</span><span class="mtk11">close</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">lengthInput</span><span class="mtk13">)</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk33">maChoice</span><span class="mtk1">.</span><span class="mtk33">hma</span><span class="mtk1">&nbsp;</span><span class="mtk18">=&gt;</span><span class="mtk1">&nbsp;</span><span class="mtk16">ta.hma</span><span class="mtk13">(</span><span class="mtk11">close</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">lengthInput</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk9">//&nbsp;Plot&nbsp;the&nbsp;`selectedMA`.</span></span><br><span><span class="mtk16">plot</span><span class="mtk13">(</span><span class="mtk33">selectedMA</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"Selected&nbsp;moving&nbsp;average"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk11">color.teal</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">3</span><span class="mtk13">)</span></span><br></code></div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">请参阅</font></font><a href="/pine-script-docs/language/enums/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">枚举</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">页面和
</font><a href="/pine-script-docs/concepts/inputs"><font style="vertical-align: inherit;">输入</font></a><font style="vertical-align: inherit;">页面的</font></font><a href="/pine-script-docs/concepts/inputs#enum-input"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">枚举输入</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">部分以了解有关使用枚举和枚举输入的更多信息。</font></font><a href="/pine-script-docs/concepts/inputs"><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"></font></p>
<h3 id="void" class="md-heading"><a href="#void"> <span class="fancy-wrap"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">空白</font></font><span class="icon icon-link" aria-hidden="true"><svg width="28" height="28" viewBox="0 0 28 28"><g fill="currentColor" clip-path="url(#a)"><path d="M14.908 5.558a5.326 5.326 0 1 1 7.533 7.533l-3.236 3.236-1.061-1.061 3.236-3.236a3.826 3.826 0 1 0-5.411-5.411l-3.236 3.236-1.06-1.06 3.235-3.237ZM5.56 14.907a5.326 5.326 0 0 0 7.532 7.533l3.236-3.236-1.061-1.061-3.236 3.236a3.826 3.826 0 1 1-5.411-5.411l3.236-3.236-1.061-1.06-3.236 3.235Z"></path><path d="m16.346 10.592-5.753 5.753 1.061 1.06 5.753-5.752-1.06-1.06Z"></path></g><defs><clipPath id="a"><path fill="#fff" d="M0 0h28v28H0z"></path></clipPath></defs></svg></span></span></a></h3>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pine Script™ 中有一个“void”类型。只有副作用且不返回可用结果的函数返回“void”类型。此类函数的一个示例是
</font></font><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_alert"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">alert()</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">；它执行某些操作（触发警报事件），但不返回可用值。</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">脚本不能在表达式中使用“void”结果或将其分配给变量。Pine </font></font><code dir="auto">void</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Script™ 中不存在关键字，因为无法声明“void”类型的变量。</font></font></p>
<h2 id="na-value" class="md-heading"><a href="#na-value"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">`na`</font></font><span class="fancy-wrap"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值</font></font><span class="icon icon-link" aria-hidden="true"><svg width="28" height="28" viewBox="0 0 28 28"><g fill="currentColor" clip-path="url(#a)"><path d="M14.908 5.558a5.326 5.326 0 1 1 7.533 7.533l-3.236 3.236-1.061-1.061 3.236-3.236a3.826 3.826 0 1 0-5.411-5.411l-3.236 3.236-1.06-1.06 3.235-3.237ZM5.56 14.907a5.326 5.326 0 0 0 7.532 7.533l3.236-3.236-1.061-1.061-3.236 3.236a3.826 3.826 0 1 1-5.411-5.411l3.236-3.236-1.061-1.06-3.236 3.235Z"></path><path d="m16.346 10.592-5.753 5.753 1.061 1.06 5.753-5.752-1.06-1.06Z"></path></g><defs><clipPath id="a"><path fill="#fff" d="M0 0h28v28H0z"></path></clipPath></defs></svg></span></span></a></h2>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pine Script™ 中有一个特殊值，称为
</font></font><a href="https://www.tradingview.com/pine-script-reference/v5/#var_na"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">na ，它是</font></font></a><font style="vertical-align: inherit;"></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">not available</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">的首字母缩写</font><font style="vertical-align: inherit;">。我们使用
</font></font><a href="https://www.tradingview.com/pine-script-reference/v5/#var_na"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">na</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">来表示变量或表达式中未定义的值。它与</font></font><code dir="auto">null</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Java 和</font></font><code dir="auto">None</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Python 中的类似。</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">脚本可以自动将
</font></font><a href="https://www.tradingview.com/pine-script-reference/v5/#var_na"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">na值转换为几乎任何类型。但是，在某些情况下，编译器无法推断与</font></font></a><font style="vertical-align: inherit;"></font><a href="https://www.tradingview.com/pine-script-reference/v5/#var_na"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">na</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值
关联的类型，
</font><font style="vertical-align: inherit;">因为可能适用多条类型转换规则。例如：</font></font></p>
<div class="pine-colorizer not-content colorized" data-id="5jp"><div class="pine-colorizer__header"><a class="pine-colorizer__title" href="https://tradingview.com/pine-script-docs/en/v5/Introduction.html" target="_blank" rel="noopener"><span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pine Script™</font></font></span></a><button class="pine-colorizer__copy-btn"><div class="pine-colorizer__tooltip"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">已复制</font></font></div></button></div><code class="monaco-editor-tv-pine-light"><span><span class="mtk9">//&nbsp;Compilation&nbsp;error!</span></span><br><span><span class="mtk33">myVar</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk11">na</span></span><br></code></div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">上面这行代码会导致编译错误，因为编译器无法确定</font></font><code dir="auto">myVar</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">变量的性质，即该变量是否引用用于绘图的数值、用于在标签中设置文本的字符串值，还是在脚本稍后执行时用于其他目的的其他值。</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">为了解决此类错误，我们必须明确声明与变量关联的类型。假设变量将在后续脚本迭代中引用“float”值。我们可以通过使用</font><a href="https://www.tradingview.com/pine-script-reference/v5/#type_float"><font style="vertical-align: inherit;">float</font></a></font><code dir="auto">myVar</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">关键字声明变量来解决错误
</font><font style="vertical-align: inherit;">
：</font></font><a href="https://www.tradingview.com/pine-script-reference/v5/#type_float"><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"></font></p>
<div class="pine-colorizer not-content colorized" data-id="58i"><div class="pine-colorizer__header"><a class="pine-colorizer__title" href="https://tradingview.com/pine-script-docs/en/v5/Introduction.html" target="_blank" rel="noopener"><span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pine Script™</font></font></span></a><button class="pine-colorizer__copy-btn"><div class="pine-colorizer__tooltip"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">已复制</font></font></div></button></div><code class="monaco-editor-tv-pine-light"><span><span class="mtk18 mtkb">float</span><span class="mtk1">&nbsp;</span><span class="mtk33">myVar</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk11">na</span></span><br></code></div>
<p><font style="vertical-align: inherit;"><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_float"><font style="vertical-align: inherit;">或者通过float()</font></a><font style="vertical-align: inherit;">函数明确将
</font></font><a href="https://www.tradingview.com/pine-script-reference/v5/#var_na"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">na</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值转换为“float”类型
</font><font style="vertical-align: inherit;">
：</font></font><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_float"><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"></font></p>
<div class="pine-colorizer not-content colorized" data-id="1kj"><div class="pine-colorizer__header"><a class="pine-colorizer__title" href="https://tradingview.com/pine-script-docs/en/v5/Introduction.html" target="_blank" rel="noopener"><span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pine Script™</font></font></span></a><button class="pine-colorizer__copy-btn"><div class="pine-colorizer__tooltip"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">已复制</font></font></div></button></div><code class="monaco-editor-tv-pine-light"><span><span class="mtk33">myVar</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">float</span><span class="mtk13">(</span><span class="mtk11">na</span><span class="mtk13">)</span></span><br></code></div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">要测试变量或表达式的值是否为
</font></font><a href="https://www.tradingview.com/pine-script-reference/v5/#var_na"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">na</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，我们调用
</font></font><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_na"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">na()</font></font></a><font style="vertical-align: inherit;"></font><code dir="auto">true</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">函数，如果值未定义，则</font><font style="vertical-align: inherit;">
返回该函数。例如：</font></font></p>
<div class="pine-colorizer not-content colorized" data-id="74a"><div class="pine-colorizer__header"><a class="pine-colorizer__title" href="https://tradingview.com/pine-script-docs/en/v5/Introduction.html" target="_blank" rel="noopener"><span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pine Script™</font></font></span></a><button class="pine-colorizer__copy-btn"><div class="pine-colorizer__tooltip"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">已复制</font></font></div></button></div><code class="monaco-editor-tv-pine-light"><span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;Is&nbsp;0&nbsp;if&nbsp;the&nbsp;`myVar`&nbsp;is&nbsp;`na`,&nbsp;`close`&nbsp;otherwise.</span></span><br><span><span class="mtk18 mtkb">float</span><span class="mtk1">&nbsp;</span><span class="mtk33">myClose</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">na</span><span class="mtk13">(</span><span class="mtk33">myVar</span><span class="mtk13">)</span><span class="mtk1">&nbsp;</span><span class="mtk18">?</span><span class="mtk1">&nbsp;</span><span class="mtk12">0</span><span class="mtk1">&nbsp;</span><span class="mtk18">:</span><span class="mtk1">&nbsp;</span><span class="mtk11">close</span></span><br></code></div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">不要使用</font></font><code dir="auto">==</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">比较运算符来测试
</font></font><a href="https://www.tradingview.com/pine-script-reference/v5/#var_na"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">na</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
值，因为脚本无法确定未定义值是否相等：</font></font></p>
<div class="pine-colorizer not-content colorized" data-id="3hh"><div class="pine-colorizer__header"><a class="pine-colorizer__title" href="https://tradingview.com/pine-script-docs/en/v5/Introduction.html" target="_blank" rel="noopener"><span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pine Script™</font></font></span></a><button class="pine-colorizer__copy-btn"><div class="pine-colorizer__tooltip"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">已复制</font></font></div></button></div><code class="monaco-editor-tv-pine-light"><span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;Returns&nbsp;the&nbsp;`close`&nbsp;value.&nbsp;The&nbsp;script&nbsp;cannot&nbsp;comp</span><span class="mtk9">are&nbsp;the&nbsp;equality&nbsp;of&nbsp;`na`&nbsp;values,&nbsp;as&nbsp;they're&nbsp;undefi</span><span class="mtk9">ned.</span></span><br><span><span class="mtk18 mtkb">float</span><span class="mtk1">&nbsp;</span><span class="mtk33">myClose</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk33">myVar</span><span class="mtk1">&nbsp;</span><span class="mtk18">==</span><span class="mtk1">&nbsp;</span><span class="mtk11">na</span><span class="mtk1">&nbsp;</span><span class="mtk18">?</span><span class="mtk1">&nbsp;</span><span class="mtk12">0</span><span class="mtk1">&nbsp;</span><span class="mtk18">:</span><span class="mtk1">&nbsp;</span><span class="mtk11">close</span></span><br></code></div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">最佳编码实践通常涉及处理
</font></font><a href="https://www.tradingview.com/pine-script-reference/v5/#var_na"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">na</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
值以防止计算中出现未定义的值。</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例如，这行代码检查
当前条的</font></font><a href="https://www.tradingview.com/pine-script-reference/v5/#var_close"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">收盘</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
价是否大于前一条的收盘价：</font></font></p>
<div class="pine-colorizer not-content colorized" data-id="2gd"><div class="pine-colorizer__header"><a class="pine-colorizer__title" href="https://tradingview.com/pine-script-docs/en/v5/Introduction.html" target="_blank" rel="noopener"><span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pine Script™</font></font></span></a><button class="pine-colorizer__copy-btn"><div class="pine-colorizer__tooltip"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">已复制</font></font></div></button></div><code class="monaco-editor-tv-pine-light"><span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;Is&nbsp;`true`&nbsp;when&nbsp;the&nbsp;`close`&nbsp;exceeds&nbsp;the&nbsp;last&nbsp;bar's</span><span class="mtk9">&nbsp;`close`,&nbsp;`false`&nbsp;otherwise.</span></span><br><span><span class="mtk18 mtkb">bool</span><span class="mtk1">&nbsp;</span><span class="mtk33">risingClose</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk11">close</span><span class="mtk1">&nbsp;</span><span class="mtk18">&gt;</span><span class="mtk1">&nbsp;</span><span class="mtk11">close</span><span class="mtk13">[</span><span class="mtk12">1</span><span class="mtk13">]</span></span><br></code></div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在第一个图表条上，的值为</font></font><code dir="auto">risingClose</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">na
 </font></font><a href="https://www.tradingview.com/pine-script-reference/v5/#var_na"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">因为没有过去的
</font></font><a href="https://www.tradingview.com/pine-script-reference/v5/#var_close"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">收盘</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
值可供参考。</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">我们可以确保表达式在第一个柱上也返回可操作的值，方法是用当前柱的值替换未定义的过去值。
</font><font style="vertical-align: inherit;">
当值为
</font><a href="https://www.tradingview.com/pine-script-reference/v5/#var_na"><font style="vertical-align: inherit;">na时，此行代码使用</font></a></font><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_nz"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">nz()函数将过去柱的</font></font></a><font style="vertical-align: inherit;"></font><a href="https://www.tradingview.com/pine-script-reference/v5/#var_close"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">收盘</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">价
替换
</font><font style="vertical-align: inherit;">
为当前柱的
</font></font><a href="https://www.tradingview.com/pine-script-reference/v5/#var_open"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">开盘价</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：</font></font><a href="https://www.tradingview.com/pine-script-reference/v5/#var_na"><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"></font></p>
<div class="pine-colorizer not-content colorized" data-id="592"><div class="pine-colorizer__header"><a class="pine-colorizer__title" href="https://tradingview.com/pine-script-docs/en/v5/Introduction.html" target="_blank" rel="noopener"><span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pine Script™</font></font></span></a><button class="pine-colorizer__copy-btn"><div class="pine-colorizer__tooltip"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">已复制</font></font></div></button></div><code class="monaco-editor-tv-pine-light"><span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;Is&nbsp;`true`&nbsp;when&nbsp;the&nbsp;`close`&nbsp;exceeds&nbsp;the&nbsp;last&nbsp;bar's</span><span class="mtk9">&nbsp;`close`&nbsp;(or&nbsp;the&nbsp;current&nbsp;`open`&nbsp;if&nbsp;the&nbsp;value&nbsp;is&nbsp;`n</span><span class="mtk9">a`).</span></span><br><span><span class="mtk18 mtkb">bool</span><span class="mtk1">&nbsp;</span><span class="mtk33">risingClose</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk11">close</span><span class="mtk1">&nbsp;</span><span class="mtk18">&gt;</span><span class="mtk1">&nbsp;</span><span class="mtk16">nz</span><span class="mtk13">(</span><span class="mtk11">close</span><span class="mtk13">[</span><span class="mtk12">1</span><span class="mtk13">]</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk11">open</span><span class="mtk13">)</span></span><br></code></div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">保护脚本免受
</font></font><a href="https://www.tradingview.com/pine-script-reference/v5/#var_na"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">na</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
实例的影响有助于防止未定义的值在计算结果中传播。例如，此脚本
</font></font><code dir="auto">allTimeHigh</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在第一个条形图上声明一个变量。然后，它使用
</font></font><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_math.max"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">math.max()</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
在</font></font><code dir="auto">allTimeHigh</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和条形图的
</font></font><a href="https://www.tradingview.com/pine-script-reference/v5/#var_high"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">最高点</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">之间
更新</font></font><code dir="auto">allTimeHigh</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">整个执行过程：</font></font></p>
<div class="pine-colorizer not-content colorized" data-id="1wp"><div class="pine-colorizer__header"><a class="pine-colorizer__title" href="https://tradingview.com/pine-script-docs/en/v5/Introduction.html" target="_blank" rel="noopener"><span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pine Script™</font></font></span></a><button class="pine-colorizer__copy-btn"><div class="pine-colorizer__tooltip"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">已复制</font></font></div></button></div><code class="monaco-editor-tv-pine-light"><span><span class="mtk9">//</span><span class="mtk9 mtkb">@version=</span><span class="mtk9">5</span></span><br><span><span class="mtk16">indicator</span><span class="mtk13">(</span><span class="mtk29">"na&nbsp;protection&nbsp;demo"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">overlay</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk11">true</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;The&nbsp;result&nbsp;of&nbsp;calculating&nbsp;the&nbsp;all-time&nbsp;high&nbsp;price</span><span class="mtk9">&nbsp;with&nbsp;an&nbsp;initial&nbsp;value&nbsp;of&nbsp;`na`.</span></span><br><span><span class="mtk18">var</span><span class="mtk1">&nbsp;</span><span class="mtk18 mtkb">float</span><span class="mtk1">&nbsp;</span><span class="mtk33">allTimeHigh</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk11">na</span></span><br><span><span></span></span><br><span><span class="mtk9">//&nbsp;Reassign&nbsp;the&nbsp;value&nbsp;of&nbsp;the&nbsp;`allTimeHigh`.</span></span><br><span><span class="mtk9">//&nbsp;Returns&nbsp;`na`&nbsp;on&nbsp;all&nbsp;bars&nbsp;because&nbsp;`math.max()`&nbsp;c</span><span class="mtk9">an't&nbsp;compare&nbsp;the&nbsp;`high`&nbsp;to&nbsp;an&nbsp;undefined&nbsp;value.</span></span><br><span><span class="mtk33">allTimeHigh</span><span class="mtk1">&nbsp;</span><span class="mtk18">:=</span><span class="mtk1">&nbsp;</span><span class="mtk16">math.max</span><span class="mtk13">(</span><span class="mtk33">allTimeHigh</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk11">high</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk16">plot</span><span class="mtk13">(</span><span class="mtk33">allTimeHigh</span><span class="mtk13">)</span><span class="mtk1">&nbsp;</span><span class="mtk9">//&nbsp;Plots&nbsp;`na`&nbsp;on&nbsp;all&nbsp;bars.</span></span><br></code></div>
<p><font style="vertical-align: inherit;"></font><a href="https://www.tradingview.com/pine-script-reference/v5/#var_na"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">此脚本在所有条形上绘制na</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值
</font><font style="vertical-align: inherit;">，因为我们未在代码中包含任何
</font></font><a href="https://www.tradingview.com/pine-script-reference/v5/#var_na"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">na</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
保护。为了修复此行为并绘制预期结果（即图表价格的历史最高点），我们可以使用
</font></font><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_nz"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">nz()</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">替换
系列中的</font></font><a href="https://www.tradingview.com/pine-script-reference/v5/#var_na"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">na</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
值</font></font><code dir="auto">allTimeHigh</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：</font></font></p>
<div class="pine-colorizer not-content colorized" data-id="3r6"><div class="pine-colorizer__header"><a class="pine-colorizer__title" href="https://tradingview.com/pine-script-docs/en/v5/Introduction.html" target="_blank" rel="noopener"><span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pine Script™</font></font></span></a><button class="pine-colorizer__copy-btn"><div class="pine-colorizer__tooltip"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">已复制</font></font></div></button></div><code class="monaco-editor-tv-pine-light"><span><span class="mtk9">//</span><span class="mtk9 mtkb">@version=</span><span class="mtk9">5</span></span><br><span><span class="mtk16">indicator</span><span class="mtk13">(</span><span class="mtk29">"na&nbsp;protection&nbsp;demo"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">overlay</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk11">true</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;The&nbsp;result&nbsp;of&nbsp;calculating&nbsp;the&nbsp;all-time&nbsp;high&nbsp;price</span><span class="mtk9">&nbsp;with&nbsp;an&nbsp;initial&nbsp;value&nbsp;of&nbsp;`na`.</span></span><br><span><span class="mtk18">var</span><span class="mtk1">&nbsp;</span><span class="mtk18 mtkb">float</span><span class="mtk1">&nbsp;</span><span class="mtk33">allTimeHigh</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk11">na</span></span><br><span><span></span></span><br><span><span class="mtk9">//&nbsp;Reassign&nbsp;the&nbsp;value&nbsp;of&nbsp;the&nbsp;`allTimeHigh`.</span></span><br><span><span class="mtk9">//&nbsp;We've&nbsp;used&nbsp;`nz()`&nbsp;to&nbsp;prevent&nbsp;the&nbsp;initial&nbsp;`na`&nbsp;v</span><span class="mtk9">alue&nbsp;from&nbsp;persisting&nbsp;throughout&nbsp;the&nbsp;calculation.</span></span><br><span><span class="mtk33">allTimeHigh</span><span class="mtk1">&nbsp;</span><span class="mtk18">:=</span><span class="mtk1">&nbsp;</span><span class="mtk16">math.max</span><span class="mtk13">(</span><span class="mtk16">nz</span><span class="mtk13">(</span><span class="mtk33">allTimeHigh</span><span class="mtk13">)</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk11">high</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk16">plot</span><span class="mtk13">(</span><span class="mtk33">allTimeHigh</span><span class="mtk13">)</span></span><br></code></div>
<h2 id="type-templates" class="md-heading"><a href="#type-templates"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">类型</font></font><span class="fancy-wrap"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">模板</font></font><span class="icon icon-link" aria-hidden="true"><svg width="28" height="28" viewBox="0 0 28 28"><g fill="currentColor" clip-path="url(#a)"><path d="M14.908 5.558a5.326 5.326 0 1 1 7.533 7.533l-3.236 3.236-1.061-1.061 3.236-3.236a3.826 3.826 0 1 0-5.411-5.411l-3.236 3.236-1.06-1.06 3.235-3.237ZM5.56 14.907a5.326 5.326 0 0 0 7.532 7.533l3.236-3.236-1.061-1.061-3.236 3.236a3.826 3.826 0 1 1-5.411-5.411l3.236-3.236-1.061-1.06-3.236 3.235Z"></path><path d="m16.346 10.592-5.753 5.753 1.061 1.06 5.753-5.752-1.06-1.06Z"></path></g><defs><clipPath id="a"><path fill="#fff" d="M0 0h28v28H0z"></path></clipPath></defs></svg></span></span></a></h2>
<p><font style="vertical-align: inherit;"></font><a href="/pine-script-docs/language/arrays"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">类型模板指定集合（数组</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、
</font></font><a href="/pine-script-docs/language/matrices"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">矩阵</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
</font></font><a href="/pine-script-docs/language/maps"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">映射</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）可以包含的数据类型</font><font style="vertical-align: inherit;">。</font></font></p>
<p><font style="vertical-align: inherit;"></font><a href="/pine-script-docs/language/arrays"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">数组</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
</font></font><a href="/pine-script-docs/language/matrices"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">矩阵</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">的模板</font><font style="vertical-align: inherit;">由一个用尖括号括起来的类型标识符组成，例如</font></font><code dir="auto">&lt;int&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，，
</font></font><code dir="auto">&lt;label&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><code dir="auto">&lt;PivotPoint&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（其中</font></font><code dir="auto">PivotPoint</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是
</font></font><a href="/pine-script-docs/language/type-system#user-defined-types"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">用户定义类型 (UDT)</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）。</font></font></p>
<p><font style="vertical-align: inherit;"></font><a href="/pine-script-docs/language/maps/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">映射</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">模板由两个用尖括号括起来的类型标识符组成，第一个标识符指定</font><font style="vertical-align: inherit;">每个键值对中键的类型，第二个标识符指定</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">的</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">类型</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。例如，是用于保存</font><font style="vertical-align: inherit;">键和值的</font></font><code dir="auto">&lt;string, float&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">映射的类型模板</font><font style="vertical-align: inherit;">。</font></font><code dir="auto">string</code><font style="vertical-align: inherit;"></font><code dir="auto">float</code><font style="vertical-align: inherit;"></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">用户可以从以下位置构建类型模板：</font></font></p>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">基本类型：
 </font></font><a href="/pine-script-docs/language/type-system#int"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">int</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、
 </font></font><a href="/pine-script-docs/language/type-system#float"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">float</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、
 </font></font><a href="/pine-script-docs/language/type-system#bool"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">bool</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、
 </font></font><a href="/pine-script-docs/language/type-system#color"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">color</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><a href="/pine-script-docs/language/type-system#string"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">string</font></font></a></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">以下特殊类型：
 </font></font><a href="/pine-script-docs/language/type-system#drawing-types"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">line</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、
 </font></font><a href="/pine-script-docs/language/type-system#drawing-types"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">linefill</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、
 </font></font><a href="/pine-script-docs/language/type-system#drawing-types"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">box</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、
 </font></font><a href="/pine-script-docs/language/type-system#drawing-types"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">polyline</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、
 </font></font><a href="/pine-script-docs/language/type-system#drawing-types"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">label</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、
 </font></font><a href="/pine-script-docs/language/type-system#drawing-types"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">table</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
</font></font><a href="/pine-script-docs/language/type-system#chart-points"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">chart.point</font></font></a></li>
<li><a href="/pine-script-docs/language/type-system#user-defined-types"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">用户定义类型 (UDT)</font></font></a></li>
<li><a href="/pine-script-docs/language/type-system#enum-types"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">枚举类型</font></font></a></li>
</ul>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">注意：</font></font></p>
<ul>
<li><a href="/pine-script-docs/language/maps"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">映射</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可以使用任何这些类型作为</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，但它们只能接受基本类型或</font></font><a href="/pine-script-docs/language/type-system#enum-types"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">枚举类型</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">作为</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">键</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></li>
</ul>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">脚本使用类型模板来声明引用集合的变量，以及创建新集合实例时使用的类型模板。例如：</font></font></p>
<div class="pine-colorizer not-content colorized" data-id="207"><div class="pine-colorizer__header"><a class="pine-colorizer__title" href="https://tradingview.com/pine-script-docs/en/v5/Introduction.html" target="_blank" rel="noopener"><span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pine Script™</font></font></span></a><button class="pine-colorizer__copy-btn"><div class="pine-colorizer__tooltip"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">已复制</font></font></div></button></div><code class="monaco-editor-tv-pine-light"><span><span class="mtk9">//</span><span class="mtk9 mtkb">@version=</span><span class="mtk9">5</span></span><br><span><span class="mtk16">indicator</span><span class="mtk13">(</span><span class="mtk29">"Type&nbsp;templates&nbsp;demo"</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;A&nbsp;variable&nbsp;initially&nbsp;assigned&nbsp;to&nbsp;`na`&nbsp;that&nbsp;accept</span><span class="mtk9">s&nbsp;arrays&nbsp;of&nbsp;"int"&nbsp;values.</span></span><br><span><span class="mtk18 mtkb">array</span><span class="mtk13">&lt;</span><span class="mtk18 mtkb">int</span><span class="mtk13">&gt;</span><span class="mtk1">&nbsp;</span><span class="mtk33">intArray</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk11">na</span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;An&nbsp;empty&nbsp;matrix&nbsp;that&nbsp;holds&nbsp;"float"&nbsp;values.</span></span><br><span><span class="mtk33">floatMatrix</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">matrix.new</span><span class="mtk13">&lt;</span><span class="mtk18 mtkb">float</span><span class="mtk13">&gt;()</span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;An&nbsp;empty&nbsp;map&nbsp;that&nbsp;holds&nbsp;"string"&nbsp;keys&nbsp;and&nbsp;"color"</span><span class="mtk9">&nbsp;values.</span></span><br><span><span class="mtk33">stringColorMap</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">map.new</span><span class="mtk13">&lt;</span><span class="mtk18 mtkb">string</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk18 mtkb">color</span><span class="mtk13">&gt;()</span></span><br></code></div>
<h2 id="type-casting" class="md-heading"><a href="#type-casting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">类型</font></font><span class="fancy-wrap"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">转换</font></font><span class="icon icon-link" aria-hidden="true"><svg width="28" height="28" viewBox="0 0 28 28"><g fill="currentColor" clip-path="url(#a)"><path d="M14.908 5.558a5.326 5.326 0 1 1 7.533 7.533l-3.236 3.236-1.061-1.061 3.236-3.236a3.826 3.826 0 1 0-5.411-5.411l-3.236 3.236-1.06-1.06 3.235-3.237ZM5.56 14.907a5.326 5.326 0 0 0 7.532 7.533l3.236-3.236-1.061-1.061-3.236 3.236a3.826 3.826 0 1 1-5.411-5.411l3.236-3.236-1.061-1.06-3.236 3.235Z"></path><path d="m16.346 10.592-5.753 5.753 1.061 1.06 5.753-5.752-1.06-1.06Z"></path></g><defs><clipPath id="a"><path fill="#fff" d="M0 0h28v28H0z"></path></clipPath></defs></svg></span></span></a></h2>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pine Script™ 包含自动类型转换机制，可在必要时将</font><strong><font style="vertical-align: inherit;">“int”值</font></strong></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">转换</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
（转换）</font><font style="vertical-align: inherit;">为</font><strong><font style="vertical-align: inherit;">“float”</font></strong><font style="vertical-align: inherit;">。需要“float”值的变量或表达式也可以使用“int”值，因为任何整数都可以表示为小数部分等于 0 的浮点数。</font></font><strong><font style="vertical-align: inherit;"></font></strong><font style="vertical-align: inherit;"></font><strong><font style="vertical-align: inherit;"></font></strong><font style="vertical-align: inherit;"></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">为了向后兼容，Pine Script™ 还会在必要时自动将</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“int”</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“float”</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值转换为</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“bool”</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。当将数值传递给需要“bool”类型的函数和操作的参数时，Pine 会自动将它们转换为“bool”。但是，我们不建议依赖此行为。大多数将数值自动转换为“bool”类型的脚本都会产生</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">编译器警告。可以使用</font></font></em><font style="vertical-align: inherit;"></font><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_bool"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">bool()</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">函数避免编译器警告并提高代码的可读性
</font><font style="vertical-align: inherit;">
，该函数明确将数值转换为“bool”类型。</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">将“int”或“float”转换为“bool”时，值 0 将转换为</font></font><code dir="auto">false</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，而任何其他数值始终将转换为</font></font><code dir="auto">true</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">以下代码演示了 Pine 中已弃用的自动转换行为。它</font></font><code dir="auto">randomValue</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在每个条形上创建一个具有“series float”值的变量，并将其传递给</font><a href="https://www.tradingview.com/pine-script-reference/v5/#kw_if"><font style="vertical-align: inherit;">if</font></a></font><code dir="auto">condition</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">结构中的参数
</font><font style="vertical-align: inherit;">
和</font><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_plotchar"><font style="vertical-align: inherit;">plotchar()</font></a><font style="vertical-align: inherit;">函数调用中的参数
</font><font style="vertical-align: inherit;">
。由于两个参数都接受“bool”值，因此脚本</font><font style="vertical-align: inherit;">在评估它们时会自动将其转换为“bool”：</font></font><a href="https://www.tradingview.com/pine-script-reference/v5/#kw_if"><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"></font><code dir="auto">series</code><font style="vertical-align: inherit;"></font><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_plotchar"><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"></font><code dir="auto">randomValue</code><font style="vertical-align: inherit;"></font></p>
<div class="pine-colorizer not-content colorized" data-id="3kb"><div class="pine-colorizer__header"><a class="pine-colorizer__title" href="https://tradingview.com/pine-script-docs/en/v5/Introduction.html" target="_blank" rel="noopener"><span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pine Script™</font></font></span></a><button class="pine-colorizer__copy-btn"><div class="pine-colorizer__tooltip"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">已复制</font></font></div></button></div><code class="monaco-editor-tv-pine-light"><span><span class="mtk9">//</span><span class="mtk9 mtkb">@version=</span><span class="mtk9">5</span></span><br><span><span class="mtk16">indicator</span><span class="mtk13">(</span><span class="mtk29">"Auto-casting&nbsp;demo"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">overlay</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk11">true</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;A&nbsp;random&nbsp;rounded&nbsp;value&nbsp;between&nbsp;-1&nbsp;and&nbsp;1.</span></span><br><span><span class="mtk18 mtkb">float</span><span class="mtk1">&nbsp;</span><span class="mtk33">randomValue</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">math.round</span><span class="mtk13">(</span><span class="mtk16">math.random</span><span class="mtk13">(</span><span class="mtk12">-1</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">1</span><span class="mtk13">))</span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;The&nbsp;color&nbsp;of&nbsp;the&nbsp;chart&nbsp;background.</span></span><br><span><span class="mtk18 mtkb">color</span><span class="mtk1">&nbsp;</span><span class="mtk33">bgColor</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk11">na</span></span><br><span><span></span></span><br><span><span class="mtk9">//&nbsp;This&nbsp;raises&nbsp;a&nbsp;compiler&nbsp;warning&nbsp;since&nbsp;`randomVal</span><span class="mtk9">ue`&nbsp;is&nbsp;a&nbsp;"float",&nbsp;but&nbsp;`if`&nbsp;expects&nbsp;a&nbsp;"bool".</span></span><br><span><span class="mtk18">if</span><span class="mtk1">&nbsp;</span><span class="mtk33">randomValue</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk33">bgColor</span><span class="mtk1">&nbsp;</span><span class="mtk18">:=</span><span class="mtk1">&nbsp;</span><span class="mtk16">color.new</span><span class="mtk13">(</span><span class="mtk11">color.blue</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">60</span><span class="mtk13">)</span></span><br><span><span class="mtk9">//&nbsp;This&nbsp;does&nbsp;not&nbsp;raise&nbsp;a&nbsp;warning,&nbsp;as&nbsp;the&nbsp;`bool()`&nbsp;</span><span class="mtk9">function&nbsp;explicitly&nbsp;casts&nbsp;the&nbsp;`randomValue`&nbsp;to&nbsp;"bo</span><span class="mtk9">ol".</span></span><br><span><span class="mtk18">if</span><span class="mtk1">&nbsp;</span><span class="mtk16">bool</span><span class="mtk13">(</span><span class="mtk33">randomValue</span><span class="mtk13">)</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk33">bgColor</span><span class="mtk1">&nbsp;</span><span class="mtk18">:=</span><span class="mtk1">&nbsp;</span><span class="mtk16">color.new</span><span class="mtk13">(</span><span class="mtk11">color.blue</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">60</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk9">//&nbsp;Display&nbsp;unicode&nbsp;characters&nbsp;on&nbsp;the&nbsp;chart&nbsp;based&nbsp;o</span><span class="mtk9">n&nbsp;the&nbsp;`randomValue`.</span></span><br><span><span class="mtk9">//&nbsp;Whenever&nbsp;`math.random()`&nbsp;returns&nbsp;0,&nbsp;no&nbsp;characte</span><span class="mtk9">r&nbsp;will&nbsp;appear&nbsp;on&nbsp;the&nbsp;chart&nbsp;because&nbsp;0&nbsp;converts&nbsp;to&nbsp;`</span><span class="mtk9">false`.</span></span><br><span><span class="mtk16">plotchar</span><span class="mtk13">(</span><span class="mtk33">randomValue</span><span class="mtk13">)</span></span><br><span><span class="mtk9">//&nbsp;We&nbsp;recommend&nbsp;explicitly&nbsp;casting&nbsp;the&nbsp;number&nbsp;with</span><span class="mtk9">&nbsp;the&nbsp;`bool()`&nbsp;function&nbsp;to&nbsp;make&nbsp;the&nbsp;type&nbsp;transforma</span><span class="mtk9">tion&nbsp;more&nbsp;obvious.</span></span><br><span><span class="mtk16">plotchar</span><span class="mtk13">(</span><span class="mtk16">bool</span><span class="mtk13">(</span><span class="mtk33">randomValue</span><span class="mtk13">))</span></span><br><span><span></span></span><br><span><span class="mtk9">//&nbsp;Highlight&nbsp;the&nbsp;background&nbsp;with&nbsp;the&nbsp;`bgColor`.</span></span><br><span><span class="mtk16">bgcolor</span><span class="mtk13">(</span><span class="mtk33">bgColor</span><span class="mtk13">)</span></span><br></code></div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">当自动转换规则无法满足要求时，有时需要将一种类型转换为另一种类型。对于这种情况，可以使用以下类型转换函数：
 </font></font><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_int"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">int()</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、
 </font></font><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_float"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">float()</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、
 </font></font><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_bool"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">bool()</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、
 </font></font><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_color"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">color()</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、
 </font></font><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_string"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">string()</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、
 </font></font><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_line"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">line()</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、
 </font></font><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_linefill"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">linefill()</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、
 </font></font><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_label"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">label()</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、
 </font></font><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_box"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">box()</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
</font></font><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_table"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">table()</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">下面的示例显示了一段代码，该代码尝试使用“const float”值作为</font><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_ta.sma"><font style="vertical-align: inherit;">ta.sma()</font></a></font><code dir="auto">length</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">函数调用中的参数
</font><font style="vertical-align: inherit;">
。该脚本将无法编译，因为它无法自动将“float”值转换为所需的“int”类型：</font></font><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_ta.sma"><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"></font></p>
<div class="pine-colorizer not-content colorized" data-id="79"><div class="pine-colorizer__header"><a class="pine-colorizer__title" href="https://tradingview.com/pine-script-docs/en/v5/Introduction.html" target="_blank" rel="noopener"><span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pine Script™</font></font></span></a><button class="pine-colorizer__copy-btn"><div class="pine-colorizer__tooltip"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">已复制</font></font></div></button></div><code class="monaco-editor-tv-pine-light"><span><span class="mtk9">//</span><span class="mtk9 mtkb">@version=</span><span class="mtk9">5</span></span><br><span><span class="mtk16">indicator</span><span class="mtk13">(</span><span class="mtk29">"Explicit&nbsp;casting&nbsp;demo"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">overlay</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk11">true</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;The&nbsp;length&nbsp;of&nbsp;the&nbsp;SMA&nbsp;calculation.&nbsp;Qualified&nbsp;as&nbsp;"</span><span class="mtk9">const&nbsp;float".</span></span><br><span><span class="mtk18 mtkb">float</span><span class="mtk1">&nbsp;</span><span class="mtk33">LENGTH</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk12">10.0</span></span><br><span><span></span></span><br><span><span class="mtk18 mtkb">float</span><span class="mtk1">&nbsp;</span><span class="mtk33">sma</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">ta.sma</span><span class="mtk13">(</span><span class="mtk11">close</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">LENGTH</span><span class="mtk13">)</span><span class="mtk1">&nbsp;</span><span class="mtk9">//&nbsp;Compilation&nbsp;error.&nbsp;The&nbsp;`length`&nbsp;parameter&nbsp;requi</span><span class="mtk9">res&nbsp;an&nbsp;"int"&nbsp;value.</span></span><br><span><span></span></span><br><span><span class="mtk16">plot</span><span class="mtk13">(</span><span class="mtk33">sma</span><span class="mtk13">)</span></span><br></code></div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">代码引发以下错误：</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“无法使用参数‘length’=‘LENGTH’调用‘ta.sma’。使用了‘const float’类型的参数，但预期为‘series int’。”</font></font></em></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">编译器告诉我们，代码在需要“int”的地方使用了“float”值。没有自动转换规则将“float”转换为“int”，所以我们必须自己完成这项工作。在此版本的代码中，我们使用
</font></font><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_int"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">int()函数在</font></font></a><font style="vertical-align: inherit;"><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_ta.sma"><font style="vertical-align: inherit;">ta.sma()</font></a><font style="vertical-align: inherit;">调用中将
“float”值显式转换</font></font><code dir="auto">LENGTH</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">为“int”类型
</font><font style="vertical-align: inherit;">
：</font></font><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_ta.sma"><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"></font></p>
<div class="pine-colorizer not-content colorized" data-id="1r8"><div class="pine-colorizer__header"><a class="pine-colorizer__title" href="https://tradingview.com/pine-script-docs/en/v5/Introduction.html" target="_blank" rel="noopener"><span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pine Script™</font></font></span></a><button class="pine-colorizer__copy-btn"><div class="pine-colorizer__tooltip"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">已复制</font></font></div></button></div><code class="monaco-editor-tv-pine-light"><span><span class="mtk9">//</span><span class="mtk9 mtkb">@version=</span><span class="mtk9">5</span></span><br><span><span class="mtk16">indicator</span><span class="mtk13">(</span><span class="mtk29">"explicit&nbsp;casting&nbsp;demo"</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;The&nbsp;length&nbsp;of&nbsp;the&nbsp;SMA&nbsp;calculation.&nbsp;Qualified&nbsp;as&nbsp;"</span><span class="mtk9">const&nbsp;float".</span></span><br><span><span class="mtk18 mtkb">float</span><span class="mtk1">&nbsp;</span><span class="mtk33">LENGTH</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk12">10.0</span></span><br><span><span></span></span><br><span><span class="mtk18 mtkb">float</span><span class="mtk1">&nbsp;</span><span class="mtk33">sma</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">ta.sma</span><span class="mtk13">(</span><span class="mtk11">close</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk16">int</span><span class="mtk13">(</span><span class="mtk33">LENGTH</span><span class="mtk13">))</span><span class="mtk1">&nbsp;</span><span class="mtk9">//&nbsp;Compiles&nbsp;successfully&nbsp;since&nbsp;we've&nbsp;converted&nbsp;the</span><span class="mtk9">&nbsp;`LENGTH`&nbsp;to&nbsp;"int".</span></span><br><span><span></span></span><br><span><span class="mtk16">plot</span><span class="mtk13">(</span><span class="mtk33">sma</span><span class="mtk13">)</span></span><br></code></div>
<p><font style="vertical-align: inherit;"></font><a href="https://www.tradingview.com/pine-script-reference/v5/#var_na"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">当声明分配给na 的</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">变量时，显式类型转换也很方便
，如上</font></font><a href="/pine-script-docs/language/type-system#na-value"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">一节</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">所述
</font><font style="vertical-align: inherit;">。</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例如，曾经可以通过以下任一等效方式</font><font style="vertical-align: inherit;">明确地将值为
</font></font><a href="https://www.tradingview.com/pine-script-reference/v5/#var_na"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">na的变量声明为“标签”类型：</font></font></a><font style="vertical-align: inherit;"></font></p>
<div class="pine-colorizer not-content colorized" data-id="24d"><div class="pine-colorizer__header"><a class="pine-colorizer__title" href="https://tradingview.com/pine-script-docs/en/v5/Introduction.html" target="_blank" rel="noopener"><span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pine Script™</font></font></span></a><button class="pine-colorizer__copy-btn"><div class="pine-colorizer__tooltip"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">已复制</font></font></div></button></div><code class="monaco-editor-tv-pine-light"><span><span class="mtk9">//&nbsp;Explicitly&nbsp;specify&nbsp;that&nbsp;the&nbsp;variable&nbsp;references</span><span class="mtk9">&nbsp;"label"&nbsp;objects:</span></span><br><span><span class="mtk18 mtkb">label</span><span class="mtk1">&nbsp;</span><span class="mtk33">myLabel</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk11">na</span></span><br><span><span></span></span><br><span><span class="mtk9">//&nbsp;Explicitly&nbsp;cast&nbsp;the&nbsp;`na`&nbsp;value&nbsp;to&nbsp;the&nbsp;"label"&nbsp;t</span><span class="mtk9">ype:</span></span><br><span><span class="mtk33">myLabel</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">label</span><span class="mtk13">(</span><span class="mtk11">na</span><span class="mtk13">)</span></span><br></code></div>
<h2 id="tuples" class="md-heading"><a href="#tuples"> <span class="fancy-wrap"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">元组</font></font><span class="icon icon-link" aria-hidden="true"><svg width="28" height="28" viewBox="0 0 28 28"><g fill="currentColor" clip-path="url(#a)"><path d="M14.908 5.558a5.326 5.326 0 1 1 7.533 7.533l-3.236 3.236-1.061-1.061 3.236-3.236a3.826 3.826 0 1 0-5.411-5.411l-3.236 3.236-1.06-1.06 3.235-3.237ZM5.56 14.907a5.326 5.326 0 0 0 7.532 7.533l3.236-3.236-1.061-1.061-3.236 3.236a3.826 3.826 0 1 1-5.411-5.411l3.236-3.236-1.061-1.06-3.236 3.235Z"></path><path d="m16.346 10.592-5.753 5.753 1.061 1.06 5.753-5.752-1.06-1.06Z"></path></g><defs><clipPath id="a"><path fill="#fff" d="M0 0h28v28H0z"></path></clipPath></defs></svg></span></span></a></h2>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">元</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">组</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是一组用逗号分隔的括号内的表达式。当函数、</font></font><a href="/pine-script-docs/language/methods"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">方法</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或其他本地块返回多个值时，脚本会以元组的形式返回这些值。</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例如，以下
</font></font><a href="/pine-script-docs/language/user-defined-functions"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">用户定义函数</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">返回两个“浮点”值的和与乘积：</font></font></p>
<div class="pine-colorizer not-content colorized" data-id="49f"><div class="pine-colorizer__header"><a class="pine-colorizer__title" href="https://tradingview.com/pine-script-docs/en/v5/Introduction.html" target="_blank" rel="noopener"><span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pine Script™</font></font></span></a><button class="pine-colorizer__copy-btn"><div class="pine-colorizer__tooltip"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">已复制</font></font></div></button></div><code class="monaco-editor-tv-pine-light"><span><span class="mtk9">//</span><span class="mtk9 mtkb">@function</span><span class="mtk9">&nbsp;Calculates&nbsp;the&nbsp;sum&nbsp;and&nbsp;product&nbsp;of&nbsp;two&nbsp;values.</span></span><br><span><span class="mtk15">calcSumAndProduct</span><span class="mtk13">(</span><span class="mtk18 mtkb">float</span><span class="mtk1">&nbsp;</span><span class="mtk33">a</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk18 mtkb">float</span><span class="mtk1">&nbsp;</span><span class="mtk33">b</span><span class="mtk13">)</span><span class="mtk1">&nbsp;</span><span class="mtk18">=&gt;</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;The&nbsp;sum&nbsp;of&nbsp;`a`&nbsp;and&nbsp;`b`.</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk18 mtkb">float</span><span class="mtk1">&nbsp;</span><span class="mtk33">sum</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk33">a</span><span class="mtk1">&nbsp;</span><span class="mtk18">+</span><span class="mtk1">&nbsp;</span><span class="mtk33">b</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;The&nbsp;product&nbsp;of&nbsp;`a`&nbsp;and&nbsp;`b`.</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk18 mtkb">float</span><span class="mtk1">&nbsp;</span><span class="mtk33">product</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk33">a</span><span class="mtk1">&nbsp;</span><span class="mtk18">*</span><span class="mtk1">&nbsp;</span><span class="mtk33">b</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk9">//&nbsp;Return&nbsp;a&nbsp;tuple&nbsp;containing&nbsp;the&nbsp;`sum`&nbsp;and&nbsp;`produc</span><span class="mtk9">t`.</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk13">[</span><span class="mtk33">sum</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">product</span><span class="mtk13">]</span></span><br></code></div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">当我们稍后在脚本中调用此函数时，我们使用</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">元组声明来</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">声明与函数调用返回的值相对应的多个变量：</font></font></p>
<div class="pine-colorizer not-content colorized" data-id="3av"><div class="pine-colorizer__header"><a class="pine-colorizer__title" href="https://tradingview.com/pine-script-docs/en/v5/Introduction.html" target="_blank" rel="noopener"><span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pine Script™</font></font></span></a><button class="pine-colorizer__copy-btn"><div class="pine-colorizer__tooltip"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">已复制</font></font></div></button></div><code class="monaco-editor-tv-pine-light"><span><span class="mtk9">//&nbsp;Declare&nbsp;a&nbsp;tuple&nbsp;containing&nbsp;the&nbsp;sum&nbsp;and&nbsp;product&nbsp;</span><span class="mtk9">of&nbsp;the&nbsp;`high`&nbsp;and&nbsp;`low`,&nbsp;respectively.</span></span><br><span><span class="mtk13">[</span><span class="mtk33">hlSum</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">hlProduct</span><span class="mtk13">]</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk33">calcSumAndProduct</span><span class="mtk13">(</span><span class="mtk11">high</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk11">low</span><span class="mtk13">)</span></span><br></code></div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">请记住，与声明单个变量不同，我们无法明确定义元组的变量（在本例</font></font><code dir="auto">hlSum</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">中
</font></font><code dir="auto">hlProduct</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）将包含的类型。编译器会自动推断与元组中的变量相关联的类型。</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在上面的例子中，生成的元组包含相同类型（“float”）的值。但是，需要注意的是，元组可以包含</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">多种类型</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">的值。例如，</font></font><code dir="auto">chartInfo()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
下面的函数返回一个包含“int”、“float”、“bool”、“color”和“string”值的元组：</font></font></p>
<div class="pine-colorizer not-content colorized" data-id="5c2"><div class="pine-colorizer__header"><a class="pine-colorizer__title" href="https://tradingview.com/pine-script-docs/en/v5/Introduction.html" target="_blank" rel="noopener"><span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pine Script™</font></font></span></a><button class="pine-colorizer__copy-btn"><div class="pine-colorizer__tooltip"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">已复制</font></font></div></button></div><code class="monaco-editor-tv-pine-light"><span><span class="mtk9">//</span><span class="mtk9 mtkb">@function</span><span class="mtk9">&nbsp;Returns&nbsp;information&nbsp;about&nbsp;the&nbsp;current&nbsp;chart.</span></span><br><span><span class="mtk15">chartInfo</span><span class="mtk13">()</span><span class="mtk1">&nbsp;</span><span class="mtk18">=&gt;</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;The&nbsp;first&nbsp;visible&nbsp;bar's&nbsp;UNIX&nbsp;time&nbsp;value.</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk18 mtkb">int</span><span class="mtk1">&nbsp;</span><span class="mtk33">firstVisibleTime</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk11">chart.left_visible_bar_time</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;The&nbsp;`close`&nbsp;value&nbsp;at&nbsp;the&nbsp;`firstVisibleTime`.</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk18 mtkb">float</span><span class="mtk1">&nbsp;</span><span class="mtk33">firstVisibleClose</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">ta.valuewhen</span><span class="mtk13">(</span><span class="mtk16">ta.cross</span><span class="mtk13">(</span><span class="mtk11">time</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">firstVisibleTime</span><span class="mtk13">)</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk11">close</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk12">0</span><span class="mtk13">)</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;Is&nbsp;`true`&nbsp;when&nbsp;using&nbsp;a&nbsp;standard&nbsp;chart&nbsp;type,&nbsp;`fals</span><span class="mtk9">e`&nbsp;otherwise.</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk18 mtkb">bool</span><span class="mtk1">&nbsp;</span><span class="mtk33">isStandard</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk11">chart.is_standard</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;The&nbsp;foreground&nbsp;color&nbsp;of&nbsp;the&nbsp;chart.</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk18 mtkb">color</span><span class="mtk1">&nbsp;</span><span class="mtk33">fgColor</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk11">chart.fg_color</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk9">//</span><span class="mtk9 mtkb">@variable</span><span class="mtk9">&nbsp;The&nbsp;ticker&nbsp;ID&nbsp;of&nbsp;the&nbsp;current&nbsp;chart.</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk18 mtkb">string</span><span class="mtk1">&nbsp;</span><span class="mtk33">symbol</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk11">syminfo.tickerid</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk9">//&nbsp;Return&nbsp;a&nbsp;tuple&nbsp;containing&nbsp;the&nbsp;values.&nbsp;</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk13">[</span><span class="mtk33">firstVisibleTime</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">firstVisibleClose</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">isStandard</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">fgColor</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">symbol</span><span class="mtk13">]</span></span><br></code></div>
<p><font style="vertical-align: inherit;"></font><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_request.security"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">元组对于在一次request.security()</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">调用中请求多个值特别方便
</font><font style="vertical-align: inherit;">
。</font></font></p>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例如，此</font></font><code dir="auto">roundedOHLC()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">函数返回一个元组，其中包含四舍五入到最接近的价格的 OHLC 值，这些价格可被符号的</font></font><a href="https://www.tradingview.com/pine-script-reference/v5/#var_syminfo.mintick"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">最小刻度</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
值整除。我们将此函数作为</font><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_request.security"><font style="vertical-align: inherit;">request.security()</font></a></font><code dir="auto">expression</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">中的参数调用
</font><font style="vertical-align: inherit;">
，以请求包含每日 OHLC 值的元组：</font></font><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_request.security"><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"></font></p>
<div class="pine-colorizer not-content colorized" data-id="1xw"><div class="pine-colorizer__header"><a class="pine-colorizer__title" href="https://tradingview.com/pine-script-docs/en/v5/Introduction.html" target="_blank" rel="noopener"><span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pine Script™</font></font></span></a><button class="pine-colorizer__copy-btn"><div class="pine-colorizer__tooltip"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">已复制</font></font></div></button></div><code class="monaco-editor-tv-pine-light"><span><span class="mtk9">//</span><span class="mtk9 mtkb">@function</span><span class="mtk9">&nbsp;Returns&nbsp;a&nbsp;tuple&nbsp;of&nbsp;OHLC&nbsp;values,&nbsp;rounded&nbsp;to&nbsp;the&nbsp;ne</span><span class="mtk9">arest&nbsp;tick.</span></span><br><span><span class="mtk15">roundedOHLC</span><span class="mtk13">()</span><span class="mtk1">&nbsp;</span><span class="mtk18">=&gt;</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk13">[</span><span class="mtk16">math.round_to_mintick</span><span class="mtk13">(</span><span class="mtk11">open</span><span class="mtk13">)</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk16">math.round_to_mintick</span><span class="mtk13">(</span><span class="mtk11">high</span><span class="mtk13">)</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk16">math.round_to_mintick</span><span class="mtk13">(</span><span class="mtk11">low</span><span class="mtk13">)</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk16">math.round_to_mintick</span><span class="mtk13">(</span><span class="mtk11">close</span><span class="mtk13">)]</span></span><br><span><span></span></span><br><span><span class="mtk13">[</span><span class="mtk33">op</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">hi</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">lo</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">cl</span><span class="mtk13">]</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">request.security</span><span class="mtk13">(</span><span class="mtk11">syminfo.tickerid</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"D"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">roundedOHLC</span><span class="mtk13">())</span></span><br></code></div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">我们还可以通过直接传递一个四舍五入值的元组来实现相同的结果，就像</font></font><code dir="auto">expression</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在
</font></font><a href="https://www.tradingview.com/pine-script-reference/v5/#fun_request.security"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">request.security()</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
调用中一样：</font></font></p>
<div class="pine-colorizer not-content colorized" data-id="3h9"><div class="pine-colorizer__header"><a class="pine-colorizer__title" href="https://tradingview.com/pine-script-docs/en/v5/Introduction.html" target="_blank" rel="noopener"><span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pine Script™</font></font></span></a><button class="pine-colorizer__copy-btn"><div class="pine-colorizer__tooltip"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">已复制</font></font></div></button></div><code class="monaco-editor-tv-pine-light"><span><span class="mtk13">[</span><span class="mtk33">op</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">hi</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">lo</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">cl</span><span class="mtk13">]</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">request.security</span><span class="mtk13">(</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk11">syminfo.tickerid</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"D"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk13">[</span><span class="mtk16">math.round_to_mintick</span><span class="mtk13">(</span><span class="mtk11">open</span><span class="mtk13">)</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk16">math.round_to_mintick</span><span class="mtk13">(</span><span class="mtk11">high</span><span class="mtk13">)</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk16">math.round_to_mintick</span><span class="mtk13">(</span><span class="mtk11">low</span><span class="mtk13">)</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk16">math.round_to_mintick</span><span class="mtk13">(</span><span class="mtk11">close</span><span class="mtk13">)]</span></span><br><span><span class="mtk1">&nbsp;</span><span class="mtk13">)</span></span><br></code></div>
<p><font style="vertical-align: inherit;"></font><a href="/pine-script-docs/language/conditional-structures"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">条件结构</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">的局部块
</font><font style="vertical-align: inherit;">（包括
</font></font><a href="https://www.tradingview.com/pine-script-reference/v5/#kw_if"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">if</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和
</font></font><a href="https://www.tradingview.com/pine-script-reference/v5/#kw_switch"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">switch</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
语句）可以返回元组。例如：</font></font></p>
<div class="pine-colorizer not-content colorized" data-id="4mf"><div class="pine-colorizer__header"><a class="pine-colorizer__title" href="https://tradingview.com/pine-script-docs/en/v5/Introduction.html" target="_blank" rel="noopener"><span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pine Script™</font></font></span></a><button class="pine-colorizer__copy-btn"><div class="pine-colorizer__tooltip"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">已复制</font></font></div></button></div><code class="monaco-editor-tv-pine-light"><span><span class="mtk13">[</span><span class="mtk33">v1</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">v2</span><span class="mtk13">]</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk18">if</span><span class="mtk1">&nbsp;</span><span class="mtk11">close</span><span class="mtk1">&nbsp;</span><span class="mtk18">&gt;</span><span class="mtk1">&nbsp;</span><span class="mtk11">open</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk13">[</span><span class="mtk11">high</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk11">close</span><span class="mtk13">]</span></span><br><span><span class="mtk18">else</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk13">[</span><span class="mtk11">close</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk11">low</span><span class="mtk13">]</span></span><br></code></div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和：</font></font></p>
<div class="pine-colorizer not-content colorized" data-id="4s2"><div class="pine-colorizer__header"><a class="pine-colorizer__title" href="https://tradingview.com/pine-script-docs/en/v5/Introduction.html" target="_blank" rel="noopener"><span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pine Script™</font></font></span></a><button class="pine-colorizer__copy-btn"><div class="pine-colorizer__tooltip"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">已复制</font></font></div></button></div><code class="monaco-editor-tv-pine-light"><span><span class="mtk13">[</span><span class="mtk33">v1</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">v2</span><span class="mtk13">]</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk18">switch</span><span class="mtk1">&nbsp;</span></span><br><span><span class="mtk11">close</span><span class="mtk1">&nbsp;</span><span class="mtk18">&gt;</span><span class="mtk1">&nbsp;</span><span class="mtk11">open</span><span class="mtk1">&nbsp;</span><span class="mtk18">=&gt;</span><span class="mtk1">&nbsp;</span><span class="mtk13">[</span><span class="mtk11">high</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk11">close</span><span class="mtk13">]</span></span><br><span><span class="mtk18">=&gt;</span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk13">[</span><span class="mtk11">close</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk11">low</span><span class="mtk13">]</span></span><br></code></div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">但是，三元语句不能包含元组，因为三元语句中的返回值不被视为本地块：</font></font></p>
<div class="pine-colorizer not-content colorized" data-id="3x7"><div class="pine-colorizer__header"><a class="pine-colorizer__title" href="https://tradingview.com/pine-script-docs/en/v5/Introduction.html" target="_blank" rel="noopener"><span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pine Script™</font></font></span></a><button class="pine-colorizer__copy-btn"><div class="pine-colorizer__tooltip"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">已复制</font></font></div></button></div><code class="monaco-editor-tv-pine-light"><span><span class="mtk9">//&nbsp;Not&nbsp;allowed.</span></span><br><span><span class="mtk13">[</span><span class="mtk33">v1</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">v2</span><span class="mtk13">]</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk11">close</span><span class="mtk1">&nbsp;</span><span class="mtk18">&gt;</span><span class="mtk1">&nbsp;</span><span class="mtk11">open</span><span class="mtk1">&nbsp;</span><span class="mtk18">?</span><span class="mtk1">&nbsp;</span><span class="mtk13">[</span><span class="mtk11">high</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk11">close</span><span class="mtk13">]</span><span class="mtk1">&nbsp;</span><span class="mtk18">:</span><span class="mtk1">&nbsp;</span><span class="mtk13">[</span><span class="mtk11">close</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk11">low</span><span class="mtk13">]</span></span><br></code></div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">请注意，从函数返回的元组中的所有项都限定为“简单”或“系列”，具体取决于其内容。如果元组包含“系列”值，则元组中的所有其他元素也将采用“系列”限定符。例如：</font></font></p>
<div class="pine-colorizer not-content colorized" data-id="32h"><div class="pine-colorizer__header"><a class="pine-colorizer__title" href="https://tradingview.com/pine-script-docs/en/v5/Introduction.html" target="_blank" rel="noopener"><span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pine Script™</font></font></span></a><button class="pine-colorizer__copy-btn"><div class="pine-colorizer__tooltip"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">已复制</font></font></div></button></div><code class="monaco-editor-tv-pine-light"><span><span class="mtk9">//</span><span class="mtk9 mtkb">@version=</span><span class="mtk9">5</span></span><br><span><span class="mtk16">indicator</span><span class="mtk13">(</span><span class="mtk29">"Qualified&nbsp;types&nbsp;in&nbsp;tuples&nbsp;demo"</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk15">makeTicker</span><span class="mtk13">(</span><span class="mtk18 mtkb">simple</span><span class="mtk1">&nbsp;</span><span class="mtk18 mtkb">string</span><span class="mtk1">&nbsp;</span><span class="mtk33">prefix</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk18 mtkb">simple</span><span class="mtk1">&nbsp;</span><span class="mtk18 mtkb">string</span><span class="mtk1">&nbsp;</span><span class="mtk33">ticker</span><span class="mtk13">)</span><span class="mtk1">&nbsp;</span><span class="mtk18">=&gt;</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk33">tId</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk33">prefix</span><span class="mtk1">&nbsp;</span><span class="mtk18">+</span><span class="mtk1">&nbsp;</span><span class="mtk29">":"</span><span class="mtk1">&nbsp;</span><span class="mtk18">+</span><span class="mtk1">&nbsp;</span><span class="mtk33">ticker</span><span class="mtk1">&nbsp;</span><span class="mtk9">//&nbsp;simple&nbsp;string</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk33">source</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk11">close</span><span class="mtk1">&nbsp;&nbsp;</span><span class="mtk9">//&nbsp;series&nbsp;float</span></span><br><span><span class="mtk1">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="mtk13">[</span><span class="mtk33">tId</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">source</span><span class="mtk13">]</span></span><br><span><span></span></span><br><span><span class="mtk9">//&nbsp;Both&nbsp;variables&nbsp;are&nbsp;series&nbsp;now.&nbsp;</span></span><br><span><span class="mtk13">[</span><span class="mtk33">tId</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">source</span><span class="mtk13">]</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk33">makeTicker</span><span class="mtk13">(</span><span class="mtk29">"BATS"</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">"AAPL"</span><span class="mtk13">)</span><span class="mtk1">&nbsp;</span></span><br><span><span></span></span><br><span><span class="mtk9">//&nbsp;Error&nbsp;cannot&nbsp;call&nbsp;'request.security'&nbsp;with&nbsp;'seri</span><span class="mtk9">es&nbsp;string'&nbsp;tId.</span></span><br><span><span class="mtk33">r</span><span class="mtk1">&nbsp;</span><span class="mtk18">=</span><span class="mtk1">&nbsp;</span><span class="mtk16">request.security</span><span class="mtk13">(</span><span class="mtk33">tId</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk29">""</span><span class="mtk18">,</span><span class="mtk1">&nbsp;</span><span class="mtk33">source</span><span class="mtk13">)</span></span><br><span><span></span></span><br><span><span class="mtk16">plot</span><span class="mtk13">(</span><span class="mtk33">r</span><span class="mtk13">)</span></span><br></code></div>      </div> <div class="pagination-buttons not-content" data-astro-cid-xgirumru=""> <a href="/pine-script-docs/language/loops" class="pagination-card" data-pagefind-ignore="" data-astro-cid-assl6cvf=""> <p data-astro-cid-assl6cvf=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">以前的</font></font></p> <h4 class="pagination-card-header" data-astro-cid-assl6cvf=""> <svg width="28" height="28" viewBox="0 0 28 28" data-astro-cid-assl6cvf="" data-icon="theme/arrow-back">  <use xlink:href="#ai:local:theme/arrow-back"></use>  </svg><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">循环  </font></font></h4> </a>  <a href="/pine-script-docs/language/built-ins" class="pagination-card" data-pagefind-ignore="" data-astro-cid-assl6cvf=""> <p data-astro-cid-assl6cvf=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">下一个</font></font></p> <h4 class="pagination-card-header" data-astro-cid-assl6cvf=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">  内置</font></font><svg width="28" height="28" viewBox="0 0 28 28" data-astro-cid-assl6cvf="" data-icon="theme/arrow">  <symbol id="ai:local:theme/arrow"><path fill="none" stroke="var(--arrow-fill-color, #131722)" d="m11 8 6 6-6 6"></path></symbol><use xlink:href="#ai:local:theme/arrow"></use>  </svg> </h4> </a>  </div>  </main>   <div id="toc" data-pagefind-ignore="" data-astro-cid-oor6cujd=""><aside class="document-toc-container ml-4 w-48" data-astro-cid-oor6cujd=""><section data-astro-cid-oor6cujd=""><header data-astro-cid-oor6cujd=""><h2 class="toc-header" data-astro-cid-oor6cujd=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在本页</font></font></h2></header><ul class="" id="toc-entries" data-astro-cid-oor6cujd=""><a href="#type-system" class="document-toc-link" data-astro-cid-oor6cujd=""><li class="l-2" data-current="" data-astro-cid-oor6cujd=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">类型系统</font></font></li></a><a href="#introduction" class="document-toc-link" data-astro-cid-oor6cujd=""><li class="l-3" data-astro-cid-oor6cujd=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">介绍</font></font></li></a><a href="#qualifiers" class="document-toc-link" data-astro-cid-oor6cujd=""><li class="l-3" data-astro-cid-oor6cujd=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">资格赛</font></font></li></a><a href="#const" class="document-toc-link" data-astro-cid-oor6cujd=""><li class="l-4" data-astro-cid-oor6cujd=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">常量</font></font></li></a><a href="#input" class="document-toc-link" data-astro-cid-oor6cujd=""><li class="l-4" data-astro-cid-oor6cujd=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">输入</font></font></li></a><a href="#simple" class="document-toc-link" data-astro-cid-oor6cujd=""><li class="l-4" data-astro-cid-oor6cujd=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">简单的</font></font></li></a><a href="#series" class="document-toc-link" data-astro-cid-oor6cujd=""><li class="l-4" data-astro-cid-oor6cujd=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">系列</font></font></li></a><a href="#types" class="document-toc-link" data-astro-cid-oor6cujd=""><li class="l-3" data-astro-cid-oor6cujd=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">类型</font></font></li></a><a href="#int" class="document-toc-link" data-astro-cid-oor6cujd=""><li class="l-4" data-astro-cid-oor6cujd=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">整数</font></font></li></a><a href="#float" class="document-toc-link" data-astro-cid-oor6cujd=""><li class="l-4" data-astro-cid-oor6cujd=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">漂浮</font></font></li></a><a href="#bool" class="document-toc-link" data-astro-cid-oor6cujd=""><li class="l-4" data-astro-cid-oor6cujd=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">布尔值</font></font></li></a><a href="#color" class="document-toc-link" data-astro-cid-oor6cujd=""><li class="l-4" data-astro-cid-oor6cujd=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">颜色</font></font></li></a><a href="#string" class="document-toc-link" data-astro-cid-oor6cujd=""><li class="l-4" data-astro-cid-oor6cujd=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">细绳</font></font></li></a><a href="#plot-and-hline" class="document-toc-link" data-astro-cid-oor6cujd=""><li class="l-4" data-astro-cid-oor6cujd=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">绘图和线</font></font></li></a><a href="#drawing-types" class="document-toc-link" data-astro-cid-oor6cujd=""><li class="l-4" data-astro-cid-oor6cujd=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">绘图类型</font></font></li></a><a href="#chart-points" class="document-toc-link" data-astro-cid-oor6cujd=""><li class="l-4" data-astro-cid-oor6cujd=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图表要点</font></font></li></a><a href="#collections" class="document-toc-link" data-astro-cid-oor6cujd=""><li class="l-4" data-astro-cid-oor6cujd=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">收藏</font></font></li></a><a href="#user-defined-types" class="document-toc-link" data-astro-cid-oor6cujd=""><li class="l-4" data-astro-cid-oor6cujd=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">用户定义类型</font></font></li></a><a href="#enum-types" class="document-toc-link" data-astro-cid-oor6cujd=""><li class="l-4" data-astro-cid-oor6cujd=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">枚举类型</font></font></li></a><a href="#void" class="document-toc-link" data-astro-cid-oor6cujd=""><li class="l-4" data-astro-cid-oor6cujd=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">空白</font></font></li></a><a href="#na-value" class="document-toc-link" data-astro-cid-oor6cujd=""><li class="l-3" data-astro-cid-oor6cujd=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">`na` 值</font></font></li></a><a href="#type-templates" class="document-toc-link" data-astro-cid-oor6cujd=""><li class="l-3" data-astro-cid-oor6cujd=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">类型模板</font></font></li></a><a href="#type-casting" class="document-toc-link" data-astro-cid-oor6cujd=""><li class="l-3" data-astro-cid-oor6cujd=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">类型转换</font></font></li></a><a href="#tuples" class="document-toc-link" data-astro-cid-oor6cujd="" aria-current="true"><li class="l-3" data-astro-cid-oor6cujd=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">元组</font></font></li></a></ul><a class="back-top" href="#top" data-astro-cid-oor6cujd=""><svg width="16" height="16" viewBox="0 0 16 16" data-astro-cid-oor6cujd="" data-icon="theme/back-top">  <symbol id="ai:local:theme/back-top"><path fill="currentColor" fill-rule="evenodd" d="M6.25 12.5A2.75 2.75 0 0 0 9 9.75V4.56L6.78 6.78a.75.75 0 0 1-1.06-1.06l3.5-3.5a.75.75 0 0 1 1.06 0l3.5 3.5a.75.75 0 0 1-1.06 1.06L10.5 4.56v5.19a4.25 4.25 0 0 1-8.5 0v-1a.75.75 0 0 1 1.5 0v1a2.75 2.75 0 0 0 2.75 2.75Z" clip-rule="evenodd"></path></symbol><use xlink:href="#ai:local:theme/back-top"></use>  </svg><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
回到顶部
</font></font></a></section></aside></div> </main> </div>            <script data-astro-rerun="" src="/pine-script-docs/static/pine-highlighter-v06.js" data-astro-exec=""></script><div id="goog-gt-tt" class="VIpgJd-yAWNEb-L7lbkb skiptranslate" style="border-radius: 12px; margin: 0 0 0 -23px; padding: 0; font-family: 'Google Sans', Arial, sans-serif;" data-id=""><div id="goog-gt-vt" class="VIpgJd-yAWNEb-hvhgNd"><div class=" VIpgJd-yAWNEb-hvhgNd-l4eHX-i3jM8c"><img src="https://fonts.gstatic.com/s/i/productlogos/translate/v14/24px.svg" width="24" height="24" alt=""></div><div class=" VIpgJd-yAWNEb-hvhgNd-k77Iif-i3jM8c"><div class="VIpgJd-yAWNEb-hvhgNd-IuizWc" dir="ltr">Original text</div><div id="goog-gt-original-text" class="VIpgJd-yAWNEb-nVMfcd-fmcmS VIpgJd-yAWNEb-hvhgNd-axAV1"></div></div><div class="VIpgJd-yAWNEb-hvhgNd-N7Eqid ltr"><div class="VIpgJd-yAWNEb-hvhgNd-N7Eqid-B7I4Od ltr" dir="ltr"><div class="VIpgJd-yAWNEb-hvhgNd-UTujCb">Rate this translation</div><div class="VIpgJd-yAWNEb-hvhgNd-eO9mKe">Your feedback will be used to help improve Google Translate</div></div><div class="VIpgJd-yAWNEb-hvhgNd-xgov5 ltr"><button id="goog-gt-thumbUpButton" type="button" class="VIpgJd-yAWNEb-hvhgNd-bgm6sf" title="Good translation" aria-label="Good translation" aria-pressed="false"><span id="goog-gt-thumbUpIcon"><svg width="24" height="24" viewBox="0 0 24 24" focusable="false" class="VIpgJd-yAWNEb-hvhgNd-THI6Vb NMm5M"><path d="M21 7h-6.31l.95-4.57.03-.32c0-.41-.17-.79-.44-1.06L14.17 0S7.08 6.85 7 7H2v13h16c.83 0 1.54-.5 1.84-1.22l3.02-7.05c.09-.23.14-.47.14-.73V9c0-1.1-.9-2-2-2zM7 18H4V9h3v9zm14-7l-3 7H9V8l4.34-4.34L12 9h9v2z"></path></svg></span><span id="goog-gt-thumbUpIconFilled"><svg width="24" height="24" viewBox="0 0 24 24" focusable="false" class="VIpgJd-yAWNEb-hvhgNd-THI6Vb NMm5M"><path d="M21 7h-6.31l.95-4.57.03-.32c0-.41-.17-.79-.44-1.06L14.17 0S7.08 6.85 7 7v13h11c.83 0 1.54-.5 1.84-1.22l3.02-7.05c.09-.23.14-.47.14-.73V9c0-1.1-.9-2-2-2zM5 7H1v13h4V7z"></path></svg></span></button><button id="goog-gt-thumbDownButton" type="button" class="VIpgJd-yAWNEb-hvhgNd-bgm6sf" title="Poor translation" aria-label="Poor translation" aria-pressed="false"><span id="goog-gt-thumbDownIcon"><svg width="24" height="24" viewBox="0 0 24 24" focusable="false" class="VIpgJd-yAWNEb-hvhgNd-THI6Vb NMm5M"><path d="M3 17h6.31l-.95 4.57-.03.32c0 .41.17.79.44 1.06L9.83 24s7.09-6.85 7.17-7h5V4H6c-.83 0-1.54.5-1.84 1.22l-3.02 7.05c-.09.23-.14.47-.14.73v2c0 1.1.9 2 2 2zM17 6h3v9h-3V6zM3 13l3-7h9v10l-4.34 4.34L12 15H3v-2z"></path></svg></span><span id="goog-gt-thumbDownIconFilled"><svg width="24" height="24" viewBox="0 0 24 24" focusable="false" class="VIpgJd-yAWNEb-hvhgNd-THI6Vb NMm5M"><path d="M3 17h6.31l-.95 4.57-.03.32c0 .41.17.79.44 1.06L9.83 24s7.09-6.85 7.17-7V4H6c-.83 0-1.54.5-1.84 1.22l-3.02 7.05c-.09.23-.14.47-.14.73v2c0 1.1.9 2 2 2zm16 0h4V4h-4v13z"></path></svg></span></button></div></div><div id="goog-gt-votingHiddenPane" class="VIpgJd-yAWNEb-hvhgNd-aXYTce"><form id="goog-gt-votingForm" action="//translate.googleapis.com/translate_voting?client=te_lib" method="post" target="votingFrame" class="VIpgJd-yAWNEb-hvhgNd-aXYTce"><input type="text" name="sl" id="goog-gt-votingInputSrcLang"><input type="text" name="tl" id="goog-gt-votingInputTrgLang"><input type="text" name="query" id="goog-gt-votingInputSrcText"><input type="text" name="gtrans" id="goog-gt-votingInputTrgText"><input type="text" name="vote" id="goog-gt-votingInputVote"></form><iframe name="votingFrame" frameborder="0"></iframe></div></div></div> </body></html>